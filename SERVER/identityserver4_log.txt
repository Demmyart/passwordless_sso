2018-11-27 20:02:55.859 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-27 20:02:55.911 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-27 20:02:55.914 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-27 20:02:55.914 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-27 20:02:55.914 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-27 20:02:55.914 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-27 20:02:57.755 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:02:57.775 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:03:03.909 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:03:03.909 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:03:03.979 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-27 20:03:03.987 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:03:03.988 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:03:12.029 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:03:12.029 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:03:13.258 +03:00 [ERR] Failed executing DbCommand (6ms) [Parameters=[@__normalizedUserName_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "AspNetUsers" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: AspNetUsers'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
2018-11-27 20:03:13.300 +03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServerWithAspNetIdentity.Data.ApplicationDbContext'.
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: AspNetUsers'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: AspNetUsers'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
2018-11-27 20:03:13.312 +03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServerWithAspNetIdentity.Data.ApplicationDbContext'.
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: AspNetUsers'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: AspNetUsers'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
2018-11-27 20:03:21.416 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:03:21.416 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:04:30.704 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-27 20:04:30.746 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-27 20:04:30.750 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-27 20:04:30.750 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-27 20:04:30.750 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-27 20:04:30.750 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-27 20:04:32.600 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:04:32.619 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:04:40.128 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:04:40.128 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:04:40.199 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-27 20:04:40.208 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:04:40.208 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:22:11.477 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-27 20:22:11.526 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-27 20:22:11.530 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-27 20:22:11.530 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-27 20:22:11.530 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-27 20:22:11.530 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-27 20:22:13.307 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:22:13.331 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:22:22.619 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:22:22.619 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:22:22.682 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-27 20:22:22.691 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:22:22.691 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:22:29.390 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:22:29.390 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:22:30.148 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:22:30.148 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:25:43.138 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-27 20:25:43.193 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-27 20:25:43.197 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-27 20:25:43.198 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-27 20:25:43.199 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-27 20:25:43.199 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-27 20:25:45.016 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:25:45.031 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:25:51.550 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:25:51.550 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:25:51.615 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-27 20:25:51.627 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:25:51.627 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:36:44.569 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-27 20:36:44.611 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-27 20:36:44.615 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-27 20:36:44.615 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-27 20:36:44.615 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-27 20:36:44.616 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-27 20:36:46.351 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:36:46.387 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:36:52.842 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:36:52.842 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:36:52.906 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-27 20:36:52.920 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:36:52.920 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:36:57.190 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:36:57.190 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:36:57.939 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:36:57.939 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:37:47.699 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-27 20:37:47.744 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-27 20:37:47.747 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-27 20:37:47.748 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-27 20:37:47.748 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-27 20:37:47.748 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-27 20:37:49.473 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:37:49.490 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:38:57.517 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:38:57.518 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:38:57.582 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-27 20:38:57.594 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:38:57.594 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:38:57.595 +03:00 [ERR] Request matched multiple actions resulting in ambiguity. Matching actions: IdentityServer4.Quickstart.UI.AccountController.Login (IdentityServerWithAspNetIdentity)
IdentityServer4.Quickstart.UI.AccountController.Login (IdentityServerWithAspNetIdentity)
2018-11-27 20:38:57.602 +03:00 [ERR] An unhandled exception has occurred while executing the request
Microsoft.AspNetCore.Mvc.Internal.AmbiguousActionException: Multiple actions matched. The following actions matched route data and had all constraints satisfied:

IdentityServer4.Quickstart.UI.AccountController.Login (IdentityServerWithAspNetIdentity)
IdentityServer4.Quickstart.UI.AccountController.Login (IdentityServerWithAspNetIdentity)
   at Microsoft.AspNetCore.Mvc.Internal.ActionSelector.SelectBestCandidate(RouteContext context, IReadOnlyList`1 candidates)
   at Microsoft.AspNetCore.Mvc.Internal.MvcRouteHandler.RouteAsync(RouteContext context)
   at Microsoft.AspNetCore.Routing.RouteBase.RouteAsync(RouteContext context)
   at Microsoft.AspNetCore.Routing.RouteCollection.RouteAsync(RouteContext context)
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-11-27 20:39:41.985 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-27 20:39:42.022 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-27 20:39:42.025 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-27 20:39:42.025 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-27 20:39:42.025 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-27 20:39:42.026 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-27 20:39:43.799 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:39:43.817 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:39:50.348 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:39:50.348 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:39:50.423 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-27 20:39:50.443 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:39:50.443 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:39:55.145 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:39:55.146 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:39:55.286 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:39:55.286 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:41:07.343 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:41:07.343 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:41:07.343 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-27 20:41:07.351 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:41:07.351 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:41:14.369 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:41:14.369 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:41:14.398 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:41:14.398 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:47:08.091 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-27 20:47:08.128 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-27 20:47:08.131 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-27 20:47:08.131 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-27 20:47:08.132 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-27 20:47:08.132 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-27 20:47:09.808 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:47:09.826 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:47:41.626 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-27 20:47:41.670 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-27 20:47:41.673 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-27 20:47:41.674 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-27 20:47:41.674 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-27 20:47:41.674 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-27 20:47:43.419 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:47:43.449 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:47:53.970 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:47:53.970 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:47:54.044 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-27 20:47:54.058 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:47:54.059 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:47:59.483 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:47:59.484 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:47:59.635 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:47:59.635 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:48:06.635 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:48:06.636 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:48:06.636 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-27 20:48:06.646 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:48:06.646 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:48:18.289 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:48:18.290 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:48:18.320 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:48:18.320 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:48:49.857 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:48:49.857 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:48:49.921 +03:00 [DBG] Augmenting SignInContext
2018-11-27 20:48:49.923 +03:00 [DBG] Adding idp claim with value: local
2018-11-27 20:48:49.923 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-27 20:48:49.923 +03:00 [DBG] Adding auth_time claim with value: 1543340929
2018-11-27 20:48:49.927 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2018-11-27 20:48:49.973 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-27 20:48:49.996 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-27 20:48:49.997 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-27 21:07:52.258 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-27 21:07:52.296 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-27 21:07:52.299 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-27 21:07:52.299 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-27 21:07:52.299 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-27 21:07:52.299 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-27 21:07:54.005 +03:00 [ERR] An unhandled exception has occurred while executing the request
System.InvalidOperationException: Unable to resolve service for type 'Microsoft.AspNetCore.Identity.IUserStore`1[IdentityServerWithAspNetIdentity.Models.ApplicationUser]' while attempting to activate 'Microsoft.AspNetCore.Identity.AspNetUserManager`1[IdentityServerWithAspNetIdentity.Models.ApplicationUser]'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(Type serviceType, Type implementationType, ISet`1 callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(Type serviceType, Type implementationType, ISet`1 callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, Type serviceType, ISet`1 callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(Type serviceType, ISet`1 callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(Type serviceType, ISet`1 callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(Type serviceType, Type implementationType, ISet`1 callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(Type serviceType, Type implementationType, ISet`1 callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, Type serviceType, ISet`1 callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(Type serviceType, ISet`1 callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(Type serviceType, ISet`1 callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(Type serviceType, Type implementationType, ISet`1 callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(Type serviceType, Type implementationType, ISet`1 callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, Type serviceType, ISet`1 callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(Type serviceType, ISet`1 callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(Type serviceType, ISet`1 callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(Type serviceType, ServiceProvider serviceProvider)
   at System.Collections.Concurrent.ConcurrentDictionaryExtensions.GetOrAdd[TKey,TValue,TArg](ConcurrentDictionary`2 dictionary, TKey key, Func`3 valueFactory, TArg arg)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Microsoft.AspNetCore.Identity.SecurityStampValidator.ValidatePrincipalAsync(CookieValidatePrincipalContext context)
   at Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler.HandleAuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.AuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationService.AuthenticateAsync(HttpContext context, String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-11-27 21:10:32.386 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-27 21:10:32.430 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-27 21:10:32.434 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-27 21:10:32.435 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-27 21:10:32.435 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-27 21:10:32.436 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-27 21:10:34.264 +03:00 [ERR] An unhandled exception has occurred while executing the request
System.InvalidOperationException: Unable to resolve service for type 'Microsoft.AspNetCore.Identity.IUserStore`1[IdentityServerWithAspNetIdentity.Models.ApplicationUser]' while attempting to activate 'Microsoft.AspNetCore.Identity.AspNetUserManager`1[IdentityServerWithAspNetIdentity.Models.ApplicationUser]'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(Type serviceType, Type implementationType, ISet`1 callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(Type serviceType, Type implementationType, ISet`1 callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, Type serviceType, ISet`1 callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(Type serviceType, ISet`1 callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(Type serviceType, ISet`1 callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(Type serviceType, Type implementationType, ISet`1 callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(Type serviceType, Type implementationType, ISet`1 callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, Type serviceType, ISet`1 callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(Type serviceType, ISet`1 callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(Type serviceType, ISet`1 callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(Type serviceType, Type implementationType, ISet`1 callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(Type serviceType, Type implementationType, ISet`1 callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, Type serviceType, ISet`1 callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(Type serviceType, ISet`1 callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(Type serviceType, ISet`1 callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(Type serviceType, ServiceProvider serviceProvider)
   at System.Collections.Concurrent.ConcurrentDictionaryExtensions.GetOrAdd[TKey,TValue,TArg](ConcurrentDictionary`2 dictionary, TKey key, Func`3 valueFactory, TArg arg)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Microsoft.AspNetCore.Identity.SecurityStampValidator.ValidatePrincipalAsync(CookieValidatePrincipalContext context)
   at Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler.HandleAuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.AuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationService.AuthenticateAsync(HttpContext context, String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-11-27 21:11:26.846 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-27 21:11:26.892 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-27 21:11:26.898 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-27 21:11:26.899 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-27 21:11:26.899 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-27 21:11:26.899 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-27 21:11:28.733 +03:00 [ERR] An unhandled exception has occurred while executing the request
System.InvalidOperationException: Unable to resolve service for type 'Microsoft.AspNetCore.Identity.IUserStore`1[IdentityServerWithAspNetIdentity.Models.ApplicationUser]' while attempting to activate 'Microsoft.AspNetCore.Identity.AspNetUserManager`1[IdentityServerWithAspNetIdentity.Models.ApplicationUser]'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(Type serviceType, Type implementationType, ISet`1 callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(Type serviceType, Type implementationType, ISet`1 callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, Type serviceType, ISet`1 callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(Type serviceType, ISet`1 callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(Type serviceType, ISet`1 callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(Type serviceType, Type implementationType, ISet`1 callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(Type serviceType, Type implementationType, ISet`1 callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, Type serviceType, ISet`1 callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(Type serviceType, ISet`1 callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(Type serviceType, ISet`1 callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(Type serviceType, Type implementationType, ISet`1 callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(Type serviceType, Type implementationType, ISet`1 callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, Type serviceType, ISet`1 callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(Type serviceType, ISet`1 callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(Type serviceType, ISet`1 callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(Type serviceType, ServiceProvider serviceProvider)
   at System.Collections.Concurrent.ConcurrentDictionaryExtensions.GetOrAdd[TKey,TValue,TArg](ConcurrentDictionary`2 dictionary, TKey key, Func`3 valueFactory, TArg arg)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Microsoft.AspNetCore.Identity.SecurityStampValidator.ValidatePrincipalAsync(CookieValidatePrincipalContext context)
   at Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler.HandleAuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.AuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationService.AuthenticateAsync(HttpContext context, String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-11-27 21:12:10.395 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-27 21:12:10.432 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-27 21:12:10.434 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-27 21:12:10.435 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-27 21:12:10.435 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-27 21:12:10.435 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-27 21:12:12.240 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-27 21:12:12.259 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-27 21:12:18.839 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-27 21:12:18.839 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-27 21:12:20.868 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-27 21:12:20.868 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-27 21:12:22.426 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-27 21:12:22.427 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-27 21:12:22.621 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-11-27 21:12:22.625 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-11-27 21:12:22.625 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-11-27 21:12:22.721 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "b96460b4-7200-42a1-8aed-dadb3f6d5b7c",
  "DisplayName": "b96460b4-7200-42a1-8aed-dadb3f6d5b7c",
  "ActivityId": "0HLIKIFCPG3G9:00000004",
  "TimeStamp": "2018-11-27T18:12:22Z",
  "ProcessId": 28376,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-11-27 21:12:33.058 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-27 21:20:08.011 +03:00 [DBG] Augmenting SignInContext
2018-11-27 21:20:08.013 +03:00 [DBG] Adding idp claim with value: local
2018-11-27 21:20:08.013 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-27 21:20:08.013 +03:00 [DBG] Adding auth_time claim with value: 1543342808
2018-11-27 21:20:08.040 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-27 21:20:08.101 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-27 21:20:08.101 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-27 21:23:09.340 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-27 21:23:09.340 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-27 21:23:12.262 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-27 21:23:12.263 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-27 21:33:09.176 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-27 21:33:09.224 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-27 21:33:09.227 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-27 21:33:09.229 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-27 21:33:09.232 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-27 21:33:09.233 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-27 21:33:11.194 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-27 21:33:11.212 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-27 21:33:23.328 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-27 21:33:23.328 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-27 21:33:26.080 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-27 21:33:26.081 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-27 21:33:27.213 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-27 21:33:27.213 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-27 21:33:27.418 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-11-27 21:33:27.421 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-11-27 21:33:27.422 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-11-27 21:33:27.494 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "4672efcd-3d66-47fc-80af-6552392e5210",
  "DisplayName": "4672efcd-3d66-47fc-80af-6552392e5210",
  "ActivityId": "0HLIKIR3V374N:00000002",
  "TimeStamp": "2018-11-27T18:33:27Z",
  "ProcessId": 11990,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-11-27 21:33:30.373 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-27 21:49:43.201 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-27 21:49:43.243 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-27 21:49:43.246 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-27 21:49:43.246 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-27 21:49:43.246 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-27 21:49:43.246 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-27 21:49:51.734 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-27 21:50:26.649 +03:00 [WRN] VerifyUserTokenAsync() failed with purpose: passwordless-auth for user 75063126-5e31-496d-a047-65cdf9d76167.
2018-11-27 21:51:03.793 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-27 21:51:03.831 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-27 21:51:03.834 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-27 21:51:03.834 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-27 21:51:03.834 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-27 21:51:03.835 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-27 21:51:14.525 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-27 21:52:00.308 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-27 21:52:24.182 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-27 21:52:24.221 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-27 21:52:24.224 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-27 21:52:24.224 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-27 21:52:24.225 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-27 21:52:24.225 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-27 21:52:32.005 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-27 21:53:12.015 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-27 21:53:12.068 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-27 21:53:12.071 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-27 21:53:12.071 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-27 21:53:12.071 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-27 21:53:12.071 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-27 21:53:19.943 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-27 21:53:45.178 +03:00 [DBG] Augmenting SignInContext
2018-11-27 21:53:45.180 +03:00 [DBG] Adding idp claim with value: local
2018-11-27 21:53:45.180 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-27 21:53:45.181 +03:00 [DBG] Adding auth_time claim with value: 1543344825
2018-11-27 21:53:45.234 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-27 21:53:45.260 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-27 21:53:45.261 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-27 21:53:49.606 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-27 21:53:49.606 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-27 21:53:50.754 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-27 21:53:50.754 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-27 21:53:50.785 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-11-27 21:53:50.789 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-11-27 21:53:50.789 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-11-27 21:53:50.862 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "ab392b28-3a08-4e90-a5c3-a0d74d73dc4f",
  "DisplayName": "ab392b28-3a08-4e90-a5c3-a0d74d73dc4f",
  "ActivityId": "0HLIKJ6ADGIMF:00000009",
  "TimeStamp": "2018-11-27T18:53:50Z",
  "ProcessId": 26640,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-11-27 21:53:55.036 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-27 21:54:16.310 +03:00 [DBG] Augmenting SignInContext
2018-11-27 21:54:16.310 +03:00 [DBG] Adding idp claim with value: local
2018-11-27 21:54:16.310 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-27 21:54:16.310 +03:00 [DBG] Adding auth_time claim with value: 1543344856
2018-11-27 21:54:16.310 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-27 21:54:16.328 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-27 21:54:16.328 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-27 21:54:46.806 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-27 21:54:46.806 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-27 21:54:52.209 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-27 21:54:52.209 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-27 21:54:53.380 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-27 21:54:53.380 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-27 21:54:57.873 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-27 21:54:57.873 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-27 21:54:58.828 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-27 21:54:58.828 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-27 21:54:58.829 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-11-27 21:54:58.829 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-11-27 21:54:58.829 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-11-27 21:54:58.829 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "ab392b28-3a08-4e90-a5c3-a0d74d73dc4f",
  "DisplayName": "ab392b28-3a08-4e90-a5c3-a0d74d73dc4f",
  "ActivityId": "0HLIKJ6ADGIMF:00000015",
  "TimeStamp": "2018-11-27T18:54:58Z",
  "ProcessId": 26640,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-11-27 21:55:01.321 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-27 21:57:45.365 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-27 21:57:45.404 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-27 21:57:45.406 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-27 21:57:45.406 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-27 21:57:45.407 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-27 21:57:45.407 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-27 21:57:53.821 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-27 21:58:38.096 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-27 21:58:38.140 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-27 21:58:38.143 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-27 21:58:38.143 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-27 21:58:38.143 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-27 21:58:38.143 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-27 21:58:48.081 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-27 22:05:31.833 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-27 22:06:21.742 +03:00 [DBG] Augmenting SignInContext
2018-11-27 22:06:21.744 +03:00 [DBG] Adding idp claim with value: local
2018-11-27 22:06:21.745 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-27 22:06:21.745 +03:00 [DBG] Adding auth_time claim with value: 1543345581
2018-11-27 22:06:21.781 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-27 22:06:21.922 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-27 22:06:21.923 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 11:34:36.404 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-11-28 11:34:36.428 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-11-28 11:34:36.428 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-11-28 11:34:36.431 +03:00 [INF] Identity.Application was not authenticated. Failure message: No principal.
2018-11-28 11:34:36.431 +03:00 [INF] Identity.Application was not authenticated. Failure message: No principal.
2018-11-28 11:34:36.446 +03:00 [INF] Identity.Application was not authenticated. Failure message: No principal.
2018-11-28 11:34:40.558 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 11:34:43.431 +03:00 [INF] AuthenticationScheme: Google was challenged.
2018-11-28 11:57:40.987 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 11:57:41.022 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 11:57:41.025 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 11:57:41.025 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 11:57:41.025 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 11:57:41.025 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 11:57:51.094 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 11:57:53.961 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 11:57:56.516 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 11:57:57.823 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 11:57:58.292 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 11:57:59.365 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 11:58:00.123 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 11:58:01.206 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 11:58:02.176 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 11:58:09.976 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 11:58:10.540 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 11:58:30.708 +03:00 [DBG] Augmenting SignInContext
2018-11-28 11:58:30.710 +03:00 [DBG] Adding idp claim with value: local
2018-11-28 11:58:30.711 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-28 11:58:30.711 +03:00 [DBG] Adding auth_time claim with value: 1543395510
2018-11-28 11:58:30.756 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 11:58:30.888 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 11:58:30.889 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 11:58:32.889 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 11:58:32.889 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 11:58:34.042 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 11:58:34.042 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 11:58:34.046 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 12:02:13.485 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 12:02:13.485 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 12:02:14.915 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 12:02:14.915 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 12:02:14.915 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 13:53:52.498 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 13:53:52.535 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 13:53:52.538 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 13:53:52.539 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 13:53:52.539 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 13:53:52.539 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 13:53:55.445 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-11-28 13:53:55.467 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-11-28 13:53:55.468 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-11-28 13:53:55.470 +03:00 [INF] Identity.Application was not authenticated. Failure message: No principal.
2018-11-28 13:53:55.481 +03:00 [INF] Identity.Application was not authenticated. Failure message: No principal.
2018-11-28 13:54:01.724 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 14:14:05.430 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 14:14:05.472 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 14:14:05.474 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 14:14:05.475 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 14:14:05.475 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 14:14:05.475 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 14:14:13.472 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 14:14:13.518 +03:00 [ERR] An unhandled exception has occurred while executing the request
System.InvalidOperationException: Unable to resolve service for type 'Microsoft.AspNetCore.Identity.UserManager`1[IdentityServer4.Test.TestUser]' while attempting to activate 'IdentityServer4.Quickstart.UI.AccountController'.
   at Microsoft.Extensions.Internal.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method(Closure , IServiceProvider , Object[] )
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass5_0.<CreateControllerFactory>g__CreateController0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-11-28 14:18:09.134 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 14:18:09.171 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 14:18:09.174 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 14:18:09.174 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 14:18:09.174 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 14:18:09.175 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 14:18:16.878 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 14:19:36.688 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 14:19:36.722 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 14:19:36.725 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 14:19:36.725 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 14:19:36.725 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 14:19:36.725 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 14:19:45.269 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 14:19:45.349 +03:00 [ERR] An unhandled exception has occurred while executing the request
System.InvalidOperationException: Unable to resolve service for type 'Microsoft.AspNetCore.Identity.UserManager`1[IdentityServer4.Test.TestUser]' while attempting to activate 'IdentityServer4.Quickstart.UI.AccountController'.
   at Microsoft.Extensions.Internal.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method(Closure , IServiceProvider , Object[] )
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass5_0.<CreateControllerFactory>g__CreateController0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-11-28 14:22:42.253 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 14:22:42.296 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 14:22:42.299 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 14:22:42.299 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 14:22:42.299 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 14:22:42.299 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 14:31:22.848 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 14:31:22.885 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 14:31:22.887 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 14:31:22.887 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 14:31:22.888 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 14:31:22.888 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 14:31:31.064 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 14:32:01.551 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 14:32:01.588 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 14:32:01.590 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 14:32:01.590 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 14:32:01.591 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 14:32:01.591 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 14:32:10.889 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 14:33:53.357 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 14:33:53.398 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 14:33:53.401 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 14:33:53.401 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 14:33:53.401 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 14:33:53.401 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 14:34:01.148 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 14:34:24.720 +03:00 [DBG] Augmenting SignInContext
2018-11-28 14:34:24.723 +03:00 [DBG] Adding idp claim with value: local
2018-11-28 14:34:24.723 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-28 14:34:24.724 +03:00 [DBG] Adding auth_time claim with value: 1543404864
2018-11-28 14:34:24.779 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 14:34:24.816 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 14:34:24.820 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 14:34:27.977 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 14:34:27.977 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 14:34:27.996 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 14:51:55.085 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 14:51:55.120 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 14:51:55.123 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 14:51:55.123 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 14:51:55.123 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 14:51:55.123 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 14:51:56.960 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 14:51:56.977 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 14:55:15.239 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 14:55:15.239 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 14:55:16.643 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 14:55:16.644 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 14:55:16.832 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-11-28 14:55:16.836 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-11-28 14:55:16.836 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-11-28 14:55:16.924 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "4a1572de-0674-4fc5-9286-5e068c103524",
  "DisplayName": "4a1572de-0674-4fc5-9286-5e068c103524",
  "ActivityId": "0HLIL4VIH00M5:00000002",
  "TimeStamp": "2018-11-28T11:55:16Z",
  "ProcessId": 16509,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-11-28 14:55:20.667 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 14:55:20.710 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 14:55:20.713 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 14:55:20.714 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 14:55:20.714 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 14:55:20.714 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 14:55:36.961 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 14:55:54.606 +03:00 [DBG] Augmenting SignInContext
2018-11-28 14:55:54.608 +03:00 [DBG] Adding idp claim with value: local
2018-11-28 14:55:54.608 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-28 14:55:54.608 +03:00 [DBG] Adding auth_time claim with value: 1543406154
2018-11-28 14:55:54.649 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 14:55:54.677 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 14:55:54.678 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 14:57:22.221 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 14:57:22.221 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 14:57:22.230 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:27:43.765 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-11-28 15:27:43.768 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-11-28 15:27:43.768 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-11-28 15:27:43.770 +03:00 [INF] Identity.Application was not authenticated. Failure message: No principal.
2018-11-28 15:27:43.770 +03:00 [INF] Identity.Application was not authenticated. Failure message: No principal.
2018-11-28 15:27:43.770 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 15:27:44.425 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 15:27:45.733 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 15:27:46.400 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 15:35:20.112 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 15:35:20.147 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 15:35:20.150 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 15:35:20.150 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 15:35:20.150 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 15:35:20.151 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 15:35:34.432 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 15:35:34.449 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 15:35:34.449 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 15:35:34.457 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 15:35:34.600 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 15:35:34.601 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 15:35:34.604 +03:00 [DBG] Start discovery request
2018-11-28 15:35:34.707 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 15:35:34.708 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 15:35:34.709 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 15:35:34.709 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 15:35:34.710 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 15:35:34.710 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 15:35:34.713 +03:00 [DBG] Start key discovery request
2018-11-28 15:35:34.953 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 15:35:34.955 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 15:35:34.956 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 15:35:34.961 +03:00 [DBG] Start authorize request
2018-11-28 15:35:34.979 +03:00 [DBG] No user present in authorize request
2018-11-28 15:35:34.983 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:35:35.036 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:35:35.046 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "EourfMq81LSTh1vlZ8D2Q8xXxlFpkzyk91fH1Yop",
  "Nonce": "EourfMq81LSTh1vlZ8D2Q8xXxlFpkzyk91fH1Yop",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "EourfMq81LSTh1vlZ8D2Q8xXxlFpkzyk91fH1Yop",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "EourfMq81LSTh1vlZ8D2Q8xXxlFpkzyk91fH1Yop"
  }
}
2018-11-28 15:35:35.053 +03:00 [INF] Showing login: User is not authenticated
2018-11-28 15:35:35.198 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:35:35.200 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:36:05.958 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 15:36:05.959 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 15:36:05.959 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 15:36:05.959 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 15:36:05.959 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 15:36:05.959 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 15:36:05.959 +03:00 [DBG] Start discovery request
2018-11-28 15:36:06.066 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 15:36:06.066 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 15:36:06.066 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 15:36:06.067 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 15:36:06.080 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 15:36:06.081 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 15:36:06.081 +03:00 [DBG] Start key discovery request
2018-11-28 15:36:15.590 +03:00 [DBG] Augmenting SignInContext
2018-11-28 15:36:15.593 +03:00 [DBG] Adding idp claim with value: local
2018-11-28 15:36:15.593 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-28 15:36:15.594 +03:00 [DBG] Adding auth_time claim with value: 1543408575
2018-11-28 15:36:15.627 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 15:36:15.705 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:36:15.706 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:36:20.023 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 15:36:20.023 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 15:36:20.023 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 15:36:20.024 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 15:36:20.024 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 15:36:20.024 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 15:36:20.024 +03:00 [DBG] Start discovery request
2018-11-28 15:36:20.126 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 15:36:20.126 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 15:36:20.127 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 15:36:20.127 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 15:36:20.127 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 15:36:20.127 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 15:36:20.127 +03:00 [DBG] Start key discovery request
2018-11-28 15:39:29.435 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:39:29.435 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:39:29.435 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 15:39:29.436 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 15:39:29.436 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 15:39:29.436 +03:00 [DBG] Start authorize request
2018-11-28 15:39:29.436 +03:00 [DBG] User in authorize request: test@test.com
2018-11-28 15:39:29.436 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:39:29.436 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:39:29.436 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "test@test.com",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "NtAPv9F1Miq2OhE5CvUapeRenYJ0OZYSNCgJOgV5",
  "Nonce": "NtAPv9F1Miq2OhE5CvUapeRenYJ0OZYSNCgJOgV5",
  "SessionId": "f6a8d9b688ca8305ebfed4c87eee7529",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "NtAPv9F1Miq2OhE5CvUapeRenYJ0OZYSNCgJOgV5",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "NtAPv9F1Miq2OhE5CvUapeRenYJ0OZYSNCgJOgV5"
  }
}
2018-11-28 15:39:29.497 +03:00 [INF] Showing login: User is not active
2018-11-28 15:39:29.526 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:39:29.527 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:39:29.528 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:39:29.529 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:41:38.561 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:41:38.562 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:41:38.562 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 15:41:38.562 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 15:41:38.562 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 15:41:38.562 +03:00 [DBG] Start authorize request
2018-11-28 15:41:38.562 +03:00 [DBG] User in authorize request: test@test.com
2018-11-28 15:41:38.562 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:41:38.562 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:41:38.562 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "test@test.com",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "PD1VGZfa5rSoCHUAFr4QjDLF8TagJ7tiDVC9djre",
  "Nonce": "PD1VGZfa5rSoCHUAFr4QjDLF8TagJ7tiDVC9djre",
  "SessionId": "f6a8d9b688ca8305ebfed4c87eee7529",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "PD1VGZfa5rSoCHUAFr4QjDLF8TagJ7tiDVC9djre",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "PD1VGZfa5rSoCHUAFr4QjDLF8TagJ7tiDVC9djre"
  }
}
2018-11-28 15:41:38.564 +03:00 [INF] Showing login: User is not active
2018-11-28 15:41:38.577 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:41:38.577 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:41:38.577 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:41:38.578 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:41:54.517 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 15:41:54.517 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 15:41:54.517 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 15:41:54.517 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 15:41:54.517 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 15:41:54.517 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 15:41:54.517 +03:00 [DBG] Start discovery request
2018-11-28 15:41:54.558 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 15:41:54.558 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 15:41:54.559 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 15:41:54.559 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 15:41:54.559 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 15:41:54.559 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 15:41:54.559 +03:00 [DBG] Start key discovery request
2018-11-28 15:42:05.968 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:42:05.968 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:42:05.969 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 15:42:05.969 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 15:42:05.969 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 15:42:05.969 +03:00 [DBG] Start authorize request
2018-11-28 15:42:05.969 +03:00 [DBG] User in authorize request: test@test.com
2018-11-28 15:42:05.969 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:42:05.970 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:42:05.970 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "test@test.com",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "vY8yu4GbNbO9eTLTBBB68e9GYGKW8zLfsKijbJBo",
  "Nonce": "vY8yu4GbNbO9eTLTBBB68e9GYGKW8zLfsKijbJBo",
  "SessionId": "f6a8d9b688ca8305ebfed4c87eee7529",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "vY8yu4GbNbO9eTLTBBB68e9GYGKW8zLfsKijbJBo",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "vY8yu4GbNbO9eTLTBBB68e9GYGKW8zLfsKijbJBo"
  }
}
2018-11-28 15:42:05.970 +03:00 [INF] Showing login: User is not active
2018-11-28 15:42:05.992 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:42:05.992 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:42:05.993 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:42:05.993 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:42:15.389 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:42:15.389 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:42:17.182 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:42:17.182 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:42:17.209 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-11-28 15:42:17.209 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-11-28 15:42:17.210 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-11-28 15:42:17.249 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "test@test.com",
  "DisplayName": "test@test.com",
  "ActivityId": "0HLIL5NQRD8ET:00000006",
  "TimeStamp": "2018-11-28T12:42:17Z",
  "ProcessId": 7265,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-11-28 15:42:23.100 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:42:23.100 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:42:28.875 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 15:42:28.875 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 15:42:28.875 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 15:42:28.875 +03:00 [DBG] Start authorize request
2018-11-28 15:42:28.875 +03:00 [DBG] No user present in authorize request
2018-11-28 15:42:28.875 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:42:28.876 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:42:28.876 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "N8FN4svBGV9iiYAMhuj7XnAWBrcc7dC7v0sFt0hn",
  "Nonce": "N8FN4svBGV9iiYAMhuj7XnAWBrcc7dC7v0sFt0hn",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "N8FN4svBGV9iiYAMhuj7XnAWBrcc7dC7v0sFt0hn",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "N8FN4svBGV9iiYAMhuj7XnAWBrcc7dC7v0sFt0hn"
  }
}
2018-11-28 15:42:28.876 +03:00 [INF] Showing login: User is not authenticated
2018-11-28 15:42:28.888 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:42:28.888 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:43:28.159 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:43:28.159 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:43:47.646 +03:00 [ERR] An unhandled exception has occurred while executing the request
System.ArgumentNullException: Value cannot be null.
Parameter name: user
   at Microsoft.AspNetCore.Identity.UserManager`1.VerifyUserTokenAsync(TUser user, String tokenProvider, String purpose, String token)
   at IdentityServer4.Quickstart.UI.AccountController.LoginCallback(String token, String email) in /home/demmy/Documents/SSO_PASSWORDLESS/Quickstart/Account/AccountController.cs:line 158
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-11-28 15:43:51.825 +03:00 [DBG] Augmenting SignInContext
2018-11-28 15:43:51.825 +03:00 [DBG] Adding idp claim with value: local
2018-11-28 15:43:51.825 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-28 15:43:51.825 +03:00 [DBG] Adding auth_time claim with value: 1543409031
2018-11-28 15:43:51.826 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 15:43:51.835 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:43:51.836 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:43:55.452 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:43:55.452 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:43:55.452 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:43:55.452 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:43:58.490 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 15:43:58.490 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 15:43:58.490 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 15:43:58.491 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 15:43:58.491 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 15:43:58.491 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 15:43:58.491 +03:00 [DBG] Start discovery request
2018-11-28 15:43:58.703 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 15:43:58.703 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 15:43:58.703 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 15:43:58.704 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 15:43:58.704 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 15:43:58.704 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 15:43:58.704 +03:00 [DBG] Start key discovery request
2018-11-28 15:48:50.662 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 15:48:50.697 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 15:48:50.700 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 15:48:50.700 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 15:48:50.700 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 15:48:50.700 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 15:48:52.488 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:48:52.507 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:49:00.277 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:49:00.278 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:49:01.321 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:49:01.322 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:49:01.494 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-11-28 15:49:01.498 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-11-28 15:49:01.499 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-11-28 15:49:01.558 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "test@test.com",
  "DisplayName": "test@test.com",
  "ActivityId": "0HLIL5VCDR6LR:00000003",
  "TimeStamp": "2018-11-28T12:49:01Z",
  "ProcessId": 15312,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-11-28 15:49:06.169 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 15:49:06.172 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 15:49:06.182 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 15:49:06.184 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 15:49:06.187 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 15:49:06.192 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 15:49:06.200 +03:00 [DBG] Start discovery request
2018-11-28 15:49:06.438 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 15:49:06.438 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 15:49:06.438 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 15:49:06.439 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 15:49:06.439 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 15:49:06.439 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 15:49:06.442 +03:00 [DBG] Start key discovery request
2018-11-28 15:49:07.886 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 15:49:07.888 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 15:49:07.888 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 15:49:07.891 +03:00 [DBG] Start authorize request
2018-11-28 15:49:07.898 +03:00 [DBG] No user present in authorize request
2018-11-28 15:49:07.903 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:49:07.945 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:49:07.958 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "w01KOMLnSqL92s62xIaWbUcydrBj7TOR4cvoC3UZ",
  "Nonce": "w01KOMLnSqL92s62xIaWbUcydrBj7TOR4cvoC3UZ",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "w01KOMLnSqL92s62xIaWbUcydrBj7TOR4cvoC3UZ",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "w01KOMLnSqL92s62xIaWbUcydrBj7TOR4cvoC3UZ"
  }
}
2018-11-28 15:49:07.963 +03:00 [INF] Showing login: User is not authenticated
2018-11-28 15:49:08.030 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:49:08.031 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:49:29.246 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:49:29.247 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:49:46.965 +03:00 [DBG] Augmenting SignInContext
2018-11-28 15:49:46.968 +03:00 [DBG] Adding idp claim with value: local
2018-11-28 15:49:46.968 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-28 15:49:46.968 +03:00 [DBG] Adding auth_time claim with value: 1543409386
2018-11-28 15:49:46.987 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 15:49:47.001 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:49:47.001 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:49:47.003 +03:00 [ERR] An unhandled exception has occurred while executing the request
System.ArgumentNullException: Value cannot be null.
Parameter name: userName
   at Microsoft.AspNetCore.Identity.UserManager`1.FindByNameAsync(String userName)
   at IdentityServer4.Quickstart.UI.AccountController.LoginCallback(String token, String email, String returnUrl) in /home/demmy/Documents/SSO_PASSWORDLESS/Quickstart/Account/AccountController.cs:line 157
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-11-28 15:49:57.895 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:49:57.895 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:49:57.898 +03:00 [WRN] VerifyUserTokenAsync() failed with purpose: passwordless-auth for user e2b26e86-947b-47fe-ab1f-eda044e9fd97.
2018-11-28 15:50:03.727 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 15:50:03.728 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 15:50:03.728 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 15:50:03.728 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 15:50:03.728 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 15:50:03.728 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 15:50:03.728 +03:00 [DBG] Start discovery request
2018-11-28 15:50:03.815 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 15:50:03.815 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 15:50:03.815 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 15:50:03.815 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 15:50:03.815 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 15:50:03.815 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 15:50:03.816 +03:00 [DBG] Start key discovery request
2018-11-28 15:52:42.933 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:42.933 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:42.933 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 15:52:42.934 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 15:52:42.934 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 15:52:42.934 +03:00 [DBG] Start authorize request
2018-11-28 15:52:42.934 +03:00 [DBG] User in authorize request: test@test.com
2018-11-28 15:52:42.934 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:42.934 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:42.934 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "test@test.com",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
  "Nonce": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
  "SessionId": "43d3846e2a42d57feb8d046b89732d8a",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL"
  }
}
2018-11-28 15:52:42.974 +03:00 [INF] Showing login: User is not active
2018-11-28 15:52:42.998 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:42.999 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:42.999 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:43.000 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:44.620 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:44.620 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:44.622 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:44.623 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:44.654 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:44.654 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:44.654 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-11-28 15:52:44.655 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-11-28 15:52:44.655 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-11-28 15:52:44.660 +03:00 [DBG] Start authorize callback request
2018-11-28 15:52:44.681 +03:00 [DBG] User in authorize request: test@test.com
2018-11-28 15:52:44.682 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:44.682 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:44.682 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "test@test.com",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
  "Nonce": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
  "SessionId": "43d3846e2a42d57feb8d046b89732d8a",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL"
  }
}
2018-11-28 15:52:44.683 +03:00 [INF] Showing login: User is not active
2018-11-28 15:52:44.699 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:44.699 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:44.699 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:44.699 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:45.885 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:45.885 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:45.886 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:45.886 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:45.939 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:45.939 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:45.939 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-11-28 15:52:45.939 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-11-28 15:52:45.939 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-11-28 15:52:45.939 +03:00 [DBG] Start authorize callback request
2018-11-28 15:52:45.940 +03:00 [DBG] User in authorize request: test@test.com
2018-11-28 15:52:45.940 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:45.940 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:45.940 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "test@test.com",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
  "Nonce": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
  "SessionId": "43d3846e2a42d57feb8d046b89732d8a",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL"
  }
}
2018-11-28 15:52:45.941 +03:00 [INF] Showing login: User is not active
2018-11-28 15:52:45.983 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:45.983 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:45.983 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:45.983 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:46.651 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:46.651 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:46.652 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:46.652 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:46.670 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:46.670 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:46.670 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-11-28 15:52:46.670 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-11-28 15:52:46.671 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-11-28 15:52:46.671 +03:00 [DBG] Start authorize callback request
2018-11-28 15:52:46.671 +03:00 [DBG] User in authorize request: test@test.com
2018-11-28 15:52:46.671 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:46.671 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:46.671 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "test@test.com",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
  "Nonce": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
  "SessionId": "43d3846e2a42d57feb8d046b89732d8a",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL"
  }
}
2018-11-28 15:52:46.672 +03:00 [INF] Showing login: User is not active
2018-11-28 15:52:46.687 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:46.687 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:46.688 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:46.688 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:47.231 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:47.231 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:47.231 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:47.232 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:47.249 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:47.249 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:47.249 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-11-28 15:52:47.249 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-11-28 15:52:47.249 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-11-28 15:52:47.249 +03:00 [DBG] Start authorize callback request
2018-11-28 15:52:47.250 +03:00 [DBG] User in authorize request: test@test.com
2018-11-28 15:52:47.250 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:47.250 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:47.250 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "test@test.com",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
  "Nonce": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
  "SessionId": "43d3846e2a42d57feb8d046b89732d8a",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL"
  }
}
2018-11-28 15:52:47.251 +03:00 [INF] Showing login: User is not active
2018-11-28 15:52:47.267 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:47.267 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:47.267 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:47.267 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:47.802 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:47.802 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:47.803 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:47.803 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:47.820 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:47.821 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:47.821 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-11-28 15:52:47.821 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-11-28 15:52:47.821 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-11-28 15:52:47.821 +03:00 [DBG] Start authorize callback request
2018-11-28 15:52:47.821 +03:00 [DBG] User in authorize request: test@test.com
2018-11-28 15:52:47.821 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:47.821 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:47.821 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "test@test.com",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
  "Nonce": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
  "SessionId": "43d3846e2a42d57feb8d046b89732d8a",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL"
  }
}
2018-11-28 15:52:47.822 +03:00 [INF] Showing login: User is not active
2018-11-28 15:52:47.837 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:47.837 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:47.837 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:47.838 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:48.262 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:48.262 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:48.262 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:48.263 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:48.273 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:48.274 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:48.274 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-11-28 15:52:48.274 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-11-28 15:52:48.274 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-11-28 15:52:48.274 +03:00 [DBG] Start authorize callback request
2018-11-28 15:52:48.274 +03:00 [DBG] User in authorize request: test@test.com
2018-11-28 15:52:48.275 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:48.275 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:48.275 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "test@test.com",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
  "Nonce": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
  "SessionId": "43d3846e2a42d57feb8d046b89732d8a",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL"
  }
}
2018-11-28 15:52:48.276 +03:00 [INF] Showing login: User is not active
2018-11-28 15:52:48.303 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:48.304 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:48.304 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:48.304 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:48.562 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:48.562 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:48.562 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:48.563 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:48.572 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:48.572 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:48.572 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-11-28 15:52:48.572 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-11-28 15:52:48.572 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-11-28 15:52:48.572 +03:00 [DBG] Start authorize callback request
2018-11-28 15:52:48.572 +03:00 [DBG] User in authorize request: test@test.com
2018-11-28 15:52:48.572 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:48.573 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:48.573 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "test@test.com",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
  "Nonce": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
  "SessionId": "43d3846e2a42d57feb8d046b89732d8a",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL"
  }
}
2018-11-28 15:52:48.573 +03:00 [INF] Showing login: User is not active
2018-11-28 15:52:48.585 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:48.585 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:48.585 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:48.586 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:48.786 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:48.786 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:48.787 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:48.787 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:48.803 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:48.803 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:48.803 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-11-28 15:52:48.803 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-11-28 15:52:48.803 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-11-28 15:52:48.803 +03:00 [DBG] Start authorize callback request
2018-11-28 15:52:48.804 +03:00 [DBG] User in authorize request: test@test.com
2018-11-28 15:52:48.804 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:48.804 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:48.804 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "test@test.com",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
  "Nonce": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
  "SessionId": "43d3846e2a42d57feb8d046b89732d8a",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL"
  }
}
2018-11-28 15:52:48.805 +03:00 [INF] Showing login: User is not active
2018-11-28 15:52:48.821 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:48.821 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:48.821 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:48.822 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:49.155 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:49.155 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:49.156 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:49.156 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:49.170 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:49.170 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:49.170 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-11-28 15:52:49.170 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-11-28 15:52:49.170 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-11-28 15:52:49.170 +03:00 [DBG] Start authorize callback request
2018-11-28 15:52:49.171 +03:00 [DBG] User in authorize request: test@test.com
2018-11-28 15:52:49.171 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:49.171 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:49.171 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "test@test.com",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
  "Nonce": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
  "SessionId": "43d3846e2a42d57feb8d046b89732d8a",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL"
  }
}
2018-11-28 15:52:49.172 +03:00 [INF] Showing login: User is not active
2018-11-28 15:52:49.188 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:49.188 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:49.188 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:49.188 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:49.538 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:49.538 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:49.539 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:49.539 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:49.557 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:49.557 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:49.557 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-11-28 15:52:49.557 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-11-28 15:52:49.557 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-11-28 15:52:49.557 +03:00 [DBG] Start authorize callback request
2018-11-28 15:52:49.557 +03:00 [DBG] User in authorize request: test@test.com
2018-11-28 15:52:49.558 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:49.558 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:49.558 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "test@test.com",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
  "Nonce": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
  "SessionId": "43d3846e2a42d57feb8d046b89732d8a",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL"
  }
}
2018-11-28 15:52:49.559 +03:00 [INF] Showing login: User is not active
2018-11-28 15:52:49.580 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:49.580 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:49.581 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:49.581 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:49.914 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:49.914 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:49.915 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:49.916 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:49.936 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:49.936 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:49.936 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-11-28 15:52:49.936 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-11-28 15:52:49.936 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-11-28 15:52:49.936 +03:00 [DBG] Start authorize callback request
2018-11-28 15:52:49.937 +03:00 [DBG] User in authorize request: test@test.com
2018-11-28 15:52:49.937 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:49.937 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:49.937 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "test@test.com",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
  "Nonce": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
  "SessionId": "43d3846e2a42d57feb8d046b89732d8a",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL"
  }
}
2018-11-28 15:52:49.938 +03:00 [INF] Showing login: User is not active
2018-11-28 15:52:49.954 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:49.954 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:49.955 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:49.955 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:50.239 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:50.239 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:50.240 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:50.240 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:50.250 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:50.251 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:50.251 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-11-28 15:52:50.251 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-11-28 15:52:50.251 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-11-28 15:52:50.251 +03:00 [DBG] Start authorize callback request
2018-11-28 15:52:50.251 +03:00 [DBG] User in authorize request: test@test.com
2018-11-28 15:52:50.251 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:50.252 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:50.252 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "test@test.com",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
  "Nonce": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
  "SessionId": "43d3846e2a42d57feb8d046b89732d8a",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL"
  }
}
2018-11-28 15:52:50.253 +03:00 [INF] Showing login: User is not active
2018-11-28 15:52:50.269 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:50.269 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:50.269 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:50.270 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:51.012 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:51.012 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:51.013 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:51.013 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:51.022 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:51.022 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:51.022 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-11-28 15:52:51.022 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-11-28 15:52:51.022 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-11-28 15:52:51.022 +03:00 [DBG] Start authorize callback request
2018-11-28 15:52:51.023 +03:00 [DBG] User in authorize request: test@test.com
2018-11-28 15:52:51.023 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:51.023 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:51.023 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "test@test.com",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
  "Nonce": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
  "SessionId": "43d3846e2a42d57feb8d046b89732d8a",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL"
  }
}
2018-11-28 15:52:51.024 +03:00 [INF] Showing login: User is not active
2018-11-28 15:52:51.052 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:51.052 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:51.053 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:51.053 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:51.430 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:51.430 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:51.431 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:51.431 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:51.452 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:51.453 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:51.453 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-11-28 15:52:51.453 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-11-28 15:52:51.453 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-11-28 15:52:51.453 +03:00 [DBG] Start authorize callback request
2018-11-28 15:52:51.453 +03:00 [DBG] User in authorize request: test@test.com
2018-11-28 15:52:51.453 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:51.453 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:51.454 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "test@test.com",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
  "Nonce": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
  "SessionId": "43d3846e2a42d57feb8d046b89732d8a",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL"
  }
}
2018-11-28 15:52:51.455 +03:00 [INF] Showing login: User is not active
2018-11-28 15:52:51.501 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:51.501 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:51.502 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:51.502 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:51.913 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:51.913 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:51.914 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:51.914 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:51.922 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:51.923 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:51.923 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-11-28 15:52:51.923 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-11-28 15:52:51.923 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-11-28 15:52:51.923 +03:00 [DBG] Start authorize callback request
2018-11-28 15:52:51.923 +03:00 [DBG] User in authorize request: test@test.com
2018-11-28 15:52:51.923 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:51.923 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:51.923 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "test@test.com",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
  "Nonce": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
  "SessionId": "43d3846e2a42d57feb8d046b89732d8a",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL"
  }
}
2018-11-28 15:52:51.924 +03:00 [INF] Showing login: User is not active
2018-11-28 15:52:51.957 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:51.957 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:51.958 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:51.958 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:52.230 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:52.231 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:52.231 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:52.231 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:52.239 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:52.239 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:52.239 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-11-28 15:52:52.239 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-11-28 15:52:52.239 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-11-28 15:52:52.239 +03:00 [DBG] Start authorize callback request
2018-11-28 15:52:52.239 +03:00 [DBG] User in authorize request: test@test.com
2018-11-28 15:52:52.240 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:52.240 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:52.240 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "test@test.com",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
  "Nonce": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
  "SessionId": "43d3846e2a42d57feb8d046b89732d8a",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL"
  }
}
2018-11-28 15:52:52.241 +03:00 [INF] Showing login: User is not active
2018-11-28 15:52:52.255 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:52.255 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:52.255 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:52.255 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:52.573 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:52.573 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:52.573 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:52.574 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:52.584 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:52.584 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:52.584 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-11-28 15:52:52.584 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-11-28 15:52:52.584 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-11-28 15:52:52.584 +03:00 [DBG] Start authorize callback request
2018-11-28 15:52:52.585 +03:00 [DBG] User in authorize request: test@test.com
2018-11-28 15:52:52.585 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:52.585 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:52.585 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "test@test.com",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
  "Nonce": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
  "SessionId": "43d3846e2a42d57feb8d046b89732d8a",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL"
  }
}
2018-11-28 15:52:52.586 +03:00 [INF] Showing login: User is not active
2018-11-28 15:52:52.599 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:52.599 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:52.599 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:52.600 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:52.938 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:52.939 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:52.939 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:52.939 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:52.952 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:52.952 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:52.952 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-11-28 15:52:52.952 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-11-28 15:52:52.952 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-11-28 15:52:52.952 +03:00 [DBG] Start authorize callback request
2018-11-28 15:52:52.952 +03:00 [DBG] User in authorize request: test@test.com
2018-11-28 15:52:52.952 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:52.953 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:52:52.953 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "test@test.com",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
  "Nonce": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
  "SessionId": "43d3846e2a42d57feb8d046b89732d8a",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "mcBFloE4mUXe9iWExEahA9bQrY9fV5lzO43ltUvL"
  }
}
2018-11-28 15:52:52.954 +03:00 [INF] Showing login: User is not active
2018-11-28 15:52:52.969 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:52.969 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:52:52.969 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:52:52.969 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:53:21.840 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:53:21.840 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:53:23.808 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:53:23.809 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:53:23.849 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:53:25.786 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:53:25.787 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:53:27.059 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:53:27.059 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 15:53:27.060 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-11-28 15:53:27.061 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-11-28 15:53:27.061 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-11-28 15:53:27.061 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "test@test.com",
  "DisplayName": "test@test.com",
  "ActivityId": "0HLIL5VCDR6LT:0000003C",
  "TimeStamp": "2018-11-28T12:53:27Z",
  "ProcessId": 15312,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-11-28 15:53:28.038 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 15:53:50.467 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 15:53:50.467 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 15:53:50.467 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 15:53:50.467 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 15:53:50.467 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 15:53:50.468 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 15:53:50.468 +03:00 [DBG] Start discovery request
2018-11-28 15:53:50.532 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 15:53:50.532 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 15:53:50.532 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 15:53:50.533 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 15:53:50.533 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 15:53:50.533 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 15:53:50.533 +03:00 [DBG] Start key discovery request
2018-11-28 15:53:52.233 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 15:53:52.233 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 15:53:52.233 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 15:53:52.233 +03:00 [DBG] Start authorize request
2018-11-28 15:53:52.233 +03:00 [DBG] No user present in authorize request
2018-11-28 15:53:52.233 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:53:52.233 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:53:52.233 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "JaF2GWa8wS4BPXB0XMey2uhNfxDJCDydwOFyCQZO",
  "Nonce": "JaF2GWa8wS4BPXB0XMey2uhNfxDJCDydwOFyCQZO",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "JaF2GWa8wS4BPXB0XMey2uhNfxDJCDydwOFyCQZO",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "JaF2GWa8wS4BPXB0XMey2uhNfxDJCDydwOFyCQZO"
  }
}
2018-11-28 15:53:52.233 +03:00 [INF] Showing login: User is not authenticated
2018-11-28 15:53:52.246 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:53:52.246 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:59:39.039 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 15:59:39.039 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 15:59:39.039 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 15:59:39.039 +03:00 [DBG] Start authorize request
2018-11-28 15:59:39.039 +03:00 [DBG] No user present in authorize request
2018-11-28 15:59:39.039 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:59:39.039 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 15:59:39.039 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "6ZJvzWkx6uqPdZGkLjrulcYCudSLSLIBIubN7p1J",
  "Nonce": "6ZJvzWkx6uqPdZGkLjrulcYCudSLSLIBIubN7p1J",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "6ZJvzWkx6uqPdZGkLjrulcYCudSLSLIBIubN7p1J",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "6ZJvzWkx6uqPdZGkLjrulcYCudSLSLIBIubN7p1J"
  }
}
2018-11-28 15:59:39.040 +03:00 [INF] Showing login: User is not authenticated
2018-11-28 15:59:39.069 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 15:59:39.070 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 16:09:46.871 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 16:09:51.511 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 16:09:52.611 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 16:10:04.449 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 16:12:09.311 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 16:12:09.348 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 16:12:09.350 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 16:12:09.350 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 16:12:09.351 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 16:12:09.351 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 16:12:19.314 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 16:12:19.325 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 16:12:19.326 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 16:12:19.345 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 16:12:19.513 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 16:12:19.516 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 16:12:19.520 +03:00 [DBG] Start discovery request
2018-11-28 16:12:19.645 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 16:12:19.646 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 16:12:19.647 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 16:12:19.648 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 16:12:19.656 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 16:12:19.656 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 16:12:19.659 +03:00 [DBG] Start key discovery request
2018-11-28 16:12:20.381 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 16:12:20.385 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 16:12:20.385 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 16:12:20.389 +03:00 [DBG] Start authorize request
2018-11-28 16:12:20.421 +03:00 [DBG] No user present in authorize request
2018-11-28 16:12:20.425 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 16:12:20.474 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 16:12:20.490 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "gvhnyCG0U4u4fZ9BfPAY2WYrH9XyBPLwcpqcTgj4",
  "Nonce": "gvhnyCG0U4u4fZ9BfPAY2WYrH9XyBPLwcpqcTgj4",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "gvhnyCG0U4u4fZ9BfPAY2WYrH9XyBPLwcpqcTgj4",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "gvhnyCG0U4u4fZ9BfPAY2WYrH9XyBPLwcpqcTgj4"
  }
}
2018-11-28 16:12:20.496 +03:00 [INF] Showing login: User is not authenticated
2018-11-28 16:12:20.663 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 16:12:20.665 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 16:13:07.910 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 16:13:07.951 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 16:13:07.954 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 16:13:07.954 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 16:13:07.954 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 16:13:07.954 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 16:13:20.087 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 16:13:20.241 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 16:13:20.242 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 16:13:20.245 +03:00 [DBG] Start authorize request
2018-11-28 16:13:20.262 +03:00 [DBG] No user present in authorize request
2018-11-28 16:13:20.268 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 16:13:20.319 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 16:13:20.390 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "FoCOjGSNzM8tHJGcI9cDC8FBUFSMXODTrvCForQH",
  "Nonce": "FoCOjGSNzM8tHJGcI9cDC8FBUFSMXODTrvCForQH",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "FoCOjGSNzM8tHJGcI9cDC8FBUFSMXODTrvCForQH",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "FoCOjGSNzM8tHJGcI9cDC8FBUFSMXODTrvCForQH"
  }
}
2018-11-28 16:13:20.396 +03:00 [INF] Showing login: User is not authenticated
2018-11-28 16:13:20.567 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 16:13:20.568 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 16:15:39.941 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 16:15:41.205 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 16:15:54.011 +03:00 [DBG] Augmenting SignInContext
2018-11-28 16:15:54.013 +03:00 [DBG] Adding idp claim with value: local
2018-11-28 16:15:54.013 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-28 16:15:54.014 +03:00 [DBG] Adding auth_time claim with value: 1543410954
2018-11-28 16:15:54.044 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 16:15:54.072 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:15:54.073 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:17:19.488 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 16:17:19.526 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 16:17:19.529 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 16:17:19.530 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 16:17:19.530 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 16:17:19.530 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 16:17:21.288 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:17:21.307 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:17:32.633 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:17:32.633 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:17:34.803 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:17:34.803 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:17:35.990 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:17:35.990 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:17:36.241 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-11-28 16:17:36.245 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-11-28 16:17:36.245 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-11-28 16:17:36.325 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "test@test.com",
  "DisplayName": "test@test.com",
  "ActivityId": "0HLIL6F9MM32J:00000004",
  "TimeStamp": "2018-11-28T13:17:36Z",
  "ProcessId": 3359,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-11-28 16:19:21.376 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 16:19:22.490 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 16:19:23.468 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 16:19:23.904 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 16:19:24.817 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 16:19:25.200 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 16:19:26.074 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 16:19:27.521 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 16:19:31.638 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 16:19:40.353 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 16:19:40.356 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 16:19:40.357 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 16:19:40.358 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 16:19:40.362 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 16:19:40.362 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 16:19:40.369 +03:00 [DBG] Start discovery request
2018-11-28 16:19:40.472 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 16:19:40.473 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 16:19:40.473 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 16:19:40.473 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 16:19:40.474 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 16:19:40.474 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 16:19:40.477 +03:00 [DBG] Start key discovery request
2018-11-28 16:19:41.945 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 16:19:41.950 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 16:19:41.950 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 16:19:41.956 +03:00 [DBG] Start authorize request
2018-11-28 16:19:41.968 +03:00 [DBG] No user present in authorize request
2018-11-28 16:19:41.972 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 16:19:42.023 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 16:19:42.033 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "Q8AUGnAWlPguU49O3OHwx3a84DT6BFHUED5YmR6B",
  "Nonce": "Q8AUGnAWlPguU49O3OHwx3a84DT6BFHUED5YmR6B",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "Q8AUGnAWlPguU49O3OHwx3a84DT6BFHUED5YmR6B",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "Q8AUGnAWlPguU49O3OHwx3a84DT6BFHUED5YmR6B"
  }
}
2018-11-28 16:19:42.039 +03:00 [INF] Showing login: User is not authenticated
2018-11-28 16:19:42.065 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 16:19:42.066 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 16:21:17.026 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 16:21:17.062 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 16:21:17.065 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 16:21:17.065 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 16:21:17.065 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 16:21:17.066 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 16:21:44.442 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 16:21:44.472 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 16:21:44.474 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 16:21:44.495 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 16:21:44.637 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 16:21:44.637 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 16:21:44.640 +03:00 [DBG] Start discovery request
2018-11-28 16:21:44.744 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 16:21:44.745 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 16:21:44.745 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 16:21:44.745 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 16:21:44.746 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 16:21:44.746 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 16:21:44.750 +03:00 [DBG] Start key discovery request
2018-11-28 16:21:45.913 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 16:21:45.916 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 16:21:45.917 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 16:21:45.920 +03:00 [DBG] Start authorize request
2018-11-28 16:21:45.949 +03:00 [DBG] No user present in authorize request
2018-11-28 16:21:45.957 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 16:21:46.042 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 16:21:46.066 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "uEjG4WYjeE7pSoQUQmDrIeWe3fsuAspvzjVDpX9O",
  "Nonce": "uEjG4WYjeE7pSoQUQmDrIeWe3fsuAspvzjVDpX9O",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "uEjG4WYjeE7pSoQUQmDrIeWe3fsuAspvzjVDpX9O",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "uEjG4WYjeE7pSoQUQmDrIeWe3fsuAspvzjVDpX9O"
  }
}
2018-11-28 16:21:46.074 +03:00 [INF] Showing login: User is not authenticated
2018-11-28 16:21:46.309 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 16:21:46.311 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 16:22:25.381 +03:00 [DBG] Augmenting SignInContext
2018-11-28 16:22:25.390 +03:00 [DBG] Adding idp claim with value: local
2018-11-28 16:22:25.391 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-28 16:22:25.392 +03:00 [DBG] Adding auth_time claim with value: 1543411345
2018-11-28 16:22:25.427 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 16:22:25.457 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:22:25.458 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:22:29.058 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:22:29.059 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:22:29.059 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 16:22:29.059 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 16:22:32.668 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 16:22:32.668 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 16:22:32.668 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 16:22:32.668 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 16:22:32.679 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 16:22:32.679 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 16:22:32.679 +03:00 [DBG] Start discovery request
2018-11-28 16:22:32.895 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 16:22:32.896 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 16:22:32.896 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 16:22:32.896 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 16:22:32.896 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 16:22:32.896 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 16:22:32.896 +03:00 [DBG] Start key discovery request
2018-11-28 16:22:44.983 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:22:44.983 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:22:44.983 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 16:22:44.984 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 16:22:44.984 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 16:22:44.984 +03:00 [DBG] Start authorize request
2018-11-28 16:22:44.984 +03:00 [DBG] User in authorize request: test@test.com
2018-11-28 16:22:44.984 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 16:22:44.984 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 16:22:44.984 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "test@test.com",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "WYSW2bKuhSKHAQNeDnFVp0BkmHB6AzTYRZAdXeEd",
  "Nonce": "WYSW2bKuhSKHAQNeDnFVp0BkmHB6AzTYRZAdXeEd",
  "SessionId": "4e919803cac0e2a373e3846f865a718e",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "WYSW2bKuhSKHAQNeDnFVp0BkmHB6AzTYRZAdXeEd",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "WYSW2bKuhSKHAQNeDnFVp0BkmHB6AzTYRZAdXeEd"
  }
}
2018-11-28 16:22:45.029 +03:00 [INF] Showing login: User is not active
2018-11-28 16:22:45.063 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:22:45.063 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:22:45.064 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 16:22:45.064 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 16:26:16.139 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:26:16.139 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:26:16.184 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:26:17.515 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:26:17.515 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:26:18.421 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:26:18.421 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:26:19.238 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:26:19.238 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:26:30.715 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:26:30.715 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:26:30.716 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:26:31.777 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:26:31.777 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:26:33.293 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:26:33.294 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:26:34.856 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:26:34.856 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:26:34.884 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-11-28 16:26:34.885 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-11-28 16:26:34.885 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-11-28 16:26:34.914 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "test@test.com",
  "DisplayName": "test@test.com",
  "ActivityId": "0HLIL6HGFP0EO:00000008",
  "TimeStamp": "2018-11-28T13:26:34Z",
  "ProcessId": 6459,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-11-28 16:26:35.987 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 16:26:37.260 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 16:26:38.598 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 16:26:39.118 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 16:26:39.987 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 16:26:59.569 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 16:27:00.030 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 16:33:12.200 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 16:33:12.860 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 16:33:13.749 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 16:33:16.610 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 16:33:25.956 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 16:33:25.956 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 16:33:25.956 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 16:33:25.956 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 16:33:25.956 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 16:33:25.956 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 16:33:25.956 +03:00 [DBG] Start discovery request
2018-11-28 16:33:26.051 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 16:33:26.051 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 16:33:26.051 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 16:33:26.051 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 16:33:26.051 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 16:33:26.051 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 16:33:26.051 +03:00 [DBG] Start key discovery request
2018-11-28 16:33:27.379 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 16:33:27.379 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 16:33:27.379 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 16:33:27.379 +03:00 [DBG] Start authorize request
2018-11-28 16:33:27.379 +03:00 [DBG] No user present in authorize request
2018-11-28 16:33:27.379 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 16:33:27.380 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 16:33:27.380 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "khoJkqhtLd13wa7WHO9VYWq6qcO5mTYQsDeEIj43",
  "Nonce": "khoJkqhtLd13wa7WHO9VYWq6qcO5mTYQsDeEIj43",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "khoJkqhtLd13wa7WHO9VYWq6qcO5mTYQsDeEIj43",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "khoJkqhtLd13wa7WHO9VYWq6qcO5mTYQsDeEIj43"
  }
}
2018-11-28 16:33:27.380 +03:00 [INF] Showing login: User is not authenticated
2018-11-28 16:33:27.390 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 16:33:27.390 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 16:38:11.501 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 16:38:11.539 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 16:38:11.542 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 16:38:11.543 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 16:38:11.543 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 16:38:11.543 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 16:38:22.378 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 16:38:22.398 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 16:38:22.402 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 16:38:22.404 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 16:38:22.567 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 16:38:22.568 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 16:38:22.571 +03:00 [DBG] Start discovery request
2018-11-28 16:38:22.712 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 16:38:22.713 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 16:38:22.713 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 16:38:22.713 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 16:38:22.716 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 16:38:22.716 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 16:38:22.719 +03:00 [DBG] Start key discovery request
2018-11-28 16:38:23.313 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 16:38:23.316 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 16:38:23.316 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 16:38:23.321 +03:00 [DBG] Start authorize request
2018-11-28 16:38:23.339 +03:00 [DBG] No user present in authorize request
2018-11-28 16:38:23.343 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 16:38:23.389 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 16:38:23.402 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "fxjLycLljILqjvTgomnln7UlHNNaqiU2qao4ZAbD",
  "Nonce": "fxjLycLljILqjvTgomnln7UlHNNaqiU2qao4ZAbD",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "fxjLycLljILqjvTgomnln7UlHNNaqiU2qao4ZAbD",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "fxjLycLljILqjvTgomnln7UlHNNaqiU2qao4ZAbD"
  }
}
2018-11-28 16:38:23.408 +03:00 [INF] Showing login: User is not authenticated
2018-11-28 16:38:23.562 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 16:38:23.566 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 16:38:42.283 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 16:38:42.283 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 16:38:42.283 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 16:38:42.283 +03:00 [DBG] Start authorize request
2018-11-28 16:38:42.283 +03:00 [DBG] No user present in authorize request
2018-11-28 16:38:42.283 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 16:38:42.283 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 16:38:42.284 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "i1oGVViKS0TlxabgFxHIFWHUNwWDe0CH3r5l5Des",
  "Nonce": "i1oGVViKS0TlxabgFxHIFWHUNwWDe0CH3r5l5Des",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "i1oGVViKS0TlxabgFxHIFWHUNwWDe0CH3r5l5Des",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "i1oGVViKS0TlxabgFxHIFWHUNwWDe0CH3r5l5Des"
  }
}
2018-11-28 16:38:42.284 +03:00 [INF] Showing login: User is not authenticated
2018-11-28 16:38:42.316 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 16:38:42.317 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 16:41:45.459 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 16:41:45.497 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 16:41:45.499 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 16:41:45.500 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 16:41:45.500 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 16:41:45.500 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 16:41:52.898 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 16:41:52.923 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 16:41:52.924 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 16:41:52.933 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 16:41:53.065 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 16:41:53.066 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 16:41:53.068 +03:00 [DBG] Start discovery request
2018-11-28 16:41:53.151 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 16:41:53.151 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 16:41:53.152 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 16:41:53.152 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 16:41:53.153 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 16:41:53.153 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 16:41:53.155 +03:00 [DBG] Start key discovery request
2018-11-28 16:41:54.075 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 16:41:54.078 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 16:41:54.078 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 16:41:54.081 +03:00 [DBG] Start authorize request
2018-11-28 16:41:54.097 +03:00 [DBG] No user present in authorize request
2018-11-28 16:41:54.101 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 16:41:54.149 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 16:41:54.160 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "8NnZbNHictyBjgJrIr7KeFNFreetrRyFOR9eSvxu",
  "Nonce": "8NnZbNHictyBjgJrIr7KeFNFreetrRyFOR9eSvxu",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "8NnZbNHictyBjgJrIr7KeFNFreetrRyFOR9eSvxu",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "8NnZbNHictyBjgJrIr7KeFNFreetrRyFOR9eSvxu"
  }
}
2018-11-28 16:41:54.170 +03:00 [INF] Showing login: User is not authenticated
2018-11-28 16:41:54.314 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 16:41:54.315 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 16:46:08.508 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 16:46:08.509 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 16:46:08.509 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 16:46:08.509 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 16:46:08.509 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 16:46:08.509 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 16:46:08.509 +03:00 [DBG] Start discovery request
2018-11-28 16:46:08.528 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 16:46:08.528 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 16:46:08.528 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 16:46:08.528 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 16:46:08.529 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 16:46:08.529 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 16:46:08.529 +03:00 [DBG] Start key discovery request
2018-11-28 16:46:09.375 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 16:46:09.376 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 16:46:09.376 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 16:46:09.376 +03:00 [DBG] Start authorize request
2018-11-28 16:46:09.376 +03:00 [DBG] No user present in authorize request
2018-11-28 16:46:09.376 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 16:46:09.376 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 16:46:09.376 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "FXLtBonyeujLtBUA2PR4z2p0YVHreMT65I9UpHHC",
  "Nonce": "FXLtBonyeujLtBUA2PR4z2p0YVHreMT65I9UpHHC",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "FXLtBonyeujLtBUA2PR4z2p0YVHreMT65I9UpHHC",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "FXLtBonyeujLtBUA2PR4z2p0YVHreMT65I9UpHHC"
  }
}
2018-11-28 16:46:09.376 +03:00 [INF] Showing login: User is not authenticated
2018-11-28 16:46:09.393 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 16:46:09.393 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 16:46:11.689 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 16:46:12.447 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 16:46:12.964 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 16:46:21.536 +03:00 [DBG] Augmenting SignInContext
2018-11-28 16:46:21.538 +03:00 [DBG] Adding idp claim with value: local
2018-11-28 16:46:21.538 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-28 16:46:21.538 +03:00 [DBG] Adding auth_time claim with value: 1543412781
2018-11-28 16:46:21.565 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 16:46:21.589 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:46:21.590 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:46:26.631 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 16:46:26.632 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 16:46:26.632 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 16:46:26.632 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 16:46:26.632 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 16:46:26.632 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 16:46:26.632 +03:00 [DBG] Start discovery request
2018-11-28 16:46:26.687 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 16:46:26.687 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 16:46:26.687 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 16:46:26.687 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 16:46:26.687 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 16:46:26.687 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 16:46:26.687 +03:00 [DBG] Start key discovery request
2018-11-28 16:46:31.702 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:46:31.702 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:46:31.702 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 16:46:31.702 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 16:46:31.702 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 16:46:31.702 +03:00 [DBG] Start authorize request
2018-11-28 16:46:31.702 +03:00 [DBG] User in authorize request: test@test.com
2018-11-28 16:46:31.702 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 16:46:31.702 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 16:46:31.702 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "test@test.com",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "FellRKb1PEMvRbbFlRqbw3clmc11no9PrHBrnYak",
  "Nonce": "FellRKb1PEMvRbbFlRqbw3clmc11no9PrHBrnYak",
  "SessionId": "260a282d7469bedb2d48fa03dcfa7ab0",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "FellRKb1PEMvRbbFlRqbw3clmc11no9PrHBrnYak",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "FellRKb1PEMvRbbFlRqbw3clmc11no9PrHBrnYak"
  }
}
2018-11-28 16:46:31.757 +03:00 [INF] Showing login: User is not active
2018-11-28 16:46:31.776 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:46:31.776 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:46:31.776 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 16:46:31.777 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 16:46:33.052 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:46:33.052 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:46:33.058 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:46:33.861 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:46:33.861 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:46:34.424 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:46:34.424 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:46:34.945 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:46:34.946 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:46:35.315 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:46:35.316 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:46:35.316 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:46:36.139 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:46:36.139 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:46:36.528 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:46:36.528 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:46:36.922 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:46:36.922 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:46:36.922 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:46:37.495 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:46:37.495 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:46:38.622 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:46:38.622 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:46:38.622 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:47:04.033 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:47:04.033 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:47:04.967 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:47:04.968 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:47:15.154 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 16:47:15.154 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 16:47:15.154 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 16:47:15.154 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 16:47:15.154 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 16:47:15.154 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 16:47:15.154 +03:00 [DBG] Start discovery request
2018-11-28 16:47:15.200 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 16:47:15.201 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 16:47:15.201 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 16:47:15.201 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 16:47:15.201 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 16:47:15.201 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 16:47:15.201 +03:00 [DBG] Start key discovery request
2018-11-28 16:53:33.232 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 16:53:33.268 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 16:53:33.270 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 16:53:33.271 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 16:53:33.271 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 16:53:33.271 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 16:53:43.682 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 16:53:46.936 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 16:53:48.030 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 16:53:49.204 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 16:53:49.742 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 16:53:50.810 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 16:53:51.278 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 16:53:52.112 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 16:53:52.603 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 16:54:13.090 +03:00 [DBG] Augmenting SignInContext
2018-11-28 16:54:13.092 +03:00 [DBG] Adding idp claim with value: local
2018-11-28 16:54:13.092 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-28 16:54:13.092 +03:00 [DBG] Adding auth_time claim with value: 1543413253
2018-11-28 16:54:13.125 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 16:54:13.167 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:54:13.167 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:54:17.950 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:54:17.950 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:54:21.847 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:54:21.847 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:54:21.851 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:54:22.812 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:54:22.812 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:54:24.669 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:54:24.669 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:54:24.669 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:54:26.022 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:54:26.023 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:54:27.147 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:54:27.147 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:54:28.513 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:54:28.513 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:54:29.093 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:54:29.093 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:54:29.093 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:54:29.541 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:54:29.542 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:54:29.921 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:54:29.921 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:54:30.530 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:54:30.530 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:54:47.647 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:54:47.648 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:54:49.355 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:54:49.355 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:54:49.395 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-11-28 16:54:49.396 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-11-28 16:54:49.396 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-11-28 16:54:49.462 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "test@test.com",
  "DisplayName": "test@test.com",
  "ActivityId": "0HLIL73HGRS1E:00000028",
  "TimeStamp": "2018-11-28T13:54:49Z",
  "ProcessId": 29117,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-11-28 16:54:52.792 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 16:54:52.796 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 16:54:52.797 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 16:54:52.798 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 16:54:52.801 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 16:54:52.802 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 16:54:52.805 +03:00 [DBG] Start discovery request
2018-11-28 16:54:52.883 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 16:54:52.884 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 16:54:52.884 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 16:54:52.884 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 16:54:52.884 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 16:54:52.884 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 16:54:52.887 +03:00 [DBG] Start key discovery request
2018-11-28 16:54:54.525 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 16:54:54.528 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 16:54:54.528 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 16:54:54.531 +03:00 [DBG] Start authorize request
2018-11-28 16:54:54.538 +03:00 [DBG] No user present in authorize request
2018-11-28 16:54:54.543 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 16:54:54.582 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 16:54:54.592 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "dvUfJNZakkvO1EVHJPNVqengMd4oCxwauS1NFIH1",
  "Nonce": "dvUfJNZakkvO1EVHJPNVqengMd4oCxwauS1NFIH1",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "dvUfJNZakkvO1EVHJPNVqengMd4oCxwauS1NFIH1",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "dvUfJNZakkvO1EVHJPNVqengMd4oCxwauS1NFIH1"
  }
}
2018-11-28 16:54:54.598 +03:00 [INF] Showing login: User is not authenticated
2018-11-28 16:54:54.617 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 16:54:54.617 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 16:55:08.485 +03:00 [DBG] Augmenting SignInContext
2018-11-28 16:55:08.485 +03:00 [DBG] Adding idp claim with value: local
2018-11-28 16:55:08.485 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-28 16:55:08.485 +03:00 [DBG] Adding auth_time claim with value: 1543413308
2018-11-28 16:55:08.485 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 16:55:08.511 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:55:08.511 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:55:14.254 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 16:55:14.254 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 16:55:14.254 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 16:55:14.254 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 16:55:14.255 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 16:55:14.255 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 16:55:14.255 +03:00 [DBG] Start discovery request
2018-11-28 16:55:14.298 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 16:55:14.298 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 16:55:14.298 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 16:55:14.298 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 16:55:14.299 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 16:55:14.299 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 16:55:14.299 +03:00 [DBG] Start key discovery request
2018-11-28 16:55:22.184 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 16:55:22.184 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 16:55:22.184 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 16:55:22.184 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 16:55:22.185 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 16:55:22.185 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 16:55:22.185 +03:00 [DBG] Start discovery request
2018-11-28 16:55:22.241 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 16:55:22.242 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 16:55:22.242 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 16:55:22.242 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 16:55:22.242 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 16:55:22.242 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 16:55:22.242 +03:00 [DBG] Start key discovery request
2018-11-28 16:55:23.937 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:55:23.937 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:55:23.937 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 16:55:23.937 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 16:55:23.937 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 16:55:23.937 +03:00 [DBG] Start authorize request
2018-11-28 16:55:23.937 +03:00 [DBG] User in authorize request: test@test.com
2018-11-28 16:55:23.937 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 16:55:23.938 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 16:55:23.938 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "test@test.com",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "igxfQyFEeWFoYUuD9Onjk7XErb4BgQza26FDetcd",
  "Nonce": "igxfQyFEeWFoYUuD9Onjk7XErb4BgQza26FDetcd",
  "SessionId": "1ada33330c619538b4f97ef533fb6e59",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "igxfQyFEeWFoYUuD9Onjk7XErb4BgQza26FDetcd",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "igxfQyFEeWFoYUuD9Onjk7XErb4BgQza26FDetcd"
  }
}
2018-11-28 16:55:24.000 +03:00 [INF] Showing login: User is not active
2018-11-28 16:55:24.012 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:55:24.012 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:55:24.012 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 16:55:24.012 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 16:57:01.584 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 16:57:01.621 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 16:57:01.624 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 16:57:01.625 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 16:57:01.625 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 16:57:01.625 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 16:57:03.421 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:57:03.439 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:57:09.840 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:57:09.842 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:57:12.630 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:57:12.630 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:57:13.675 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:57:13.675 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:57:13.858 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-11-28 16:57:13.862 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-11-28 16:57:13.862 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-11-28 16:57:13.933 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "test@test.com",
  "DisplayName": "test@test.com",
  "ActivityId": "0HLIL75FK354I:00000004",
  "TimeStamp": "2018-11-28T13:57:13Z",
  "ProcessId": 31526,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-11-28 16:57:31.142 +03:00 [DBG] Augmenting SignInContext
2018-11-28 16:57:31.147 +03:00 [DBG] Adding idp claim with value: local
2018-11-28 16:57:31.152 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-28 16:57:31.154 +03:00 [DBG] Adding auth_time claim with value: 1543413451
2018-11-28 16:57:31.181 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 16:57:31.199 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:57:31.200 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:59:05.630 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 16:59:05.668 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 16:59:05.671 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 16:59:05.672 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 16:59:05.672 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 16:59:05.672 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 16:59:07.515 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:59:07.536 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:59:14.524 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:59:14.524 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:59:15.699 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:59:15.699 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 16:59:15.931 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-11-28 16:59:15.939 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-11-28 16:59:15.940 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-11-28 16:59:16.039 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "test@test.com",
  "DisplayName": "test@test.com",
  "ActivityId": "0HLIL76KKDNI5:00000003",
  "TimeStamp": "2018-11-28T13:59:15Z",
  "ProcessId": 580,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-11-28 16:59:34.904 +03:00 [DBG] Augmenting SignInContext
2018-11-28 16:59:34.906 +03:00 [DBG] Adding idp claim with value: local
2018-11-28 16:59:34.906 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-28 16:59:34.906 +03:00 [DBG] Adding auth_time claim with value: 1543413574
2018-11-28 16:59:34.927 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 16:59:34.929 +03:00 [ERR] An unhandled exception has occurred while executing the request
System.ArgumentException: Value cannot be null or empty.
Parameter name: url
   at Microsoft.AspNetCore.Mvc.ControllerBase.Redirect(String url)
   at IdentityServer4.Quickstart.UI.AccountController.LoginCallback(String token, String email, LoginInputModel model) in /home/demmy/Documents/SSO_PASSWORDLESS/Quickstart/Account/AccountController.cs:line 169
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-11-28 16:59:49.108 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 16:59:49.112 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 16:59:49.112 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 16:59:49.114 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 16:59:49.117 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 16:59:49.117 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 16:59:49.120 +03:00 [DBG] Start discovery request
2018-11-28 16:59:49.184 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 16:59:49.184 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 16:59:49.185 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 16:59:49.185 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 16:59:49.185 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 16:59:49.186 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 16:59:49.188 +03:00 [DBG] Start key discovery request
2018-11-28 16:59:50.065 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 16:59:50.068 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 16:59:50.068 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 16:59:50.072 +03:00 [DBG] Start authorize request
2018-11-28 16:59:50.081 +03:00 [DBG] No user present in authorize request
2018-11-28 16:59:50.085 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 16:59:50.135 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 16:59:50.147 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "2qKyPEPklzkVoMyTz1OUsZq9uIMkrAdNqctcpViM",
  "Nonce": "2qKyPEPklzkVoMyTz1OUsZq9uIMkrAdNqctcpViM",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "2qKyPEPklzkVoMyTz1OUsZq9uIMkrAdNqctcpViM",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "2qKyPEPklzkVoMyTz1OUsZq9uIMkrAdNqctcpViM"
  }
}
2018-11-28 16:59:50.153 +03:00 [INF] Showing login: User is not authenticated
2018-11-28 16:59:50.174 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 16:59:50.174 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 17:00:04.993 +03:00 [DBG] Augmenting SignInContext
2018-11-28 17:00:04.993 +03:00 [DBG] Adding idp claim with value: local
2018-11-28 17:00:04.993 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-28 17:00:04.993 +03:00 [DBG] Adding auth_time claim with value: 1543413604
2018-11-28 17:00:04.993 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 17:00:04.994 +03:00 [ERR] An unhandled exception has occurred while executing the request
System.ArgumentException: Value cannot be null or empty.
Parameter name: url
   at Microsoft.AspNetCore.Mvc.ControllerBase.Redirect(String url)
   at IdentityServer4.Quickstart.UI.AccountController.LoginCallback(String token, String email, LoginInputModel model) in /home/demmy/Documents/SSO_PASSWORDLESS/Quickstart/Account/AccountController.cs:line 169
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-11-28 17:01:11.250 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 17:01:11.285 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 17:01:11.288 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 17:01:11.288 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 17:01:11.288 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 17:01:11.289 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 17:01:20.452 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 17:01:25.686 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 17:01:25.693 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 17:01:25.693 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 17:01:25.694 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 17:01:25.700 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 17:01:25.701 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 17:01:25.704 +03:00 [DBG] Start discovery request
2018-11-28 17:01:25.879 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 17:01:25.879 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 17:01:25.879 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 17:01:25.879 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 17:01:25.880 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 17:01:25.880 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 17:01:25.889 +03:00 [DBG] Start key discovery request
2018-11-28 17:01:26.633 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 17:01:26.636 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 17:01:26.636 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 17:01:26.645 +03:00 [DBG] Start authorize request
2018-11-28 17:01:26.663 +03:00 [DBG] No user present in authorize request
2018-11-28 17:01:26.667 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 17:01:26.716 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 17:01:26.726 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "tAkeYrBjg6JY4qlS4hI1LU3DILoOZSphITNidfzr",
  "Nonce": "tAkeYrBjg6JY4qlS4hI1LU3DILoOZSphITNidfzr",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "tAkeYrBjg6JY4qlS4hI1LU3DILoOZSphITNidfzr",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "tAkeYrBjg6JY4qlS4hI1LU3DILoOZSphITNidfzr"
  }
}
2018-11-28 17:01:26.738 +03:00 [INF] Showing login: User is not authenticated
2018-11-28 17:01:26.763 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 17:01:26.764 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 17:01:48.825 +03:00 [DBG] Augmenting SignInContext
2018-11-28 17:01:48.826 +03:00 [DBG] Adding idp claim with value: local
2018-11-28 17:01:48.827 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-28 17:01:48.827 +03:00 [DBG] Adding auth_time claim with value: 1543413708
2018-11-28 17:01:48.859 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 17:01:53.363 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:01:53.364 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:01:53.366 +03:00 [WRN] VerifyUserTokenAsync() failed with purpose: passwordless-auth for user be8c0176-0774-4e54-8bb6-ca58ed88ed6a.
2018-11-28 17:02:04.121 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 17:02:04.121 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 17:02:04.121 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 17:02:04.121 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 17:02:04.122 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 17:02:04.122 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 17:02:04.122 +03:00 [DBG] Start discovery request
2018-11-28 17:02:04.187 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 17:02:04.188 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 17:02:04.188 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 17:02:04.188 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 17:02:04.194 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 17:02:04.194 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 17:02:04.194 +03:00 [DBG] Start key discovery request
2018-11-28 17:03:58.766 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 17:03:58.802 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 17:03:58.805 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 17:03:58.805 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 17:03:58.805 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 17:03:58.805 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 17:04:00.573 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:04:00.591 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:04:06.640 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:04:06.640 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:04:08.187 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:04:08.187 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:04:09.129 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:04:09.129 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:04:09.318 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-11-28 17:04:09.322 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-11-28 17:04:09.322 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-11-28 17:04:09.386 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "test@test.com",
  "DisplayName": "test@test.com",
  "ActivityId": "0HLIL79BU9EAM:00000004",
  "TimeStamp": "2018-11-28T14:04:09Z",
  "ProcessId": 4640,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-11-28 17:04:16.169 +03:00 [ERR] An unhandled exception has occurred while executing the request
System.ArgumentNullException: Value cannot be null.
Parameter name: userName
   at Microsoft.AspNetCore.Identity.UserManager`1.FindByNameAsync(String userName)
   at IdentityServer4.Quickstart.UI.AccountController.LoginCallback(String token, String email, LoginInputModel model) in /home/demmy/Documents/SSO_PASSWORDLESS/Quickstart/Account/AccountController.cs:line 157
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-11-28 17:08:01.757 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 17:08:01.793 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 17:08:01.796 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 17:08:01.796 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 17:08:01.797 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 17:08:01.797 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 17:08:31.806 +03:00 [INF] AuthenticationScheme: Identity.External signed in.
2018-11-28 17:08:37.920 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 17:08:38.813 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 17:08:47.430 +03:00 [WRN] VerifyUserTokenAsync() failed with purpose: passwordless-auth for user 5ce7baad-c9a1-4322-911b-b23b21ed176a.
2018-11-28 17:08:49.945 +03:00 [WRN] VerifyUserTokenAsync() failed with purpose: passwordless-auth for user 5ce7baad-c9a1-4322-911b-b23b21ed176a.
2018-11-28 17:08:50.861 +03:00 [WRN] VerifyUserTokenAsync() failed with purpose: passwordless-auth for user 5ce7baad-c9a1-4322-911b-b23b21ed176a.
2018-11-28 17:11:01.619 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 17:11:01.658 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 17:11:01.661 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 17:11:01.661 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 17:11:01.661 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 17:11:01.661 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 17:11:28.640 +03:00 [DBG] Augmenting SignInContext
2018-11-28 17:11:28.646 +03:00 [DBG] Adding idp claim with value: local
2018-11-28 17:11:28.646 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-28 17:11:28.689 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 17:11:33.054 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:11:33.055 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:11:33.055 +03:00 [DBG] Augmenting SignInContext
2018-11-28 17:11:33.056 +03:00 [DBG] Adding idp claim with value: local
2018-11-28 17:11:33.056 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-28 17:11:33.056 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 17:11:36.549 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:11:36.549 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:11:36.590 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:11:37.660 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:11:37.660 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:11:38.596 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:11:38.596 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:11:38.596 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:17:19.056 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 17:17:19.101 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 17:17:19.107 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 17:17:19.107 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 17:17:19.107 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 17:17:19.108 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 17:17:19.829 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:17:19.846 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:17:26.651 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:17:26.651 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:17:28.074 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:17:28.074 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:17:28.247 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-11-28 17:17:28.252 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-11-28 17:17:28.253 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-11-28 17:17:28.325 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "aa3c84d9-665c-425f-8a9b-5da214564fd0",
  "DisplayName": "ss@ss.com",
  "ActivityId": "0HLIL7GQF93G0:00000001",
  "TimeStamp": "2018-11-28T14:17:28Z",
  "ProcessId": 14357,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-11-28 17:17:31.567 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 17:17:31.572 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 17:17:31.572 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 17:17:31.574 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 17:17:31.577 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 17:17:31.578 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 17:17:31.582 +03:00 [DBG] Start discovery request
2018-11-28 17:17:31.648 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 17:17:31.650 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 17:17:31.650 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 17:17:31.651 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 17:17:31.655 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 17:17:31.655 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 17:17:31.658 +03:00 [DBG] Start key discovery request
2018-11-28 17:17:32.654 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 17:17:32.656 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 17:17:32.656 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 17:17:32.660 +03:00 [DBG] Start authorize request
2018-11-28 17:17:32.668 +03:00 [DBG] No user present in authorize request
2018-11-28 17:17:32.673 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 17:17:32.723 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 17:17:32.733 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "Ffl4btM2hqCvcuGRIVQXjRFE7XtLDRZ33g5na9iI",
  "Nonce": "Ffl4btM2hqCvcuGRIVQXjRFE7XtLDRZ33g5na9iI",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "Ffl4btM2hqCvcuGRIVQXjRFE7XtLDRZ33g5na9iI",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "Ffl4btM2hqCvcuGRIVQXjRFE7XtLDRZ33g5na9iI"
  }
}
2018-11-28 17:17:32.739 +03:00 [INF] Showing login: User is not authenticated
2018-11-28 17:17:32.786 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 17:17:32.786 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 17:17:48.011 +03:00 [DBG] Augmenting SignInContext
2018-11-28 17:17:48.013 +03:00 [DBG] Adding idp claim with value: local
2018-11-28 17:17:48.013 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-28 17:17:48.014 +03:00 [DBG] Adding auth_time claim with value: 1543414668
2018-11-28 17:17:48.040 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 17:17:52.246 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:17:52.247 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:17:52.280 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:17:54.656 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:17:54.656 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:17:55.304 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:17:55.304 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:17:58.459 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 17:17:58.459 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 17:17:58.459 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 17:17:58.459 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 17:17:58.463 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 17:17:58.463 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 17:17:58.463 +03:00 [DBG] Start discovery request
2018-11-28 17:17:58.504 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 17:17:58.504 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 17:17:58.504 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 17:17:58.504 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 17:17:58.505 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 17:17:58.505 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 17:17:58.505 +03:00 [DBG] Start key discovery request
2018-11-28 17:19:44.145 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 17:19:44.180 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 17:19:44.183 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 17:19:44.183 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 17:19:44.183 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 17:19:44.183 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 17:19:45.976 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:19:46.011 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:19:49.992 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:19:50.005 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:19:50.019 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 17:19:50.039 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 17:19:50.039 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 17:19:50.043 +03:00 [DBG] Start authorize request
2018-11-28 17:19:50.088 +03:00 [DBG] User in authorize request: test@test.com
2018-11-28 17:19:50.092 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 17:19:50.159 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 17:19:50.259 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "test@test.com",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "F3I0OCWOQzS98p9gBV5cM7VTQRlR6fckA327bfV3",
  "Nonce": "F3I0OCWOQzS98p9gBV5cM7VTQRlR6fckA327bfV3",
  "SessionId": "2545cac502395985c4845474929f63df",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "F3I0OCWOQzS98p9gBV5cM7VTQRlR6fckA327bfV3",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "F3I0OCWOQzS98p9gBV5cM7VTQRlR6fckA327bfV3"
  }
}
2018-11-28 17:19:51.031 +03:00 [INF] Showing login: User is not active
2018-11-28 17:19:51.104 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:19:51.105 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:19:51.267 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 17:19:51.268 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 17:19:54.980 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:19:54.980 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:19:55.130 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 17:19:55.130 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 17:20:02.566 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:20:02.566 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:20:02.613 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:20:02.613 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:20:05.657 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:20:05.657 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:20:07.151 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:20:07.151 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:20:07.187 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-11-28 17:20:07.188 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-11-28 17:20:07.188 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-11-28 17:20:07.221 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "test@test.com",
  "DisplayName": "test@test.com",
  "ActivityId": "0HLIL7I5M7OOI:00000007",
  "TimeStamp": "2018-11-28T14:20:07Z",
  "ProcessId": 15993,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-11-28 17:20:15.231 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 17:20:15.235 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 17:20:15.235 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 17:20:15.236 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 17:20:15.238 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 17:20:15.247 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 17:20:15.251 +03:00 [DBG] Start discovery request
2018-11-28 17:20:15.312 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 17:20:15.313 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 17:20:15.313 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 17:20:15.313 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 17:20:15.315 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 17:20:15.317 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 17:20:15.320 +03:00 [DBG] Start key discovery request
2018-11-28 17:20:16.796 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 17:20:16.796 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 17:20:16.796 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 17:20:16.796 +03:00 [DBG] Start authorize request
2018-11-28 17:20:16.797 +03:00 [DBG] No user present in authorize request
2018-11-28 17:20:16.797 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 17:20:16.797 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 17:20:16.797 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "p6ZwmdVVnWN3nyMD24RIzoYUBSNm46kS2uWJmtCM",
  "Nonce": "p6ZwmdVVnWN3nyMD24RIzoYUBSNm46kS2uWJmtCM",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "p6ZwmdVVnWN3nyMD24RIzoYUBSNm46kS2uWJmtCM",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "p6ZwmdVVnWN3nyMD24RIzoYUBSNm46kS2uWJmtCM"
  }
}
2018-11-28 17:20:16.798 +03:00 [INF] Showing login: User is not authenticated
2018-11-28 17:20:16.818 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 17:20:16.818 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 17:21:33.569 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 17:21:33.604 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 17:21:33.607 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 17:21:33.607 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 17:21:33.608 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 17:21:33.608 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 17:21:34.775 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 17:21:34.805 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 17:21:34.872 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 17:21:34.872 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 17:21:35.585 +03:00 [ERR] An unhandled exception has occurred while executing the request
System.OperationCanceledException: The operation was canceled.
   at System.Threading.CancellationToken.ThrowOperationCanceledException()
   at Microsoft.AspNetCore.Identity.UserStoreBase`5.SetSecurityStampAsync(TUser user, String stamp, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.UpdateSecurityStampInternal(TUser user)
   at Microsoft.AspNetCore.Identity.UserManager`1.CreateAsync(TUser user)
   at IdentityServer4.Quickstart.UI.AccountController.Login(String returnUrl) in /home/demmy/Documents/SSO_PASSWORDLESS/Quickstart/Account/AccountController.cs:line 71
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-11-28 17:21:38.891 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 17:21:38.892 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 17:21:39.653 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 17:21:39.654 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 17:21:43.325 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 17:21:43.328 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 17:21:43.328 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 17:21:43.330 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 17:21:43.335 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 17:21:43.335 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 17:21:43.339 +03:00 [DBG] Start discovery request
2018-11-28 17:21:43.471 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 17:21:43.471 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 17:21:43.471 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 17:21:43.472 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 17:21:43.472 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 17:21:43.472 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 17:21:43.475 +03:00 [DBG] Start key discovery request
2018-11-28 17:21:49.926 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 17:21:49.928 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 17:21:49.928 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 17:21:49.933 +03:00 [DBG] Start authorize request
2018-11-28 17:21:49.939 +03:00 [DBG] No user present in authorize request
2018-11-28 17:21:49.940 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 17:21:49.940 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 17:21:49.951 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "QcsDEZf1n5B6tsaZkOcPIQ7s18QR4eiThTu01HN0",
  "Nonce": "QcsDEZf1n5B6tsaZkOcPIQ7s18QR4eiThTu01HN0",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "QcsDEZf1n5B6tsaZkOcPIQ7s18QR4eiThTu01HN0",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "QcsDEZf1n5B6tsaZkOcPIQ7s18QR4eiThTu01HN0"
  }
}
2018-11-28 17:21:49.957 +03:00 [INF] Showing login: User is not authenticated
2018-11-28 17:21:49.983 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 17:21:49.983 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 17:21:52.776 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-11-28 17:21:52.777 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-11-28 17:21:52.777 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-11-28 17:21:52.782 +03:00 [DBG] Start authorize callback request
2018-11-28 17:21:52.786 +03:00 [DBG] No user present in authorize request
2018-11-28 17:21:52.786 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 17:21:52.787 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 17:21:52.787 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "QcsDEZf1n5B6tsaZkOcPIQ7s18QR4eiThTu01HN0",
  "Nonce": "QcsDEZf1n5B6tsaZkOcPIQ7s18QR4eiThTu01HN0",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "QcsDEZf1n5B6tsaZkOcPIQ7s18QR4eiThTu01HN0",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "QcsDEZf1n5B6tsaZkOcPIQ7s18QR4eiThTu01HN0"
  }
}
2018-11-28 17:21:52.787 +03:00 [INF] Showing login: User is not authenticated
2018-11-28 17:21:52.798 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 17:21:52.800 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 17:22:05.275 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-11-28 17:22:05.275 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-11-28 17:22:05.276 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-11-28 17:22:05.276 +03:00 [DBG] Start authorize callback request
2018-11-28 17:22:05.276 +03:00 [DBG] No user present in authorize request
2018-11-28 17:22:05.276 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 17:22:05.277 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 17:22:05.277 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "QcsDEZf1n5B6tsaZkOcPIQ7s18QR4eiThTu01HN0",
  "Nonce": "QcsDEZf1n5B6tsaZkOcPIQ7s18QR4eiThTu01HN0",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "QcsDEZf1n5B6tsaZkOcPIQ7s18QR4eiThTu01HN0",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "QcsDEZf1n5B6tsaZkOcPIQ7s18QR4eiThTu01HN0"
  }
}
2018-11-28 17:22:05.277 +03:00 [INF] Showing login: User is not authenticated
2018-11-28 17:22:05.414 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 17:22:05.414 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 17:22:13.984 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-11-28 17:22:13.985 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-11-28 17:22:13.985 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-11-28 17:22:13.985 +03:00 [DBG] Start authorize callback request
2018-11-28 17:22:13.985 +03:00 [DBG] No user present in authorize request
2018-11-28 17:22:13.985 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 17:22:13.985 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 17:22:13.985 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "QcsDEZf1n5B6tsaZkOcPIQ7s18QR4eiThTu01HN0",
  "Nonce": "QcsDEZf1n5B6tsaZkOcPIQ7s18QR4eiThTu01HN0",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "QcsDEZf1n5B6tsaZkOcPIQ7s18QR4eiThTu01HN0",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "QcsDEZf1n5B6tsaZkOcPIQ7s18QR4eiThTu01HN0"
  }
}
2018-11-28 17:22:13.985 +03:00 [INF] Showing login: User is not authenticated
2018-11-28 17:22:14.003 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 17:22:14.003 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 17:24:26.778 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 17:24:26.778 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 17:24:26.778 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 17:24:26.779 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 17:24:26.779 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 17:24:26.779 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 17:24:26.779 +03:00 [DBG] Start discovery request
2018-11-28 17:24:26.816 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 17:24:26.816 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 17:24:26.816 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 17:24:26.817 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 17:24:26.819 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 17:24:26.819 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 17:24:26.819 +03:00 [DBG] Start key discovery request
2018-11-28 17:24:30.327 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 17:24:30.327 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 17:24:30.327 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 17:24:30.327 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 17:24:30.327 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 17:24:30.327 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 17:24:30.327 +03:00 [DBG] Start discovery request
2018-11-28 17:24:30.400 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 17:24:30.401 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 17:24:30.401 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 17:24:30.402 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 17:24:30.402 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 17:24:30.402 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 17:24:30.402 +03:00 [DBG] Start key discovery request
2018-11-28 17:24:33.848 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 17:24:33.848 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 17:24:33.848 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 17:24:33.849 +03:00 [DBG] Start authorize request
2018-11-28 17:24:33.849 +03:00 [DBG] No user present in authorize request
2018-11-28 17:24:33.849 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 17:24:33.849 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 17:24:33.849 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "IP1RuFp1uBBRjlORqZYeC72WptkDvHoyzoS3xprd",
  "Nonce": "IP1RuFp1uBBRjlORqZYeC72WptkDvHoyzoS3xprd",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "IP1RuFp1uBBRjlORqZYeC72WptkDvHoyzoS3xprd",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "IP1RuFp1uBBRjlORqZYeC72WptkDvHoyzoS3xprd"
  }
}
2018-11-28 17:24:33.849 +03:00 [INF] Showing login: User is not authenticated
2018-11-28 17:24:33.885 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 17:24:33.886 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 17:24:50.545 +03:00 [DBG] Augmenting SignInContext
2018-11-28 17:24:50.547 +03:00 [DBG] Adding idp claim with value: local
2018-11-28 17:24:50.547 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-28 17:24:50.548 +03:00 [DBG] Adding auth_time claim with value: 1543415090
2018-11-28 17:24:50.578 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 17:24:52.759 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:24:52.761 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:24:53.794 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:24:53.795 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:24:54.382 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:24:54.382 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:24:54.401 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:24:55.429 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:24:55.429 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:24:55.910 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:24:55.910 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:24:59.547 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 17:24:59.547 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 17:24:59.547 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 17:24:59.547 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 17:24:59.548 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 17:24:59.548 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 17:24:59.548 +03:00 [DBG] Start discovery request
2018-11-28 17:24:59.579 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 17:24:59.579 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 17:24:59.579 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 17:24:59.579 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 17:24:59.579 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 17:24:59.579 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 17:24:59.579 +03:00 [DBG] Start key discovery request
2018-11-28 17:25:01.913 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:25:01.913 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:25:01.913 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 17:25:01.913 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 17:25:01.914 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 17:25:01.914 +03:00 [DBG] Start authorize request
2018-11-28 17:25:01.914 +03:00 [DBG] User in authorize request: test@test.com
2018-11-28 17:25:01.914 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 17:25:01.914 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 17:25:01.914 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "test@test.com",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "nLNwiLDSf3FOUMbzqK6I5u9bbC2sMHWoKn0BNDVp",
  "Nonce": "nLNwiLDSf3FOUMbzqK6I5u9bbC2sMHWoKn0BNDVp",
  "SessionId": "972a129a03fd2adb800bb31cc15130ce",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "nLNwiLDSf3FOUMbzqK6I5u9bbC2sMHWoKn0BNDVp",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "nLNwiLDSf3FOUMbzqK6I5u9bbC2sMHWoKn0BNDVp"
  }
}
2018-11-28 17:25:01.944 +03:00 [INF] Showing login: User is not active
2018-11-28 17:25:01.964 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:25:01.964 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:25:01.965 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 17:25:01.965 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 17:25:21.157 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 17:25:21.157 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 17:25:21.157 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 17:25:21.157 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 17:25:21.157 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 17:25:21.157 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 17:25:21.157 +03:00 [DBG] Start discovery request
2018-11-28 17:25:21.165 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 17:25:21.165 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 17:25:21.165 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 17:25:21.165 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 17:25:21.166 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 17:25:21.166 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 17:25:21.166 +03:00 [DBG] Start key discovery request
2018-11-28 17:26:06.009 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 17:26:06.055 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 17:26:06.058 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 17:26:06.058 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 17:26:06.059 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 17:26:06.059 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 17:26:07.918 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:26:07.935 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:26:18.442 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:26:18.443 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:26:20.011 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:26:20.011 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:26:20.207 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-11-28 17:26:20.211 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-11-28 17:26:20.212 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-11-28 17:26:20.284 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "test@test.com",
  "DisplayName": "test@test.com",
  "ActivityId": "0HLIL7LNGOVAO:00000003",
  "TimeStamp": "2018-11-28T14:26:20Z",
  "ProcessId": 20421,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-11-28 17:26:52.533 +03:00 [DBG] Augmenting SignInContext
2018-11-28 17:26:52.534 +03:00 [DBG] Adding idp claim with value: local
2018-11-28 17:26:52.535 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-28 17:26:52.535 +03:00 [DBG] Adding auth_time claim with value: 1543415212
2018-11-28 17:26:52.554 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 17:27:04.039 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:27:04.039 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:28:06.650 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:28:06.650 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:28:09.029 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:28:09.029 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:28:09.030 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-11-28 17:28:09.030 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-11-28 17:28:09.030 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-11-28 17:28:09.030 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "test@test.com",
  "DisplayName": "test@test.com",
  "ActivityId": "0HLIL7LNGOVAO:0000000A",
  "TimeStamp": "2018-11-28T14:28:09Z",
  "ProcessId": 20421,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-11-28 17:28:56.611 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 17:28:56.646 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 17:28:56.649 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 17:28:56.649 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 17:28:56.649 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 17:28:56.649 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 17:29:07.693 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 17:29:07.706 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 17:29:07.706 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 17:29:07.718 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 17:29:07.875 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 17:29:07.876 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 17:29:07.878 +03:00 [DBG] Start discovery request
2018-11-28 17:29:07.978 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 17:29:07.978 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 17:29:07.978 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 17:29:07.978 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 17:29:07.979 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 17:29:07.979 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 17:29:07.982 +03:00 [DBG] Start key discovery request
2018-11-28 17:29:08.992 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 17:29:08.995 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 17:29:08.995 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 17:29:08.999 +03:00 [DBG] Start authorize request
2018-11-28 17:29:09.013 +03:00 [DBG] No user present in authorize request
2018-11-28 17:29:09.018 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 17:29:09.070 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 17:29:09.080 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "syzMZ1jycKM5QIdPLbzMUP5iSjMcetbOkiUXZyg2",
  "Nonce": "syzMZ1jycKM5QIdPLbzMUP5iSjMcetbOkiUXZyg2",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "syzMZ1jycKM5QIdPLbzMUP5iSjMcetbOkiUXZyg2",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "syzMZ1jycKM5QIdPLbzMUP5iSjMcetbOkiUXZyg2"
  }
}
2018-11-28 17:29:09.086 +03:00 [INF] Showing login: User is not authenticated
2018-11-28 17:29:09.273 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 17:29:09.274 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 17:29:26.898 +03:00 [DBG] Augmenting SignInContext
2018-11-28 17:29:26.903 +03:00 [DBG] Adding idp claim with value: local
2018-11-28 17:29:26.903 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-28 17:29:26.904 +03:00 [DBG] Adding auth_time claim with value: 1543415366
2018-11-28 17:29:26.938 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 17:29:26.941 +03:00 [ERR] An unhandled exception has occurred while executing the request
System.InvalidOperationException: No route matches the supplied values.
   at Microsoft.AspNetCore.Mvc.Internal.RedirectToRouteResultExecutor.Execute(ActionContext context, RedirectToRouteResult result)
   at Microsoft.AspNetCore.Mvc.ActionResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-11-28 17:29:43.834 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 17:29:43.871 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 17:29:43.875 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 17:29:43.875 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 17:29:43.875 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 17:29:43.875 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 17:29:51.939 +03:00 [ERR] An unhandled exception has occurred while executing the request
System.ArgumentNullException: Value cannot be null.
Parameter name: user
   at Microsoft.AspNetCore.Identity.UserManager`1.VerifyUserTokenAsync(TUser user, String tokenProvider, String purpose, String token)
   at IdentityServer4.Quickstart.UI.AccountController.LoginCallback(String token, String email, LoginInputModel model) in /home/demmy/Documents/SSO_PASSWORDLESS/Quickstart/Account/AccountController.cs:line 157
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-11-28 17:30:18.755 +03:00 [DBG] Augmenting SignInContext
2018-11-28 17:30:18.758 +03:00 [DBG] Adding idp claim with value: local
2018-11-28 17:30:18.758 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-28 17:30:18.759 +03:00 [DBG] Adding auth_time claim with value: 1543415418
2018-11-28 17:30:18.803 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 17:30:18.807 +03:00 [ERR] An unhandled exception has occurred while executing the request
System.InvalidOperationException: No route matches the supplied values.
   at Microsoft.AspNetCore.Mvc.Internal.RedirectToRouteResultExecutor.Execute(ActionContext context, RedirectToRouteResult result)
   at Microsoft.AspNetCore.Mvc.ActionResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-11-28 17:30:38.891 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 17:30:38.896 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 17:30:38.896 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 17:30:38.898 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 17:30:38.901 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 17:30:38.902 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 17:30:38.905 +03:00 [DBG] Start discovery request
2018-11-28 17:30:38.992 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 17:30:38.992 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 17:30:38.992 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 17:30:38.992 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 17:30:38.993 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 17:30:38.993 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 17:30:38.998 +03:00 [DBG] Start key discovery request
2018-11-28 17:40:07.579 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 17:40:07.620 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 17:40:07.623 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 17:40:07.623 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 17:40:07.623 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 17:40:07.624 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 17:40:16.546 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 17:40:16.594 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 17:40:16.714 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 17:40:16.714 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 17:40:17.236 +03:00 [ERR] An unhandled exception has occurred while executing the request
System.OperationCanceledException: The operation was canceled.
   at System.Threading.CancellationToken.ThrowOperationCanceledException()
   at Microsoft.AspNetCore.Identity.UserStoreBase`5.SetSecurityStampAsync(TUser user, String stamp, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.UpdateSecurityStampInternal(TUser user)
   at Microsoft.AspNetCore.Identity.UserManager`1.CreateAsync(TUser user)
   at IdentityServer4.Quickstart.UI.AccountController.Login(String returnUrl) in /home/demmy/Documents/SSO_PASSWORDLESS/Quickstart/Account/AccountController.cs:line 71
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-11-28 17:40:26.827 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 17:40:26.830 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 17:40:26.831 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 17:40:26.832 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 17:40:26.837 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 17:40:26.838 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 17:40:26.840 +03:00 [DBG] Start discovery request
2018-11-28 17:40:26.941 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 17:40:26.942 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 17:40:26.942 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 17:40:26.942 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 17:40:26.943 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 17:40:26.943 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 17:40:26.946 +03:00 [DBG] Start key discovery request
2018-11-28 17:40:31.985 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 17:40:31.987 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 17:40:31.987 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 17:40:31.990 +03:00 [DBG] Start authorize request
2018-11-28 17:40:31.995 +03:00 [DBG] No user present in authorize request
2018-11-28 17:40:31.995 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 17:40:31.996 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 17:40:32.007 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "y7Yl9YDBRHfOO5F2AppdG49HQ7ZfJfp2tj2Oyoyv",
  "Nonce": "y7Yl9YDBRHfOO5F2AppdG49HQ7ZfJfp2tj2Oyoyv",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "y7Yl9YDBRHfOO5F2AppdG49HQ7ZfJfp2tj2Oyoyv",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "y7Yl9YDBRHfOO5F2AppdG49HQ7ZfJfp2tj2Oyoyv"
  }
}
2018-11-28 17:40:32.014 +03:00 [INF] Showing login: User is not authenticated
2018-11-28 17:40:32.032 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 17:40:32.032 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 17:41:04.821 +03:00 [DBG] Augmenting SignInContext
2018-11-28 17:41:04.824 +03:00 [DBG] Adding idp claim with value: local
2018-11-28 17:41:04.824 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-28 17:41:04.824 +03:00 [DBG] Adding auth_time claim with value: 1543416064
2018-11-28 17:41:04.860 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 17:41:04.863 +03:00 [ERR] An unhandled exception has occurred while executing the request
System.InvalidOperationException: No route matches the supplied values.
   at Microsoft.AspNetCore.Mvc.Internal.RedirectToRouteResultExecutor.Execute(ActionContext context, RedirectToRouteResult result)
   at Microsoft.AspNetCore.Mvc.ActionResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-11-28 17:42:36.396 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 17:42:36.469 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 17:42:36.472 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 17:42:36.473 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 17:42:36.473 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 17:42:36.473 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 17:42:42.697 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 17:42:42.715 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 17:42:42.716 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 17:42:42.720 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 17:42:42.878 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 17:42:42.878 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 17:42:42.884 +03:00 [DBG] Start discovery request
2018-11-28 17:42:43.106 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 17:42:43.106 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 17:42:43.106 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 17:42:43.106 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 17:42:43.108 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 17:42:43.108 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 17:42:43.111 +03:00 [DBG] Start key discovery request
2018-11-28 17:42:48.241 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 17:42:48.243 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 17:42:48.243 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 17:42:48.246 +03:00 [DBG] Start authorize request
2018-11-28 17:42:48.269 +03:00 [DBG] No user present in authorize request
2018-11-28 17:42:48.272 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 17:42:48.323 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 17:42:48.340 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "Ryy2pBQW2uYufIky8odiv2T6tmkWyGKzDDlzO4gM",
  "Nonce": "Ryy2pBQW2uYufIky8odiv2T6tmkWyGKzDDlzO4gM",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "Ryy2pBQW2uYufIky8odiv2T6tmkWyGKzDDlzO4gM",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "Ryy2pBQW2uYufIky8odiv2T6tmkWyGKzDDlzO4gM"
  }
}
2018-11-28 17:42:48.347 +03:00 [INF] Showing login: User is not authenticated
2018-11-28 17:42:48.512 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 17:42:48.513 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 17:43:13.906 +03:00 [DBG] Augmenting SignInContext
2018-11-28 17:43:13.908 +03:00 [DBG] Adding idp claim with value: local
2018-11-28 17:43:13.909 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-28 17:43:13.909 +03:00 [DBG] Adding auth_time claim with value: 1543416193
2018-11-28 17:43:13.939 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 17:43:14.460 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 17:43:14.460 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 17:43:14.460 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 17:43:14.460 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 17:43:14.460 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 17:43:14.460 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 17:43:14.460 +03:00 [DBG] Start discovery request
2018-11-28 17:43:14.500 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 17:43:14.501 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 17:43:14.501 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 17:43:14.501 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 17:43:14.501 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 17:43:14.501 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 17:43:14.501 +03:00 [DBG] Start key discovery request
2018-11-28 17:44:15.838 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 17:44:15.876 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 17:44:15.879 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 17:44:15.879 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 17:44:15.879 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 17:44:15.879 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 17:44:17.895 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:44:17.913 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:44:21.025 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:44:21.025 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:44:21.037 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 17:44:21.068 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 17:44:21.069 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 17:44:21.078 +03:00 [DBG] Start authorize request
2018-11-28 17:44:21.103 +03:00 [DBG] User in authorize request: test@test.com
2018-11-28 17:44:21.107 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 17:44:21.193 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 17:44:21.271 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "test@test.com",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "DTB55CXgj3O1qrUQ4t7AUx1nXrSXEnwtBAaypR4C",
  "Nonce": "DTB55CXgj3O1qrUQ4t7AUx1nXrSXEnwtBAaypR4C",
  "SessionId": "2a0cf623cd52cfcdc1471838e74c6ba5",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "DTB55CXgj3O1qrUQ4t7AUx1nXrSXEnwtBAaypR4C",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "DTB55CXgj3O1qrUQ4t7AUx1nXrSXEnwtBAaypR4C"
  }
}
2018-11-28 17:44:22.073 +03:00 [INF] Showing login: User is not active
2018-11-28 17:44:22.224 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:44:22.225 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:44:22.378 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 17:44:22.379 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 17:44:25.419 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:44:25.420 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:44:26.835 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:44:26.835 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:44:26.974 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-11-28 17:44:26.975 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-11-28 17:44:26.975 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-11-28 17:44:27.001 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "test@test.com",
  "DisplayName": "test@test.com",
  "ActivityId": "0HLIL7VSAHU22:00000004",
  "TimeStamp": "2018-11-28T14:44:26Z",
  "ProcessId": 889,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-11-28 17:44:30.752 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 17:44:30.756 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 17:44:30.756 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 17:44:30.761 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 17:44:30.764 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 17:44:30.764 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 17:44:30.768 +03:00 [DBG] Start discovery request
2018-11-28 17:44:30.899 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 17:44:30.901 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 17:44:30.901 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 17:44:30.901 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 17:44:30.902 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 17:44:30.902 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 17:44:30.911 +03:00 [DBG] Start key discovery request
2018-11-28 17:44:39.191 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 17:44:39.191 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 17:44:39.191 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 17:44:39.191 +03:00 [DBG] Start authorize request
2018-11-28 17:44:39.191 +03:00 [DBG] No user present in authorize request
2018-11-28 17:44:39.191 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 17:44:39.192 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 17:44:39.192 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "k5990JEtOpA3QkOYKB54OD6n9POTHz4u79RpokA6",
  "Nonce": "k5990JEtOpA3QkOYKB54OD6n9POTHz4u79RpokA6",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "k5990JEtOpA3QkOYKB54OD6n9POTHz4u79RpokA6",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "k5990JEtOpA3QkOYKB54OD6n9POTHz4u79RpokA6"
  }
}
2018-11-28 17:44:39.192 +03:00 [INF] Showing login: User is not authenticated
2018-11-28 17:44:39.218 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 17:44:39.218 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 17:44:55.494 +03:00 [DBG] Augmenting SignInContext
2018-11-28 17:44:55.495 +03:00 [DBG] Adding idp claim with value: local
2018-11-28 17:44:55.496 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-28 17:44:55.496 +03:00 [DBG] Adding auth_time claim with value: 1543416295
2018-11-28 17:44:55.516 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 17:44:55.528 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:44:55.528 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:52:57.286 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 17:52:57.330 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 17:52:57.333 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 17:52:57.333 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 17:52:57.334 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 17:52:57.334 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 17:52:59.035 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:52:59.055 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:53:03.857 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 17:53:03.862 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 17:53:03.862 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 17:53:03.865 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 17:53:03.871 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 17:53:03.871 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 17:53:03.875 +03:00 [DBG] Start discovery request
2018-11-28 17:53:03.992 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 17:53:03.993 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 17:53:03.993 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 17:53:03.993 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 17:53:03.994 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 17:53:03.994 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 17:53:03.996 +03:00 [DBG] Start key discovery request
2018-11-28 17:53:05.124 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:53:05.124 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:53:05.124 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 17:53:05.129 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 17:53:05.129 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 17:53:05.133 +03:00 [DBG] Start authorize request
2018-11-28 17:53:05.150 +03:00 [DBG] User in authorize request: test@test.com
2018-11-28 17:53:05.155 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 17:53:05.202 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 17:53:05.216 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "test@test.com",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "JFZ0Sq0pdoKnWXlnoKZychxBY91EoKwnQLDS1BQ6",
  "Nonce": "JFZ0Sq0pdoKnWXlnoKZychxBY91EoKwnQLDS1BQ6",
  "SessionId": "261654c321758c48886964f8d1b82517",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "JFZ0Sq0pdoKnWXlnoKZychxBY91EoKwnQLDS1BQ6",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "JFZ0Sq0pdoKnWXlnoKZychxBY91EoKwnQLDS1BQ6"
  }
}
2018-11-28 17:53:05.917 +03:00 [INF] Showing login: User is not active
2018-11-28 17:53:05.933 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:53:05.933 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:53:06.059 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 17:53:06.060 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 17:53:17.695 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:53:17.695 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:53:17.864 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:53:17.864 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:53:34.964 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 17:53:34.964 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 17:53:34.964 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 17:53:34.964 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 17:53:34.964 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 17:53:34.964 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 17:53:34.965 +03:00 [DBG] Start discovery request
2018-11-28 17:53:35.015 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 17:53:35.015 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 17:53:35.015 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 17:53:35.015 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 17:53:35.015 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 17:53:35.015 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 17:53:35.015 +03:00 [DBG] Start key discovery request
2018-11-28 17:53:40.796 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:53:40.796 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:53:42.019 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:53:42.019 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:53:42.071 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-11-28 17:53:42.072 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-11-28 17:53:42.072 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-11-28 17:53:42.111 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "test@test.com",
  "DisplayName": "test@test.com",
  "ActivityId": "0HLIL84NMLJNT:00000006",
  "TimeStamp": "2018-11-28T14:53:42Z",
  "ProcessId": 7522,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-11-28 17:54:01.474 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "ss@ss.com",
  "SubjectId": "d0dc9e3a-072e-4f67-8a83-601dbf09e428",
  "DisplayName": "ss@ss.com",
  "Endpoint": "UI",
  "ActivityId": "0HLIL84NMLJNT:0000000B",
  "TimeStamp": "2018-11-28T14:54:01Z",
  "ProcessId": 7522,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-11-28 17:54:01.485 +03:00 [DBG] Augmenting SignInContext
2018-11-28 17:54:01.488 +03:00 [DBG] Adding idp claim with value: local
2018-11-28 17:54:01.488 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-28 17:54:01.507 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 17:54:20.244 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:54:20.244 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:54:20.275 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:54:21.145 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:54:21.145 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:54:21.879 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:54:21.879 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:54:21.879 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:56:44.379 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 17:56:44.415 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 17:56:44.417 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 17:56:44.418 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 17:56:44.418 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 17:56:44.418 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 17:56:46.287 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:56:46.324 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:56:52.754 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:56:52.755 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:56:53.784 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:56:53.784 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:56:53.954 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-11-28 17:56:53.958 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-11-28 17:56:53.959 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-11-28 17:56:54.017 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "d0dc9e3a-072e-4f67-8a83-601dbf09e428",
  "DisplayName": "ss@ss.com",
  "ActivityId": "0HLIL86RC084V:00000003",
  "TimeStamp": "2018-11-28T14:56:53Z",
  "ProcessId": 10296,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-11-28 17:57:05.402 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 17:57:05.446 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 17:57:05.449 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 17:57:05.449 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 17:57:05.450 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 17:57:05.450 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 17:57:15.807 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 17:57:15.960 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 17:57:15.961 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 17:57:15.964 +03:00 [DBG] Start authorize request
2018-11-28 17:57:15.989 +03:00 [DBG] No user present in authorize request
2018-11-28 17:57:15.994 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 17:57:16.077 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 17:57:16.157 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "qtpocB2DsnP4wEA0hcMWNYuRipAZHLyfkbQXagNP",
  "Nonce": "qtpocB2DsnP4wEA0hcMWNYuRipAZHLyfkbQXagNP",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "qtpocB2DsnP4wEA0hcMWNYuRipAZHLyfkbQXagNP",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "qtpocB2DsnP4wEA0hcMWNYuRipAZHLyfkbQXagNP"
  }
}
2018-11-28 17:57:16.164 +03:00 [INF] Showing login: User is not authenticated
2018-11-28 17:57:16.371 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 17:57:16.372 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 17:57:41.515 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "ss@ss.com",
  "SubjectId": "29379d33-ea41-4ab7-a8af-1eea437ac4ee",
  "DisplayName": "ss@ss.com",
  "Endpoint": "UI",
  "ActivityId": "0HLIL871KU2LG:00000006",
  "TimeStamp": "2018-11-28T14:57:41Z",
  "ProcessId": 10536,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-11-28 17:57:41.528 +03:00 [DBG] Augmenting SignInContext
2018-11-28 17:57:41.530 +03:00 [DBG] Adding idp claim with value: local
2018-11-28 17:57:41.530 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-28 17:57:41.561 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 17:58:16.952 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:58:16.953 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:58:16.978 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:58:19.233 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:58:19.234 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:58:20.479 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:58:20.479 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 17:58:20.505 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-11-28 17:58:20.506 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-11-28 17:58:20.507 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-11-28 17:58:20.510 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "29379d33-ea41-4ab7-a8af-1eea437ac4ee",
  "DisplayName": "ss@ss.com",
  "ActivityId": "0HLIL871KU2LG:00000009",
  "TimeStamp": "2018-11-28T14:58:20Z",
  "ProcessId": 10536,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-11-28 17:58:27.130 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 17:58:27.166 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 17:58:27.169 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 17:58:27.169 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 17:58:27.170 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 17:58:27.170 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 17:58:39.722 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 17:58:39.865 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 17:58:39.865 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 17:58:39.869 +03:00 [DBG] Start authorize request
2018-11-28 17:58:39.884 +03:00 [DBG] No user present in authorize request
2018-11-28 17:58:39.888 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 17:58:39.933 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 17:58:40.004 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "xBiXQGzhuRMjhICnRpxnHn7jLEncARVwt4oxbZa3",
  "Nonce": "xBiXQGzhuRMjhICnRpxnHn7jLEncARVwt4oxbZa3",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "xBiXQGzhuRMjhICnRpxnHn7jLEncARVwt4oxbZa3",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "xBiXQGzhuRMjhICnRpxnHn7jLEncARVwt4oxbZa3"
  }
}
2018-11-28 17:58:40.015 +03:00 [INF] Showing login: User is not authenticated
2018-11-28 17:58:40.175 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 17:58:40.177 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 17:58:58.852 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "ss@ss.com",
  "SubjectId": "37fb0dd8-b196-42a8-8c97-d182ce8f9d3c",
  "DisplayName": "ss@ss.com",
  "Endpoint": "UI",
  "ActivityId": "0HLIL87Q03DAS:00000006",
  "TimeStamp": "2018-11-28T14:58:58Z",
  "ProcessId": 11513,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-11-28 17:58:58.869 +03:00 [DBG] Augmenting SignInContext
2018-11-28 17:58:58.871 +03:00 [DBG] Adding idp claim with value: local
2018-11-28 17:58:58.872 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-28 17:58:58.909 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 17:58:58.912 +03:00 [ERR] An unhandled exception has occurred while executing the request
System.ArgumentException: Value cannot be null or empty.
Parameter name: url
   at Microsoft.AspNetCore.Mvc.ControllerBase.Redirect(String url)
   at IdentityServer4.Quickstart.UI.AccountController.LoginCallback(String token, String email, LoginInputModel model) in /home/demmy/Documents/SSO_PASSWORDLESS/Quickstart/Account/AccountController.cs:line 172
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-11-28 18:04:05.475 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 18:04:05.514 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 18:04:05.517 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 18:04:05.517 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 18:04:05.517 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 18:04:05.517 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 18:04:15.074 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 18:04:15.092 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 18:04:15.094 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 18:04:15.095 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 18:04:15.252 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 18:04:15.253 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 18:04:15.258 +03:00 [DBG] Start discovery request
2018-11-28 18:04:15.387 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 18:04:15.387 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 18:04:15.387 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 18:04:15.387 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 18:04:15.388 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 18:04:15.388 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 18:04:15.391 +03:00 [DBG] Start key discovery request
2018-11-28 18:04:22.882 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 18:04:22.884 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 18:04:22.885 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 18:04:22.889 +03:00 [DBG] Start authorize request
2018-11-28 18:04:22.903 +03:00 [DBG] No user present in authorize request
2018-11-28 18:04:22.908 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 18:04:22.951 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 18:04:22.966 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "ByaEHjvHu8ou0eto9pprHMWqMy3zCA4G3Lkqolx8",
  "Nonce": "ByaEHjvHu8ou0eto9pprHMWqMy3zCA4G3Lkqolx8",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "ByaEHjvHu8ou0eto9pprHMWqMy3zCA4G3Lkqolx8",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "ByaEHjvHu8ou0eto9pprHMWqMy3zCA4G3Lkqolx8"
  }
}
2018-11-28 18:04:22.973 +03:00 [INF] Showing login: User is not authenticated
2018-11-28 18:04:23.133 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 18:04:23.135 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 18:05:36.840 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "ss@ss.com",
  "SubjectId": "c7190324-f2ec-494e-8cca-1102a21c2bd6",
  "DisplayName": "ss@ss.com",
  "Endpoint": "UI",
  "ActivityId": "0HLIL8AUQVA9Q:00000005",
  "TimeStamp": "2018-11-28T15:05:36Z",
  "ProcessId": 15082,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-11-28 18:05:36.855 +03:00 [DBG] Augmenting SignInContext
2018-11-28 18:05:36.857 +03:00 [DBG] Adding idp claim with value: local
2018-11-28 18:05:36.857 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-28 18:05:36.888 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 18:05:36.891 +03:00 [ERR] An unhandled exception has occurred while executing the request
System.ArgumentException: Value cannot be null or empty.
Parameter name: url
   at Microsoft.AspNetCore.Mvc.ControllerBase.Redirect(String url)
   at IdentityServer4.Quickstart.UI.AccountController.LoginCallback(String token, String email, LoginInputModel model) in /home/demmy/Documents/SSO_PASSWORDLESS/Quickstart/Account/AccountController.cs:line 175
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-11-28 18:07:12.032 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 18:07:12.070 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 18:07:12.077 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 18:07:12.078 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 18:07:12.078 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 18:07:12.078 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 18:07:22.781 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 18:07:22.813 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 18:07:22.814 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 18:07:22.816 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 18:07:22.950 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 18:07:22.950 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 18:07:22.953 +03:00 [DBG] Start discovery request
2018-11-28 18:07:23.079 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 18:07:23.080 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 18:07:23.080 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 18:07:23.080 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 18:07:23.081 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 18:07:23.081 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 18:07:23.084 +03:00 [DBG] Start key discovery request
2018-11-28 18:07:26.581 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 18:07:26.584 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 18:07:26.584 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 18:07:26.589 +03:00 [DBG] Start authorize request
2018-11-28 18:07:26.605 +03:00 [DBG] No user present in authorize request
2018-11-28 18:07:26.610 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 18:07:26.658 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 18:07:26.671 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "yPpe26hAw16VV7EzydTiUdWnEjq0Hv8T7sLLRwqF",
  "Nonce": "yPpe26hAw16VV7EzydTiUdWnEjq0Hv8T7sLLRwqF",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "yPpe26hAw16VV7EzydTiUdWnEjq0Hv8T7sLLRwqF",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "yPpe26hAw16VV7EzydTiUdWnEjq0Hv8T7sLLRwqF"
  }
}
2018-11-28 18:07:26.681 +03:00 [INF] Showing login: User is not authenticated
2018-11-28 18:07:26.846 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 18:07:26.847 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 18:08:13.521 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "ss@ss.com",
  "SubjectId": "9605b947-7a34-48b5-8501-1e453cd80922",
  "DisplayName": "ss@ss.com",
  "Endpoint": "UI",
  "ActivityId": "0HLIL8CMEKRCT:00000005",
  "TimeStamp": "2018-11-28T15:08:13Z",
  "ProcessId": 16995,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-11-28 18:08:13.541 +03:00 [DBG] Augmenting SignInContext
2018-11-28 18:08:13.543 +03:00 [DBG] Adding idp claim with value: local
2018-11-28 18:08:13.543 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-28 18:08:13.574 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 18:08:13.576 +03:00 [ERR] An unhandled exception has occurred while executing the request
System.ArgumentException: Value cannot be null or empty.
Parameter name: url
   at Microsoft.AspNetCore.Mvc.ControllerBase.Redirect(String url)
   at IdentityServer4.Quickstart.UI.AccountController.LoginCallback(String token, String email, LoginInputModel model) in /home/demmy/Documents/SSO_PASSWORDLESS/Quickstart/Account/AccountController.cs:line 169
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-11-28 18:10:21.434 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 18:10:21.470 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 18:10:21.473 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 18:10:21.474 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 18:10:21.474 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 18:10:21.474 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 18:10:27.281 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 18:10:27.300 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 18:10:27.300 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 18:10:27.305 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 18:10:27.477 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 18:10:27.478 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 18:10:27.482 +03:00 [DBG] Start discovery request
2018-11-28 18:10:27.650 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 18:10:27.650 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 18:10:27.650 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 18:10:27.650 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 18:10:27.652 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 18:10:27.652 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 18:10:27.655 +03:00 [DBG] Start key discovery request
2018-11-28 18:10:33.118 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 18:10:33.121 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 18:10:33.121 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 18:10:33.127 +03:00 [DBG] Start authorize request
2018-11-28 18:10:33.145 +03:00 [DBG] No user present in authorize request
2018-11-28 18:10:33.149 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 18:10:33.193 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 18:10:33.205 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "Zbgf61W4j4gWD5A31JoiwJ2oSl7fK4UnLkAYXK73",
  "Nonce": "Zbgf61W4j4gWD5A31JoiwJ2oSl7fK4UnLkAYXK73",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "Zbgf61W4j4gWD5A31JoiwJ2oSl7fK4UnLkAYXK73",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "Zbgf61W4j4gWD5A31JoiwJ2oSl7fK4UnLkAYXK73"
  }
}
2018-11-28 18:10:33.214 +03:00 [INF] Showing login: User is not authenticated
2018-11-28 18:10:33.350 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 18:10:33.352 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 18:10:52.774 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "ss@ss.com",
  "SubjectId": "014714d5-415f-4e27-b62a-fd8e5bc78604",
  "DisplayName": "ss@ss.com",
  "Endpoint": "UI",
  "ActivityId": "0HLIL8EES6QK9:00000005",
  "TimeStamp": "2018-11-28T15:10:52Z",
  "ProcessId": 18620,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-11-28 18:10:52.787 +03:00 [DBG] Augmenting SignInContext
2018-11-28 18:10:52.790 +03:00 [DBG] Adding idp claim with value: local
2018-11-28 18:10:52.790 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-28 18:10:52.830 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 18:10:52.832 +03:00 [ERR] An unhandled exception has occurred while executing the request
System.ArgumentException: Value cannot be null or empty.
Parameter name: url
   at Microsoft.AspNetCore.Mvc.ControllerBase.Redirect(String url)
   at IdentityServer4.Quickstart.UI.AccountController.LoginCallback(String token, String email, LoginInputModel model) in /home/demmy/Documents/SSO_PASSWORDLESS/Quickstart/Account/AccountController.cs:line 169
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-11-28 18:35:39.383 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 18:35:39.420 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 18:35:39.422 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 18:35:39.422 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 18:35:39.423 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 18:35:39.423 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 18:36:00.263 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 18:36:00.287 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 18:36:00.287 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 18:36:00.289 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 18:36:00.437 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 18:36:00.437 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 18:36:00.441 +03:00 [DBG] Start discovery request
2018-11-28 18:36:00.542 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 18:36:00.543 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 18:36:00.543 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 18:36:00.543 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 18:36:00.544 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 18:36:00.544 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 18:36:00.548 +03:00 [DBG] Start key discovery request
2018-11-28 18:36:02.750 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 18:36:02.753 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 18:36:02.753 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 18:36:02.758 +03:00 [DBG] Start authorize request
2018-11-28 18:36:02.775 +03:00 [DBG] No user present in authorize request
2018-11-28 18:36:02.779 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 18:36:02.824 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 18:36:02.840 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "hboSELFVQCnhv71GeuIscLNKnY4uSVvLkaZgxnwx",
  "Nonce": "hboSELFVQCnhv71GeuIscLNKnY4uSVvLkaZgxnwx",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "hboSELFVQCnhv71GeuIscLNKnY4uSVvLkaZgxnwx",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "hboSELFVQCnhv71GeuIscLNKnY4uSVvLkaZgxnwx"
  }
}
2018-11-28 18:36:02.846 +03:00 [INF] Showing login: User is not authenticated
2018-11-28 18:36:03.005 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 18:36:03.007 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 18:36:31.545 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "ss@ss.com",
  "SubjectId": "00fc9868-f7fe-4730-8a90-7f23d8d32d51",
  "DisplayName": "ss@ss.com",
  "Endpoint": "UI",
  "ActivityId": "0HLIL8SJ89900:00000006",
  "TimeStamp": "2018-11-28T15:36:31Z",
  "ProcessId": 31555,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-11-28 18:36:31.560 +03:00 [DBG] Augmenting SignInContext
2018-11-28 18:36:31.562 +03:00 [DBG] Adding idp claim with value: local
2018-11-28 18:36:31.562 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-28 18:36:31.595 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 18:36:31.620 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 18:36:31.621 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 18:49:20.397 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 18:49:20.452 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 18:49:20.455 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 18:49:20.455 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 18:49:20.456 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 18:49:20.456 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 18:49:22.226 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 18:49:22.244 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 18:49:32.065 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 18:49:32.065 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 18:49:33.272 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 18:49:33.272 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 18:49:33.430 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-11-28 18:49:33.434 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-11-28 18:49:33.434 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-11-28 18:49:33.491 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "00fc9868-f7fe-4730-8a90-7f23d8d32d51",
  "DisplayName": "ss@ss.com",
  "ActivityId": "0HLIL947UJ8R5:00000003",
  "TimeStamp": "2018-11-28T15:49:33Z",
  "ProcessId": 6730,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-11-28 18:49:41.386 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed in.
2018-11-28 19:00:27.063 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 19:00:27.110 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 19:00:27.113 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 19:00:27.113 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 19:00:27.113 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 19:00:27.114 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 19:02:16.442 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 19:02:16.476 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 19:02:16.479 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 19:02:16.479 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 19:02:16.479 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 19:02:16.480 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 19:03:38.819 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 19:03:46.100 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed in.
2018-11-28 19:03:57.965 +03:00 [ERR] An unhandled exception has occurred while executing the request
System.ArgumentNullException: Value cannot be null.
Parameter name: userName
   at Microsoft.AspNetCore.Identity.UserManager`1.FindByNameAsync(String userName)
   at IdentityServer4.Quickstart.UI.AccountController.LoginCallback(String token, String email, LoginInputModel model, String returnUrl) in /home/demmy/Documents/SSO_PASSWORDLESS/Quickstart/Account/AccountController.cs:line 160
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-11-28 19:05:35.081 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 19:05:35.123 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 19:05:35.126 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 19:05:35.126 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 19:05:35.126 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 19:05:35.126 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 19:05:56.863 +03:00 [DBG] Augmenting SignInContext
2018-11-28 19:05:56.870 +03:00 [DBG] Adding idp claim with value: local
2018-11-28 19:05:56.870 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-28 19:05:56.871 +03:00 [DBG] Adding auth_time claim with value: 1543421156
2018-11-28 19:05:56.967 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 19:05:57.013 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:05:57.015 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:05:59.334 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:05:59.334 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:06:00.187 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:06:00.187 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:06:00.193 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:06:18.787 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:06:18.788 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:06:18.788 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:09:24.128 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:09:24.129 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:09:25.467 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:09:25.467 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:09:25.491 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-11-28 19:09:25.495 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-11-28 19:09:25.497 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-11-28 19:09:25.573 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "test@test.com",
  "DisplayName": "test@test.com",
  "ActivityId": "0HLIL9DADKVCM:00000002",
  "TimeStamp": "2018-11-28T16:09:25Z",
  "ProcessId": 18447,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-11-28 19:09:29.121 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 19:09:49.761 +03:00 [DBG] Augmenting SignInContext
2018-11-28 19:09:49.761 +03:00 [DBG] Adding idp claim with value: local
2018-11-28 19:09:49.761 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-28 19:09:49.761 +03:00 [DBG] Adding auth_time claim with value: 1543421389
2018-11-28 19:09:49.762 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 19:09:49.772 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:09:49.772 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:10:32.248 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 19:10:32.292 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 19:10:32.295 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 19:10:32.296 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 19:10:32.296 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 19:10:32.296 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 19:10:34.059 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:10:34.077 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:10:40.788 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:10:40.789 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:10:42.033 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:10:42.033 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:10:42.209 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-11-28 19:10:42.213 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-11-28 19:10:42.213 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-11-28 19:10:42.280 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "test@test.com",
  "DisplayName": "test@test.com",
  "ActivityId": "0HLIL9G302ONB:00000003",
  "TimeStamp": "2018-11-28T16:10:42Z",
  "ProcessId": 21856,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-11-28 19:10:54.043 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "ss@ss.com",
  "SubjectId": "09b39a03-826d-477b-b822-7bd04a82cfc7",
  "DisplayName": "ss@ss.com",
  "Endpoint": "UI",
  "ActivityId": "0HLIL9G302ONB:00000007",
  "TimeStamp": "2018-11-28T16:10:54Z",
  "ProcessId": 21856,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-11-28 19:10:54.054 +03:00 [DBG] Augmenting SignInContext
2018-11-28 19:10:54.056 +03:00 [DBG] Adding idp claim with value: local
2018-11-28 19:10:54.056 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-28 19:10:54.089 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 19:11:14.019 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:11:14.019 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:11:14.044 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:11:15.002 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:11:15.002 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:11:15.715 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:11:15.715 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:11:16.365 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:11:16.365 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:11:16.365 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:11:32.146 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:11:32.146 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:11:33.036 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:11:33.036 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:11:33.603 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:11:33.603 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:11:33.604 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:11:34.898 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:11:34.898 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:11:35.682 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:11:35.682 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:11:36.044 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:11:36.044 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:11:36.434 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:11:36.435 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:11:36.435 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:11:36.787 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:11:36.788 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:38:35.022 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 19:38:35.059 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 19:38:35.062 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 19:38:35.062 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 19:38:35.062 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 19:38:35.062 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 19:38:36.851 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:38:36.876 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:38:44.504 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:38:44.504 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:38:45.739 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:38:45.740 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:38:45.923 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-11-28 19:38:45.926 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-11-28 19:38:45.927 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-11-28 19:38:45.999 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "09b39a03-826d-477b-b822-7bd04a82cfc7",
  "DisplayName": "ss@ss.com",
  "ActivityId": "0HLIL9VOG9TIA:00000002",
  "TimeStamp": "2018-11-28T16:38:45Z",
  "ProcessId": 8957,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-11-28 19:39:01.426 +03:00 [ERR] An unhandled exception has occurred while executing the request
System.ArgumentException: SubjectId is mandatory
Parameter name: subjectId
   at IdentityServer4.IdentityServerUser..ctor(String subjectId) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\IdentityServerUser.cs:line 55
   at Microsoft.AspNetCore.Http.AuthenticationManagerExtensions.SignInAsync(HttpContext context, String subject, Claim[] claims) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Extensions\HttpContextAuthenticationExtensions.cs:line 32
   at IdentityServer4.Quickstart.UI.AccountController.Login(LoginInputModel model, String button) in /home/demmy/Documents/SSO_PASSWORDLESS/Quickstart/Account/AccountController.cs:line 123
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-11-28 19:46:42.823 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 19:46:42.860 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 19:46:42.863 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 19:46:42.863 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 19:46:42.863 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 19:46:42.864 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 19:47:02.629 +03:00 [ERR] An unhandled exception has occurred while executing the request
System.ArgumentNullException: Value cannot be null.
Parameter name: value
   at System.Security.Claims.Claim..ctor(String type, String value, String valueType, String issuer, String originalIssuer, ClaimsIdentity subject, String propertyKey, String propertyValue)
   at System.Security.Claims.Claim..ctor(String type, String value)
   at IdentityServer4.Quickstart.UI.AccountController.Login(LoginInputModel model, String button) in /home/demmy/Documents/SSO_PASSWORDLESS/Quickstart/Account/AccountController.cs:line 126
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-11-28 19:48:16.331 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 19:48:16.367 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 19:48:16.370 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 19:48:16.370 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 19:48:16.371 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 19:48:16.371 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 19:48:24.750 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 19:51:29.500 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 19:51:29.534 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 19:51:29.537 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 19:51:29.537 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 19:51:29.537 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 19:51:29.537 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 19:53:19.852 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 19:53:26.448 +03:00 [DBG] Augmenting SignInContext
2018-11-28 19:53:26.450 +03:00 [ERR] An unhandled exception has occurred while executing the request
System.InvalidOperationException: sub claim is missing
   at IdentityServer4.Hosting.IdentityServerAuthenticationService.AssertRequiredClaims(ClaimsPrincipal principal) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerAuthenticationService.cs:line 119
   at IdentityServer4.Hosting.IdentityServerAuthenticationService.AugmentPrincipal(ClaimsPrincipal principal) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerAuthenticationService.cs:line 80
   at IdentityServer4.Hosting.IdentityServerAuthenticationService.SignInAsync(HttpContext context, String scheme, ClaimsPrincipal principal, AuthenticationProperties properties) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerAuthenticationService.cs:line 68
   at IdentityServer4.Quickstart.UI.AccountController.Login(LoginInputModel model, String button) in /home/demmy/Documents/SSO_PASSWORDLESS/Quickstart/Account/AccountController.cs:line 128
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-11-28 19:54:24.882 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 19:54:24.921 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 19:54:24.924 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 19:54:24.924 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 19:54:24.925 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 19:54:24.925 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 19:58:05.544 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 19:58:10.830 +03:00 [DBG] Augmenting SignInContext
2018-11-28 19:58:10.832 +03:00 [DBG] Adding idp claim with value: local
2018-11-28 19:58:10.832 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-28 19:58:10.870 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 19:58:10.927 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 19:58:10.928 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:07:55.872 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 20:07:55.911 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 20:07:55.914 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 20:07:55.914 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 20:07:55.914 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 20:07:55.914 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 20:07:57.852 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:07:57.871 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:08:05.144 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:08:05.145 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:08:06.257 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:08:06.257 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:08:06.422 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-11-28 20:08:06.425 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-11-28 20:08:06.425 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-11-28 20:08:06.482 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "Identity.Application",
  "DisplayName": "Identity.Application",
  "ActivityId": "0HLILAG58M1QU:00000002",
  "TimeStamp": "2018-11-28T17:08:06Z",
  "ProcessId": 29264,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-11-28 20:08:11.683 +03:00 [ERR] An unhandled exception has occurred while executing the request
System.ArgumentNullException: Value cannot be null.
Parameter name: value
   at System.Security.Claims.Claim..ctor(String type, String value, String valueType, String issuer, String originalIssuer, ClaimsIdentity subject, String propertyKey, String propertyValue)
   at System.Security.Claims.Claim..ctor(String type, String value)
   at IdentityServer4.Quickstart.UI.AccountController.Login(LoginInputModel model, String button) in /home/demmy/Documents/SSO_PASSWORDLESS/Quickstart/Account/AccountController.cs:line 126
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-11-28 20:08:33.194 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 20:08:33.230 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 20:08:33.232 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 20:08:33.233 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 20:08:33.233 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 20:08:33.233 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 20:08:45.577 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-28 20:09:11.274 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:09:11.278 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:09:11.278 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:09:11.279 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:09:11.282 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:09:11.283 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:09:11.287 +03:00 [DBG] Start discovery request
2018-11-28 20:09:11.390 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:09:11.391 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:09:11.392 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:09:11.392 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:09:11.394 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:09:11.394 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:09:11.398 +03:00 [DBG] Start key discovery request
2018-11-28 20:09:12.676 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 20:09:12.679 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 20:09:12.679 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 20:09:12.682 +03:00 [DBG] Start authorize request
2018-11-28 20:09:12.693 +03:00 [DBG] No user present in authorize request
2018-11-28 20:09:12.697 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:09:12.747 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:09:12.763 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "8iu74DG41m6MCSK2CUDk0fsi1l4xkEA7d8fDAn2l",
  "Nonce": "8iu74DG41m6MCSK2CUDk0fsi1l4xkEA7d8fDAn2l",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "8iu74DG41m6MCSK2CUDk0fsi1l4xkEA7d8fDAn2l",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "8iu74DG41m6MCSK2CUDk0fsi1l4xkEA7d8fDAn2l"
  }
}
2018-11-28 20:09:12.770 +03:00 [INF] Showing login: User is not authenticated
2018-11-28 20:09:12.800 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:09:12.800 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:11:47.259 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 20:11:47.308 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 20:11:47.311 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 20:11:47.312 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 20:11:47.312 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 20:11:47.312 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 20:12:03.926 +03:00 [ERR] An unhandled exception has occurred while executing the request
System.ArgumentNullException: Value cannot be null.
Parameter name: stringToEscape
   at System.Uri.EscapeDataString(String stringToEscape)
   at Microsoft.AspNetCore.Http.Internal.ResponseCookies.Append(String key, String value)
   at IdentityServer4.Quickstart.UI.AccountController.Login(LoginInputModel model, String button) in /home/demmy/Documents/SSO_PASSWORDLESS/Quickstart/Account/AccountController.cs:line 130
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-11-28 20:12:26.116 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:12:26.120 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:12:26.120 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:12:26.122 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:12:26.125 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:12:26.125 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:12:26.128 +03:00 [DBG] Start discovery request
2018-11-28 20:12:26.221 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:12:26.221 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:12:26.222 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:12:26.222 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:12:26.222 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:12:26.223 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:12:26.226 +03:00 [DBG] Start key discovery request
2018-11-28 20:12:27.215 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 20:12:27.222 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 20:12:27.233 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 20:12:27.236 +03:00 [DBG] Start authorize request
2018-11-28 20:12:27.256 +03:00 [DBG] No user present in authorize request
2018-11-28 20:12:27.265 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:12:27.397 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:12:27.426 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "kF5a0AOE3VzNyUuezima2HO7ihOrDKJJS9HzDlfe",
  "Nonce": "kF5a0AOE3VzNyUuezima2HO7ihOrDKJJS9HzDlfe",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "kF5a0AOE3VzNyUuezima2HO7ihOrDKJJS9HzDlfe",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "kF5a0AOE3VzNyUuezima2HO7ihOrDKJJS9HzDlfe"
  }
}
2018-11-28 20:12:27.447 +03:00 [INF] Showing login: User is not authenticated
2018-11-28 20:12:27.532 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:12:27.534 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:12:50.320 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "ss@ss.com",
  "SubjectId": "215bea56-cd2c-4ddb-a18b-ed445861b35c",
  "DisplayName": "ss@ss.com",
  "Endpoint": "UI",
  "ActivityId": "0HLILAIA7C0K3:00000008",
  "TimeStamp": "2018-11-28T17:12:50Z",
  "ProcessId": 32027,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-11-28 20:12:50.336 +03:00 [DBG] Augmenting SignInContext
2018-11-28 20:12:50.338 +03:00 [DBG] Adding idp claim with value: local
2018-11-28 20:12:50.339 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-28 20:12:50.377 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 20:12:50.524 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:12:50.525 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:12:50.525 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-11-28 20:12:50.526 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-11-28 20:12:50.526 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-11-28 20:12:50.530 +03:00 [DBG] Start authorize callback request
2018-11-28 20:12:50.533 +03:00 [DBG] User in authorize request: 215bea56-cd2c-4ddb-a18b-ed445861b35c
2018-11-28 20:12:50.533 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:12:50.533 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:12:50.533 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "215bea56-cd2c-4ddb-a18b-ed445861b35c",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "kF5a0AOE3VzNyUuezima2HO7ihOrDKJJS9HzDlfe",
  "Nonce": "kF5a0AOE3VzNyUuezima2HO7ihOrDKJJS9HzDlfe",
  "SessionId": "5c736ff82f6629d8076416d8887bcbaf",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "kF5a0AOE3VzNyUuezima2HO7ihOrDKJJS9HzDlfe",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "kF5a0AOE3VzNyUuezima2HO7ihOrDKJJS9HzDlfe"
  }
}
2018-11-28 20:12:50.576 +03:00 [DBG] user_consent grant with value: angular|215bea56-cd2c-4ddb-a18b-ed445861b35c not found in store.
2018-11-28 20:12:50.577 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-11-28 20:12:50.577 +03:00 [INF] Showing consent: User has not yet consented
2018-11-28 20:12:50.596 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:12:50.596 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:12:50.637 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:12:50.637 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:13:33.276 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:13:33.276 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:13:33.304 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:13:33.304 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:13:33.330 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:13:33.330 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:13:33.330 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-11-28 20:13:33.330 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-11-28 20:13:33.330 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-11-28 20:13:33.331 +03:00 [DBG] Start authorize callback request
2018-11-28 20:13:33.362 +03:00 [DBG] User in authorize request: 215bea56-cd2c-4ddb-a18b-ed445861b35c
2018-11-28 20:13:33.363 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:13:33.363 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:13:33.363 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "215bea56-cd2c-4ddb-a18b-ed445861b35c",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "kF5a0AOE3VzNyUuezima2HO7ihOrDKJJS9HzDlfe",
  "Nonce": "kF5a0AOE3VzNyUuezima2HO7ihOrDKJJS9HzDlfe",
  "SessionId": "5c736ff82f6629d8076416d8887bcbaf",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "kF5a0AOE3VzNyUuezima2HO7ihOrDKJJS9HzDlfe",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "kF5a0AOE3VzNyUuezima2HO7ihOrDKJJS9HzDlfe"
  }
}
2018-11-28 20:13:33.365 +03:00 [DBG] user_consent grant with value: angular|215bea56-cd2c-4ddb-a18b-ed445861b35c not found in store.
2018-11-28 20:13:33.365 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-11-28 20:13:33.373 +03:00 [INF] User consented to scopes: ["openid","profile","email","role","api1"]
2018-11-28 20:13:33.384 +03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email","role","api1"]
2018-11-28 20:13:33.387 +03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 215bea56-cd2c-4ddb-a18b-ed445861b35c
2018-11-28 20:13:33.401 +03:00 [DBG] Creating Implicit Flow response.
2018-11-28 20:13:33.412 +03:00 [DBG] Getting claims for access token for client: angular
2018-11-28 20:13:33.413 +03:00 [DBG] Getting claims for access token for subject: 215bea56-cd2c-4ddb-a18b-ed445861b35c
2018-11-28 20:13:33.573 +03:00 [DBG] Getting claims for identity token for subject: 215bea56-cd2c-4ddb-a18b-ed445861b35c and client: angular
2018-11-28 20:13:33.587 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "Endpoint": "Authorize",
  "SubjectId": "215bea56-cd2c-4ddb-a18b-ed445861b35c",
  "Scopes": "openid profile email role api1",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****6MaQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****ELCw"
    }
  ],
  "ActivityId": "0HLILAIA7C0K3:0000000C",
  "TimeStamp": "2018-11-28T17:13:33Z",
  "ProcessId": 32027,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-11-28 20:13:33.590 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "215bea56-cd2c-4ddb-a18b-ed445861b35c",
  "ClientId": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "State": "kF5a0AOE3VzNyUuezima2HO7ihOrDKJJS9HzDlfe",
  "Scope": "openid profile email role api1"
}
2018-11-28 20:13:33.604 +03:00 [DBG] Augmenting SignInContext
2018-11-28 20:13:33.605 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 20:13:34.156 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:13:34.157 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:13:34.157 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:13:34.157 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:13:34.168 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:13:34.169 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:13:34.169 +03:00 [DBG] Start discovery request
2018-11-28 20:13:34.282 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:13:34.282 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:13:34.282 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:13:34.282 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:13:34.300 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:13:34.301 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:13:34.301 +03:00 [DBG] Start key discovery request
2018-11-28 20:13:52.543 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:13:52.543 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:15:39.902 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:15:39.902 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:15:39.902 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 20:15:39.903 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 20:15:39.903 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 20:15:39.903 +03:00 [DBG] Start authorize request
2018-11-28 20:15:39.903 +03:00 [DBG] User in authorize request: 215bea56-cd2c-4ddb-a18b-ed445861b35c
2018-11-28 20:15:39.903 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:15:39.903 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:15:39.903 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "215bea56-cd2c-4ddb-a18b-ed445861b35c",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "DabjFII4ajuJSypj14ynhoCQYSvaFu5PMsTP0w5S",
  "Nonce": "DabjFII4ajuJSypj14ynhoCQYSvaFu5PMsTP0w5S",
  "SessionId": "5c736ff82f6629d8076416d8887bcbaf",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "DabjFII4ajuJSypj14ynhoCQYSvaFu5PMsTP0w5S",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "DabjFII4ajuJSypj14ynhoCQYSvaFu5PMsTP0w5S"
  }
}
2018-11-28 20:15:39.908 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-11-28 20:15:39.908 +03:00 [DBG] Creating Implicit Flow response.
2018-11-28 20:15:39.909 +03:00 [DBG] Getting claims for access token for client: angular
2018-11-28 20:15:39.909 +03:00 [DBG] Getting claims for access token for subject: 215bea56-cd2c-4ddb-a18b-ed445861b35c
2018-11-28 20:15:39.911 +03:00 [DBG] Getting claims for identity token for subject: 215bea56-cd2c-4ddb-a18b-ed445861b35c and client: angular
2018-11-28 20:15:39.916 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "Endpoint": "Authorize",
  "SubjectId": "215bea56-cd2c-4ddb-a18b-ed445861b35c",
  "Scopes": "openid profile email role api1",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****CieQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****VHHg"
    }
  ],
  "ActivityId": "0HLILAIA7C0K3:0000000E",
  "TimeStamp": "2018-11-28T17:15:39Z",
  "ProcessId": 32027,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-11-28 20:15:39.916 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "215bea56-cd2c-4ddb-a18b-ed445861b35c",
  "ClientId": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "State": "DabjFII4ajuJSypj14ynhoCQYSvaFu5PMsTP0w5S",
  "Scope": "openid profile email role api1"
}
2018-11-28 20:15:40.601 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:15:40.602 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:15:40.602 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:15:40.602 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:15:40.602 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:15:40.602 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:15:40.602 +03:00 [DBG] Start discovery request
2018-11-28 20:15:40.646 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:15:40.646 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:15:40.646 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:15:40.646 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:15:40.646 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:15:40.646 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:15:40.646 +03:00 [DBG] Start key discovery request
2018-11-28 20:16:14.051 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:16:14.051 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:16:14.051 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 20:16:14.051 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 20:16:14.051 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 20:16:14.051 +03:00 [DBG] Start authorize request
2018-11-28 20:16:14.051 +03:00 [DBG] User in authorize request: 215bea56-cd2c-4ddb-a18b-ed445861b35c
2018-11-28 20:16:14.051 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:16:14.052 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:16:14.052 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "215bea56-cd2c-4ddb-a18b-ed445861b35c",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "LvFblF6mnkXhH0axXgOcw5vX3hg7NIEnvT9VeZEE",
  "Nonce": "LvFblF6mnkXhH0axXgOcw5vX3hg7NIEnvT9VeZEE",
  "SessionId": "5c736ff82f6629d8076416d8887bcbaf",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "LvFblF6mnkXhH0axXgOcw5vX3hg7NIEnvT9VeZEE",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "LvFblF6mnkXhH0axXgOcw5vX3hg7NIEnvT9VeZEE"
  }
}
2018-11-28 20:16:14.057 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-11-28 20:16:14.058 +03:00 [DBG] Creating Implicit Flow response.
2018-11-28 20:16:14.058 +03:00 [DBG] Getting claims for access token for client: angular
2018-11-28 20:16:14.058 +03:00 [DBG] Getting claims for access token for subject: 215bea56-cd2c-4ddb-a18b-ed445861b35c
2018-11-28 20:16:14.060 +03:00 [DBG] Getting claims for identity token for subject: 215bea56-cd2c-4ddb-a18b-ed445861b35c and client: angular
2018-11-28 20:16:14.062 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "Endpoint": "Authorize",
  "SubjectId": "215bea56-cd2c-4ddb-a18b-ed445861b35c",
  "Scopes": "openid profile email role api1",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****3kAA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****xe8A"
    }
  ],
  "ActivityId": "0HLILAIA7C0K3:0000000F",
  "TimeStamp": "2018-11-28T17:16:14Z",
  "ProcessId": 32027,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-11-28 20:16:14.062 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "215bea56-cd2c-4ddb-a18b-ed445861b35c",
  "ClientId": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "State": "LvFblF6mnkXhH0axXgOcw5vX3hg7NIEnvT9VeZEE",
  "Scope": "openid profile email role api1"
}
2018-11-28 20:16:14.658 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:16:14.658 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:16:14.658 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:16:14.658 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:16:14.659 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:16:14.659 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:16:14.659 +03:00 [DBG] Start discovery request
2018-11-28 20:16:14.746 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:16:14.747 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:16:14.747 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:16:14.747 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:16:14.748 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:16:14.748 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:16:14.748 +03:00 [DBG] Start key discovery request
2018-11-28 20:16:17.035 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:16:17.035 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:16:17.035 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-11-28 20:16:17.036 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-11-28 20:16:17.036 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-11-28 20:16:17.042 +03:00 [DBG] Processing signout request for 215bea56-cd2c-4ddb-a18b-ed445861b35c
2018-11-28 20:16:17.055 +03:00 [DBG] Start end session request validation
2018-11-28 20:16:17.062 +03:00 [DBG] Start identity token validation
2018-11-28 20:16:17.083 +03:00 [DBG] Client found: angular / angular
2018-11-28 20:16:17.134 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-11-28 20:16:17.138 +03:00 [DBG] Token validation success
{
  "ClientId": "angular",
  "ClientName": "angular",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1543425374,
    "exp": 1543425674,
    "iss": "http://localhost:5000",
    "aud": "angular",
    "nonce": "LvFblF6mnkXhH0axXgOcw5vX3hg7NIEnvT9VeZEE",
    "iat": 1543425374,
    "at_hash": "Vj3YyQFodT1zKSI8cVWyqA",
    "sid": "5c736ff82f6629d8076416d8887bcbaf",
    "sub": "215bea56-cd2c-4ddb-a18b-ed445861b35c",
    "auth_time": 1543425170,
    "idp": "local",
    "preferred_username": "ss@ss.com",
    "name": "ss@ss.com",
    "email": "test@test.com",
    "email_verified": false,
    "amr": "pwd"
  }
}
2018-11-28 20:16:17.149 +03:00 [INF] End session request validation success
{
  "ClientId": "angular",
  "ClientName": "angular",
  "SubjectId": "215bea56-cd2c-4ddb-a18b-ed445861b35c",
  "PostLogOutUri": "http://10.1.1.230:4200",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6ImU5ZWE4ZDQxYTNmNDEzNzM2MjY5YWZhZTkzMGY0NWYzIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1NDM0MjUzNzQsImV4cCI6MTU0MzQyNTY3NCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiYW5ndWxhciIsIm5vbmNlIjoiTHZGYmxGNm1ua1hoSDBheFhnT2N3NXZYM2hnN05JRW52VDlWZVpFRSIsImlhdCI6MTU0MzQyNTM3NCwiYXRfaGFzaCI6IlZqM1l5UUZvZFQxektTSThjVld5cUEiLCJzaWQiOiI1YzczNmZmODJmNjYyOWQ4MDc2NDE2ZDg4ODdiY2JhZiIsInN1YiI6IjIxNWJlYTU2LWNkMmMtNGRkYi1hMThiLWVkNDQ1ODYxYjM1YyIsImF1dGhfdGltZSI6MTU0MzQyNTE3MCwiaWRwIjoibG9jYWwiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJzc0Bzcy5jb20iLCJuYW1lIjoic3NAc3MuY29tIiwiZW1haWwiOiJ0ZXN0QHRlc3QuY29tIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJhbXIiOlsicHdkIl19.i9LC1m03SGV02kiT5L3YGhMHLKBRUzGoFOQNAFg5DWSFS68S-rqjM5sJkHnS24315l72Ue3FHaKQZyiY-aGS8UnscIph3q7fgwX73DxZZW1gByeqlGyzFkjy1YU6P0ni4NgkyqyjtGInUR-Tu3vv0WFDKKFHQwKrtHMJXIEEoBEmqq9Q-b6e3Bp6JFv-A5KrvhEykF7tZsYto2Jz5tsv7uWjTrqScmjE8a-B0kHkYqXjFMenhQSpD17Fw0k8G_liaw1XcimG2hnIZeQph-WSERjBqgNtmqkHqgxbA0HNZpDYpWRhpIqHQE124sV-1URZBOBdWYmhwnGZ2bjt_D3kAA",
    "post_logout_redirect_uri": "http://10.1.1.230:4200"
  }
}
2018-11-28 20:16:17.151 +03:00 [DBG] Success validating end session request from angular
2018-11-28 20:16:17.303 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:16:17.303 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:16:17.372 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-11-28 20:16:17.373 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-11-28 20:16:17.373 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-11-28 20:16:17.385 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "215bea56-cd2c-4ddb-a18b-ed445861b35c",
  "DisplayName": "ss@ss.com",
  "ActivityId": "0HLILAIA7C0K3:00000011",
  "TimeStamp": "2018-11-28T17:16:17Z",
  "ProcessId": 32027,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-11-28 20:16:17.731 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-11-28 20:16:17.734 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-11-28 20:16:17.734 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-11-28 20:16:17.737 +03:00 [DBG] Processing signout callback request
2018-11-28 20:16:17.748 +03:00 [DBG] Client front-channel logout URLs: http://10.1.1.230:4200?sid=5c736ff82f6629d8076416d8887bcbaf&iss=http%3A%2F%2Flocalhost%3A5000
2018-11-28 20:16:17.749 +03:00 [DBG] No client back-channel logout URLs
2018-11-28 20:16:17.749 +03:00 [INF] Successful signout callback.
2018-11-28 20:16:17.749 +03:00 [DBG] Client front-channel iframe urls: ["http://10.1.1.230:4200?sid=5c736ff82f6629d8076416d8887bcbaf&iss=http%3A%2F%2Flocalhost%3A5000"]
2018-11-28 20:16:17.749 +03:00 [DBG] No client back-channel iframe urls
2018-11-28 20:16:18.436 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:16:18.437 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:16:18.437 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:16:18.443 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:16:18.444 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:16:18.444 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:16:18.444 +03:00 [DBG] Start discovery request
2018-11-28 20:16:18.514 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:16:18.514 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:16:18.514 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:16:18.514 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:16:18.514 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:16:18.514 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:16:18.514 +03:00 [DBG] Start key discovery request
2018-11-28 20:16:20.146 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:16:20.146 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:16:20.146 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:16:20.146 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:16:20.147 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:16:20.147 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:16:20.147 +03:00 [DBG] Start discovery request
2018-11-28 20:16:20.196 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:16:20.196 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:16:20.196 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:16:20.196 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:16:20.196 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:16:20.196 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:16:20.197 +03:00 [DBG] Start key discovery request
2018-11-28 20:16:29.500 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 20:16:29.501 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 20:16:29.501 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 20:16:29.501 +03:00 [DBG] Start authorize request
2018-11-28 20:16:29.501 +03:00 [DBG] No user present in authorize request
2018-11-28 20:16:29.501 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:16:29.501 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:16:29.501 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "QB0KzrNBYEJnaOqz541uk1NvachviO9imx9xuvGk",
  "Nonce": "QB0KzrNBYEJnaOqz541uk1NvachviO9imx9xuvGk",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "QB0KzrNBYEJnaOqz541uk1NvachviO9imx9xuvGk",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "QB0KzrNBYEJnaOqz541uk1NvachviO9imx9xuvGk"
  }
}
2018-11-28 20:16:29.501 +03:00 [INF] Showing login: User is not authenticated
2018-11-28 20:16:29.521 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:16:29.522 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:17:45.069 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 20:17:45.103 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 20:17:45.106 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 20:17:45.106 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 20:17:45.106 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 20:17:45.106 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 20:17:52.051 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:17:52.060 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:17:52.060 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:17:52.073 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:17:52.220 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:17:52.221 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:17:52.227 +03:00 [DBG] Start discovery request
2018-11-28 20:17:52.339 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:17:52.340 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:17:52.341 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:17:52.341 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:17:52.347 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:17:52.348 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:17:52.351 +03:00 [DBG] Start key discovery request
2018-11-28 20:17:55.551 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 20:17:55.554 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 20:17:55.554 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 20:17:55.558 +03:00 [DBG] Start authorize request
2018-11-28 20:17:55.573 +03:00 [DBG] No user present in authorize request
2018-11-28 20:17:55.578 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:17:55.631 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:17:55.642 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "rYDP3C2BjJmi5RMxiaKmovkuyFrwQ8HFrIIoP6c1",
  "Nonce": "rYDP3C2BjJmi5RMxiaKmovkuyFrwQ8HFrIIoP6c1",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "rYDP3C2BjJmi5RMxiaKmovkuyFrwQ8HFrIIoP6c1",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "rYDP3C2BjJmi5RMxiaKmovkuyFrwQ8HFrIIoP6c1"
  }
}
2018-11-28 20:17:55.648 +03:00 [INF] Showing login: User is not authenticated
2018-11-28 20:17:55.845 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:17:55.847 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:18:16.763 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "ss@ss.com",
  "SubjectId": "9da19e9f-c27c-4aec-8bd2-8a32e02ee7fd",
  "DisplayName": "ss@ss.com",
  "Endpoint": "UI",
  "ActivityId": "0HLILALKR625P:00000006",
  "TimeStamp": "2018-11-28T17:18:16Z",
  "ProcessId": 4354,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-11-28 20:18:16.777 +03:00 [DBG] Augmenting SignInContext
2018-11-28 20:18:16.779 +03:00 [DBG] Adding idp claim with value: local
2018-11-28 20:18:16.779 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-28 20:18:16.815 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 20:18:16.870 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:18:16.871 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:18:16.871 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-11-28 20:18:16.872 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-11-28 20:18:16.872 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-11-28 20:18:16.880 +03:00 [DBG] Start authorize callback request
2018-11-28 20:18:16.887 +03:00 [DBG] User in authorize request: 9da19e9f-c27c-4aec-8bd2-8a32e02ee7fd
2018-11-28 20:18:16.887 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:18:16.887 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:18:16.887 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "9da19e9f-c27c-4aec-8bd2-8a32e02ee7fd",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "rYDP3C2BjJmi5RMxiaKmovkuyFrwQ8HFrIIoP6c1",
  "Nonce": "rYDP3C2BjJmi5RMxiaKmovkuyFrwQ8HFrIIoP6c1",
  "SessionId": "91299027059c0734c63b12a4b8859413",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "rYDP3C2BjJmi5RMxiaKmovkuyFrwQ8HFrIIoP6c1",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "rYDP3C2BjJmi5RMxiaKmovkuyFrwQ8HFrIIoP6c1"
  }
}
2018-11-28 20:18:16.941 +03:00 [DBG] user_consent grant with value: angular|9da19e9f-c27c-4aec-8bd2-8a32e02ee7fd not found in store.
2018-11-28 20:18:16.944 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-11-28 20:18:16.944 +03:00 [INF] Showing consent: User has not yet consented
2018-11-28 20:18:16.994 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:18:16.995 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:18:17.046 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:18:17.046 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:18:22.834 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:18:22.834 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:18:22.858 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:18:22.858 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:18:22.896 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:18:22.896 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:18:22.896 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-11-28 20:18:22.896 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-11-28 20:18:22.896 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-11-28 20:18:22.896 +03:00 [DBG] Start authorize callback request
2018-11-28 20:18:22.923 +03:00 [DBG] User in authorize request: 9da19e9f-c27c-4aec-8bd2-8a32e02ee7fd
2018-11-28 20:18:22.923 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:18:22.923 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:18:22.923 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "9da19e9f-c27c-4aec-8bd2-8a32e02ee7fd",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "rYDP3C2BjJmi5RMxiaKmovkuyFrwQ8HFrIIoP6c1",
  "Nonce": "rYDP3C2BjJmi5RMxiaKmovkuyFrwQ8HFrIIoP6c1",
  "SessionId": "91299027059c0734c63b12a4b8859413",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "rYDP3C2BjJmi5RMxiaKmovkuyFrwQ8HFrIIoP6c1",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "rYDP3C2BjJmi5RMxiaKmovkuyFrwQ8HFrIIoP6c1"
  }
}
2018-11-28 20:18:22.925 +03:00 [DBG] user_consent grant with value: angular|9da19e9f-c27c-4aec-8bd2-8a32e02ee7fd not found in store.
2018-11-28 20:18:22.925 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-11-28 20:18:22.932 +03:00 [INF] User consented to scopes: ["openid","profile","email","role","api1"]
2018-11-28 20:18:22.941 +03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email","role","api1"]
2018-11-28 20:18:22.944 +03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 9da19e9f-c27c-4aec-8bd2-8a32e02ee7fd
2018-11-28 20:18:22.959 +03:00 [DBG] Creating Implicit Flow response.
2018-11-28 20:18:22.969 +03:00 [DBG] Getting claims for access token for client: angular
2018-11-28 20:18:22.970 +03:00 [DBG] Getting claims for access token for subject: 9da19e9f-c27c-4aec-8bd2-8a32e02ee7fd
2018-11-28 20:18:23.135 +03:00 [DBG] Getting claims for identity token for subject: 9da19e9f-c27c-4aec-8bd2-8a32e02ee7fd and client: angular
2018-11-28 20:18:23.149 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "Endpoint": "Authorize",
  "SubjectId": "9da19e9f-c27c-4aec-8bd2-8a32e02ee7fd",
  "Scopes": "openid profile email role api1",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****hzLQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****Sf9A"
    }
  ],
  "ActivityId": "0HLILALKR625P:0000000A",
  "TimeStamp": "2018-11-28T17:18:23Z",
  "ProcessId": 4354,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-11-28 20:18:23.152 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "9da19e9f-c27c-4aec-8bd2-8a32e02ee7fd",
  "ClientId": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "State": "rYDP3C2BjJmi5RMxiaKmovkuyFrwQ8HFrIIoP6c1",
  "Scope": "openid profile email role api1"
}
2018-11-28 20:18:23.173 +03:00 [DBG] Augmenting SignInContext
2018-11-28 20:18:23.174 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 20:18:23.981 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:18:23.981 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:18:23.981 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:18:23.981 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:18:23.981 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:18:23.981 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:18:23.981 +03:00 [DBG] Start discovery request
2018-11-28 20:18:24.059 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:18:24.059 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:18:24.059 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:18:24.059 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:18:24.069 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:18:24.069 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:18:24.069 +03:00 [DBG] Start key discovery request
2018-11-28 20:18:36.659 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:18:36.659 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:18:36.659 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:18:36.659 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:18:36.659 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:18:36.659 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:18:36.659 +03:00 [DBG] Start discovery request
2018-11-28 20:18:36.730 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:18:36.730 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:18:36.730 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:18:36.730 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:18:36.731 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:18:36.731 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:18:36.731 +03:00 [DBG] Start key discovery request
2018-11-28 20:18:58.201 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:18:58.201 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:18:58.201 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 20:18:58.201 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 20:18:58.201 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 20:18:58.201 +03:00 [DBG] Start authorize request
2018-11-28 20:18:58.201 +03:00 [DBG] User in authorize request: 9da19e9f-c27c-4aec-8bd2-8a32e02ee7fd
2018-11-28 20:18:58.201 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:18:58.202 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:18:58.202 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "9da19e9f-c27c-4aec-8bd2-8a32e02ee7fd",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "Fh6YSsBtycDtThGf2Oiv6rEdCwkcVQp7UElgqMPf",
  "Nonce": "Fh6YSsBtycDtThGf2Oiv6rEdCwkcVQp7UElgqMPf",
  "SessionId": "91299027059c0734c63b12a4b8859413",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "Fh6YSsBtycDtThGf2Oiv6rEdCwkcVQp7UElgqMPf",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "Fh6YSsBtycDtThGf2Oiv6rEdCwkcVQp7UElgqMPf"
  }
}
2018-11-28 20:18:58.216 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-11-28 20:18:58.217 +03:00 [DBG] Creating Implicit Flow response.
2018-11-28 20:18:58.217 +03:00 [DBG] Getting claims for access token for client: angular
2018-11-28 20:18:58.217 +03:00 [DBG] Getting claims for access token for subject: 9da19e9f-c27c-4aec-8bd2-8a32e02ee7fd
2018-11-28 20:18:58.219 +03:00 [DBG] Getting claims for identity token for subject: 9da19e9f-c27c-4aec-8bd2-8a32e02ee7fd and client: angular
2018-11-28 20:18:58.221 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "Endpoint": "Authorize",
  "SubjectId": "9da19e9f-c27c-4aec-8bd2-8a32e02ee7fd",
  "Scopes": "openid profile email role api1",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****pPAA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****qLzA"
    }
  ],
  "ActivityId": "0HLILALKR625P:0000000B",
  "TimeStamp": "2018-11-28T17:18:58Z",
  "ProcessId": 4354,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-11-28 20:18:58.223 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "9da19e9f-c27c-4aec-8bd2-8a32e02ee7fd",
  "ClientId": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "State": "Fh6YSsBtycDtThGf2Oiv6rEdCwkcVQp7UElgqMPf",
  "Scope": "openid profile email role api1"
}
2018-11-28 20:18:58.823 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:18:58.823 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:18:58.823 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:18:58.823 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:18:58.823 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:18:58.823 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:18:58.823 +03:00 [DBG] Start discovery request
2018-11-28 20:18:58.897 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:18:58.897 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:18:58.897 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:18:58.897 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:18:58.897 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:18:58.897 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:18:58.897 +03:00 [DBG] Start key discovery request
2018-11-28 20:19:11.669 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://10.1.1.230:4200
2018-11-28 20:19:11.669 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:19:11.670 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:19:11.670 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-11-28 20:19:11.674 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-11-28 20:19:11.674 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-11-28 20:19:11.685 +03:00 [DBG] Start userinfo request
2018-11-28 20:19:11.690 +03:00 [DBG] Bearer token found in header
2018-11-28 20:19:11.735 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-11-28 20:19:11.738 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1543425538,
    "exp": 1543429138,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "api1"
    ],
    "client_id": "angular",
    "sub": "9da19e9f-c27c-4aec-8bd2-8a32e02ee7fd",
    "auth_time": 1543425496,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "email",
      "role",
      "api1"
    ],
    "amr": "pwd"
  }
}
2018-11-28 20:19:11.743 +03:00 [DBG] Creating userinfo response
2018-11-28 20:19:11.746 +03:00 [DBG] Scopes in access token: openid profile email role api1
2018-11-28 20:19:11.748 +03:00 [DBG] Scopes in access token: openid profile email role api1
2018-11-28 20:19:11.750 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at email email_verified role admin user
2018-11-28 20:19:11.751 +03:00 [DBG] Scopes in access token: openid profile email role api1
2018-11-28 20:19:11.751 +03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-11-28 20:19:11.752 +03:00 [DBG] End userinfo request
2018-11-28 20:21:14.282 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 20:21:14.323 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 20:21:14.326 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 20:21:14.327 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 20:21:14.327 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 20:21:14.327 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 20:21:16.173 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:21:16.191 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:21:32.674 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 20:21:32.714 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 20:21:32.716 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 20:21:32.717 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 20:21:32.717 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 20:21:32.717 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 20:21:34.505 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:21:34.522 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:21:47.827 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:21:47.827 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:21:50.951 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:21:50.951 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:21:52.474 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:21:52.475 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:21:52.482 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:21:55.026 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:21:55.027 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:21:56.239 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:21:56.240 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:21:56.410 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-11-28 20:21:56.413 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-11-28 20:21:56.413 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-11-28 20:21:56.440 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "9da19e9f-c27c-4aec-8bd2-8a32e02ee7fd",
  "DisplayName": "ss@ss.com",
  "ActivityId": "0HLILANOLPTG6:00000005",
  "TimeStamp": "2018-11-28T17:21:56Z",
  "ProcessId": 6909,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-11-28 20:21:59.473 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:21:59.477 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:21:59.477 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:21:59.481 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:21:59.484 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:21:59.485 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:21:59.488 +03:00 [DBG] Start discovery request
2018-11-28 20:21:59.553 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:21:59.553 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:21:59.553 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:21:59.553 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:21:59.554 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:21:59.555 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:21:59.560 +03:00 [DBG] Start key discovery request
2018-11-28 20:22:01.490 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 20:22:01.493 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 20:22:01.493 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 20:22:01.497 +03:00 [DBG] Start authorize request
2018-11-28 20:22:01.505 +03:00 [DBG] No user present in authorize request
2018-11-28 20:22:01.509 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:22:01.552 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:22:01.563 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "dN9jGgkgRjO8dTwjzFOFTb4se5l5xBsm4XCkLD5l",
  "Nonce": "dN9jGgkgRjO8dTwjzFOFTb4se5l5xBsm4XCkLD5l",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "dN9jGgkgRjO8dTwjzFOFTb4se5l5xBsm4XCkLD5l",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "dN9jGgkgRjO8dTwjzFOFTb4se5l5xBsm4XCkLD5l"
  }
}
2018-11-28 20:22:01.569 +03:00 [INF] Showing login: User is not authenticated
2018-11-28 20:22:01.614 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:22:01.614 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:22:15.092 +03:00 [DBG] Augmenting SignInContext
2018-11-28 20:22:15.094 +03:00 [DBG] Adding idp claim with value: local
2018-11-28 20:22:15.094 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-28 20:22:15.095 +03:00 [DBG] Adding auth_time claim with value: 1543425735
2018-11-28 20:22:15.113 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 20:22:15.133 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:22:15.134 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:22:15.134 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-11-28 20:22:15.134 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-11-28 20:22:15.134 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-11-28 20:22:15.140 +03:00 [DBG] Start authorize callback request
2018-11-28 20:22:15.143 +03:00 [DBG] User in authorize request: test@test.com
2018-11-28 20:22:15.144 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:22:15.144 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:22:15.144 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "test@test.com",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "dN9jGgkgRjO8dTwjzFOFTb4se5l5xBsm4XCkLD5l",
  "Nonce": "dN9jGgkgRjO8dTwjzFOFTb4se5l5xBsm4XCkLD5l",
  "SessionId": "724b83d56bcdbe806a746f381c6844f5",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "dN9jGgkgRjO8dTwjzFOFTb4se5l5xBsm4XCkLD5l",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "dN9jGgkgRjO8dTwjzFOFTb4se5l5xBsm4XCkLD5l"
  }
}
2018-11-28 20:22:15.177 +03:00 [INF] Showing login: User is not active
2018-11-28 20:22:15.240 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:22:15.241 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:22:15.242 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:22:15.244 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:22:22.430 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:22:22.430 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:22:22.431 +03:00 [DBG] Augmenting SignInContext
2018-11-28 20:22:22.432 +03:00 [DBG] Adding idp claim with value: local
2018-11-28 20:22:22.432 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-28 20:22:22.432 +03:00 [DBG] Adding auth_time claim with value: 1543425742
2018-11-28 20:22:22.432 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 20:22:22.455 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:22:22.455 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:22:22.455 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-11-28 20:22:22.455 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-11-28 20:22:22.455 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-11-28 20:22:22.455 +03:00 [DBG] Start authorize callback request
2018-11-28 20:22:22.455 +03:00 [DBG] User in authorize request: test@test.com
2018-11-28 20:22:22.455 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:22:22.455 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:22:22.456 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "test@test.com",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "dN9jGgkgRjO8dTwjzFOFTb4se5l5xBsm4XCkLD5l",
  "Nonce": "dN9jGgkgRjO8dTwjzFOFTb4se5l5xBsm4XCkLD5l",
  "SessionId": "73e9ef6036dc84cc09caf96dca856d8a",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "dN9jGgkgRjO8dTwjzFOFTb4se5l5xBsm4XCkLD5l",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "dN9jGgkgRjO8dTwjzFOFTb4se5l5xBsm4XCkLD5l"
  }
}
2018-11-28 20:22:22.458 +03:00 [INF] Showing login: User is not active
2018-11-28 20:22:22.472 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:22:22.472 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:22:22.472 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:22:22.472 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:22:24.640 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:22:24.640 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:22:25.241 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:22:25.241 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:22:25.241 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:22:27.959 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:22:27.959 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:22:29.171 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:22:29.171 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:22:29.172 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-11-28 20:22:29.172 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-11-28 20:22:29.172 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-11-28 20:22:29.172 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "test@test.com",
  "DisplayName": "test@test.com",
  "ActivityId": "0HLILANOLPTG6:00000013",
  "TimeStamp": "2018-11-28T17:22:29Z",
  "ProcessId": 6909,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-11-28 20:22:33.854 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:22:33.855 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:22:33.855 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:22:33.855 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:22:33.855 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:22:33.855 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:22:33.855 +03:00 [DBG] Start discovery request
2018-11-28 20:22:33.898 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:22:33.899 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:22:33.899 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:22:33.899 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:22:33.909 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:22:33.910 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:22:33.910 +03:00 [DBG] Start key discovery request
2018-11-28 20:22:35.628 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-11-28 20:22:35.630 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-11-28 20:22:35.630 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-11-28 20:22:35.635 +03:00 [DBG] Processing signout request for anonymous
2018-11-28 20:22:35.641 +03:00 [DBG] Start end session request validation
2018-11-28 20:22:35.646 +03:00 [DBG] Start identity token validation
2018-11-28 20:22:35.676 +03:00 [DBG] Client found: angular / angular
2018-11-28 20:22:35.709 +03:00 [ERR] User marked as not active: 9da19e9f-c27c-4aec-8bd2-8a32e02ee7fd
2018-11-28 20:22:35.711 +03:00 [INF] End session request validation failure: Error validating id token hint
{
  "SubjectId": "unknown",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6ImU5ZWE4ZDQxYTNmNDEzNzM2MjY5YWZhZTkzMGY0NWYzIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1NDM0MjU1MzgsImV4cCI6MTU0MzQyNTgzOCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiYW5ndWxhciIsIm5vbmNlIjoiRmg2WVNzQnR5Y0R0VGhHZjJPaXY2ckVkQ3drY1ZRcDdVRWxncU1QZiIsImlhdCI6MTU0MzQyNTUzOCwiYXRfaGFzaCI6IlpYUktDZ3UwdHJ0OWQxNFpNSG9nSGciLCJzaWQiOiI5MTI5OTAyNzA1OWMwNzM0YzYzYjEyYTRiODg1OTQxMyIsInN1YiI6IjlkYTE5ZTlmLWMyN2MtNGFlYy04YmQyLThhMzJlMDJlZTdmZCIsImF1dGhfdGltZSI6MTU0MzQyNTQ5NiwiaWRwIjoibG9jYWwiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJzc0Bzcy5jb20iLCJuYW1lIjoic3NAc3MuY29tIiwiZW1haWwiOiJ0ZXN0QHRlc3QuY29tIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJhbXIiOlsicHdkIl19.SQ__YM5QmodENv0ETqeOoKewiIPvHHxTaOaC2_CNm709DxWAjDxYcKqFfEg7LMhIPupW031acrxCz_V5VakX1qxMr2GnI_XNXW4aM98gD8j2gbFgUkaBEe9FHfHz-3QnItgw1GyOlIo7FJOW9YPzrLL8ujSKf_hrleqdSnQyW3uFss4l43wqEUK3R_JHwLwJzFAbFIzPT_W5w8ipzrAeMPp_PBHmDzg52kZe38RpCegYI-opzXhQ5PhfKPB0eTNhvvCbll2kfjbZl9PFXRzBBAPmBDD1JpNsKQzFXGIIP9eJPg_Xh749jz3UQufLG-3DoTgJ39zZajJjbpAZZrpPAA",
    "post_logout_redirect_uri": "http://10.1.1.230:4200"
  }
}
2018-11-28 20:22:35.712 +03:00 [ERR] Error processing end session request Invalid request
2018-11-28 20:22:46.408 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:22:46.408 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:22:46.408 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:22:46.408 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:22:46.409 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:22:46.409 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:22:46.409 +03:00 [DBG] Start discovery request
2018-11-28 20:22:46.446 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:22:46.446 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:22:46.446 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:22:46.446 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:22:46.446 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:22:46.446 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:22:46.446 +03:00 [DBG] Start key discovery request
2018-11-28 20:22:48.234 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 20:22:48.234 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 20:22:48.235 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 20:22:48.235 +03:00 [DBG] Start authorize request
2018-11-28 20:22:48.235 +03:00 [DBG] No user present in authorize request
2018-11-28 20:22:48.235 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:22:48.235 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:22:48.235 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "IzdcXvxBecRHoUYtOP3yPaaEyMEOT3OQb6GoJAfk",
  "Nonce": "IzdcXvxBecRHoUYtOP3yPaaEyMEOT3OQb6GoJAfk",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "IzdcXvxBecRHoUYtOP3yPaaEyMEOT3OQb6GoJAfk",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "IzdcXvxBecRHoUYtOP3yPaaEyMEOT3OQb6GoJAfk"
  }
}
2018-11-28 20:22:48.235 +03:00 [INF] Showing login: User is not authenticated
2018-11-28 20:22:48.274 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:22:48.274 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:22:57.174 +03:00 [DBG] Augmenting SignInContext
2018-11-28 20:22:57.174 +03:00 [DBG] Adding idp claim with value: local
2018-11-28 20:22:57.175 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-28 20:22:57.175 +03:00 [DBG] Adding auth_time claim with value: 1543425777
2018-11-28 20:22:57.175 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 20:22:57.194 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:22:57.194 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:22:57.194 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-11-28 20:22:57.194 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-11-28 20:22:57.194 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-11-28 20:22:57.194 +03:00 [DBG] Start authorize callback request
2018-11-28 20:22:57.194 +03:00 [DBG] User in authorize request: test@test.com
2018-11-28 20:22:57.194 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:22:57.194 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:22:57.194 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "test@test.com",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "IzdcXvxBecRHoUYtOP3yPaaEyMEOT3OQb6GoJAfk",
  "Nonce": "IzdcXvxBecRHoUYtOP3yPaaEyMEOT3OQb6GoJAfk",
  "SessionId": "d3653fc9e0565a06e182fa9a48bf8eda",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "IzdcXvxBecRHoUYtOP3yPaaEyMEOT3OQb6GoJAfk",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "IzdcXvxBecRHoUYtOP3yPaaEyMEOT3OQb6GoJAfk"
  }
}
2018-11-28 20:22:57.195 +03:00 [INF] Showing login: User is not active
2018-11-28 20:22:57.213 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:22:57.214 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:22:57.214 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:22:57.214 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:23:34.939 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 20:23:34.974 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 20:23:34.977 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 20:23:34.977 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 20:23:34.978 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 20:23:34.978 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 20:23:36.757 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:23:36.774 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:23:41.864 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:23:41.870 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:23:41.870 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:23:41.872 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:23:41.882 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:23:41.883 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:23:41.886 +03:00 [DBG] Start discovery request
2018-11-28 20:23:41.976 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:23:41.978 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:23:41.978 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:23:41.979 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:23:41.981 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:23:41.982 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:23:41.985 +03:00 [DBG] Start key discovery request
2018-11-28 20:23:44.728 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:23:44.729 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:23:44.729 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 20:23:44.731 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 20:23:44.731 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 20:23:44.735 +03:00 [DBG] Start authorize request
2018-11-28 20:23:44.755 +03:00 [DBG] User in authorize request: test@test.com
2018-11-28 20:23:44.760 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:23:44.803 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:23:44.817 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "test@test.com",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "iBuWJORHCFrDvU0wBJyfpXt5Gp62ejmbhF84Rhxo",
  "Nonce": "iBuWJORHCFrDvU0wBJyfpXt5Gp62ejmbhF84Rhxo",
  "SessionId": "d3653fc9e0565a06e182fa9a48bf8eda",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "iBuWJORHCFrDvU0wBJyfpXt5Gp62ejmbhF84Rhxo",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "iBuWJORHCFrDvU0wBJyfpXt5Gp62ejmbhF84Rhxo"
  }
}
2018-11-28 20:23:45.519 +03:00 [INF] Showing login: User is not active
2018-11-28 20:23:45.539 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:23:45.540 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:23:45.677 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:23:45.678 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:23:51.220 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:23:51.220 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:23:52.595 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:23:52.595 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:23:52.712 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-11-28 20:23:52.713 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-11-28 20:23:52.714 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-11-28 20:23:52.743 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "test@test.com",
  "DisplayName": "test@test.com",
  "ActivityId": "0HLILAOT3V5BC:00000005",
  "TimeStamp": "2018-11-28T17:23:52Z",
  "ProcessId": 8289,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-11-28 20:23:56.087 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:23:56.087 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:23:56.087 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:23:56.087 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:23:56.088 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:23:56.088 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:23:56.088 +03:00 [DBG] Start discovery request
2018-11-28 20:23:56.128 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:23:56.128 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:23:56.128 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:23:56.129 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:23:56.139 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:23:56.147 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:23:56.147 +03:00 [DBG] Start key discovery request
2018-11-28 20:23:57.961 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 20:23:57.961 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 20:23:57.962 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 20:23:57.962 +03:00 [DBG] Start authorize request
2018-11-28 20:23:57.963 +03:00 [DBG] No user present in authorize request
2018-11-28 20:23:57.963 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:23:57.964 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:23:57.964 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "nDQll60IBm9ihheC9BSSASMcET3CRDytSrAxOyA7",
  "Nonce": "nDQll60IBm9ihheC9BSSASMcET3CRDytSrAxOyA7",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "nDQll60IBm9ihheC9BSSASMcET3CRDytSrAxOyA7",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "nDQll60IBm9ihheC9BSSASMcET3CRDytSrAxOyA7"
  }
}
2018-11-28 20:23:57.964 +03:00 [INF] Showing login: User is not authenticated
2018-11-28 20:23:57.980 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:23:57.980 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:24:13.226 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "ss@ss.com",
  "SubjectId": "de3c09b7-f5b5-4fec-861a-401d4d6cc638",
  "DisplayName": "ss@ss.com",
  "Endpoint": "UI",
  "ActivityId": "0HLILAOT3V5BC:0000000A",
  "TimeStamp": "2018-11-28T17:24:13Z",
  "ProcessId": 8289,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-11-28 20:24:13.236 +03:00 [DBG] Augmenting SignInContext
2018-11-28 20:24:13.238 +03:00 [DBG] Adding idp claim with value: local
2018-11-28 20:24:13.239 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-28 20:24:13.257 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 20:24:13.280 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:24:13.280 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:24:13.280 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-11-28 20:24:13.281 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-11-28 20:24:13.281 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-11-28 20:24:13.286 +03:00 [DBG] Start authorize callback request
2018-11-28 20:24:13.289 +03:00 [DBG] User in authorize request: de3c09b7-f5b5-4fec-861a-401d4d6cc638
2018-11-28 20:24:13.289 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:24:13.289 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:24:13.290 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "de3c09b7-f5b5-4fec-861a-401d4d6cc638",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "nDQll60IBm9ihheC9BSSASMcET3CRDytSrAxOyA7",
  "Nonce": "nDQll60IBm9ihheC9BSSASMcET3CRDytSrAxOyA7",
  "SessionId": "413fb2dc5e8cc2fa50a8e049390130aa",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "nDQll60IBm9ihheC9BSSASMcET3CRDytSrAxOyA7",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "nDQll60IBm9ihheC9BSSASMcET3CRDytSrAxOyA7"
  }
}
2018-11-28 20:24:13.300 +03:00 [DBG] user_consent grant with value: angular|de3c09b7-f5b5-4fec-861a-401d4d6cc638 not found in store.
2018-11-28 20:24:13.301 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-11-28 20:24:13.301 +03:00 [INF] Showing consent: User has not yet consented
2018-11-28 20:24:13.314 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:24:13.314 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:24:13.345 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:24:13.346 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:24:15.742 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:24:15.743 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:24:15.769 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:24:15.770 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:24:15.793 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:24:15.793 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:24:15.793 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-11-28 20:24:15.793 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-11-28 20:24:15.793 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-11-28 20:24:15.793 +03:00 [DBG] Start authorize callback request
2018-11-28 20:24:15.827 +03:00 [DBG] User in authorize request: de3c09b7-f5b5-4fec-861a-401d4d6cc638
2018-11-28 20:24:15.828 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:24:15.828 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:24:15.829 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "de3c09b7-f5b5-4fec-861a-401d4d6cc638",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "nDQll60IBm9ihheC9BSSASMcET3CRDytSrAxOyA7",
  "Nonce": "nDQll60IBm9ihheC9BSSASMcET3CRDytSrAxOyA7",
  "SessionId": "413fb2dc5e8cc2fa50a8e049390130aa",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "nDQll60IBm9ihheC9BSSASMcET3CRDytSrAxOyA7",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "nDQll60IBm9ihheC9BSSASMcET3CRDytSrAxOyA7"
  }
}
2018-11-28 20:24:15.830 +03:00 [DBG] user_consent grant with value: angular|de3c09b7-f5b5-4fec-861a-401d4d6cc638 not found in store.
2018-11-28 20:24:15.830 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-11-28 20:24:15.837 +03:00 [INF] User consented to scopes: ["openid","profile","email","role","api1"]
2018-11-28 20:24:15.849 +03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email","role","api1"]
2018-11-28 20:24:15.852 +03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: de3c09b7-f5b5-4fec-861a-401d4d6cc638
2018-11-28 20:24:15.877 +03:00 [DBG] Creating Implicit Flow response.
2018-11-28 20:24:15.887 +03:00 [DBG] Getting claims for access token for client: angular
2018-11-28 20:24:15.888 +03:00 [DBG] Getting claims for access token for subject: de3c09b7-f5b5-4fec-861a-401d4d6cc638
2018-11-28 20:24:16.048 +03:00 [DBG] Getting claims for identity token for subject: de3c09b7-f5b5-4fec-861a-401d4d6cc638 and client: angular
2018-11-28 20:24:16.061 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "Endpoint": "Authorize",
  "SubjectId": "de3c09b7-f5b5-4fec-861a-401d4d6cc638",
  "Scopes": "openid profile email role api1",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****a34g"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****r2dw"
    }
  ],
  "ActivityId": "0HLILAOT3V5BC:0000000E",
  "TimeStamp": "2018-11-28T17:24:16Z",
  "ProcessId": 8289,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-11-28 20:24:16.064 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "de3c09b7-f5b5-4fec-861a-401d4d6cc638",
  "ClientId": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "State": "nDQll60IBm9ihheC9BSSASMcET3CRDytSrAxOyA7",
  "Scope": "openid profile email role api1"
}
2018-11-28 20:24:16.077 +03:00 [DBG] Augmenting SignInContext
2018-11-28 20:24:16.077 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 20:24:16.730 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:24:16.730 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:24:16.730 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:24:16.730 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:24:16.730 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:24:16.730 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:24:16.730 +03:00 [DBG] Start discovery request
2018-11-28 20:24:16.779 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:24:16.779 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:24:16.779 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:24:16.779 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:24:16.779 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:24:16.779 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:24:16.779 +03:00 [DBG] Start key discovery request
2018-11-28 20:24:50.160 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:24:50.160 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:24:50.160 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 20:24:50.160 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 20:24:50.160 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 20:24:50.160 +03:00 [DBG] Start authorize request
2018-11-28 20:24:50.160 +03:00 [DBG] User in authorize request: de3c09b7-f5b5-4fec-861a-401d4d6cc638
2018-11-28 20:24:50.160 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:24:50.160 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:24:50.161 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "de3c09b7-f5b5-4fec-861a-401d4d6cc638",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "8eHgKRSZW2yXPVrUGmSRdgs0PBHEycU53x9BOmOD",
  "Nonce": "8eHgKRSZW2yXPVrUGmSRdgs0PBHEycU53x9BOmOD",
  "SessionId": "413fb2dc5e8cc2fa50a8e049390130aa",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "8eHgKRSZW2yXPVrUGmSRdgs0PBHEycU53x9BOmOD",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "8eHgKRSZW2yXPVrUGmSRdgs0PBHEycU53x9BOmOD"
  }
}
2018-11-28 20:24:50.172 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-11-28 20:24:50.172 +03:00 [DBG] Creating Implicit Flow response.
2018-11-28 20:24:50.173 +03:00 [DBG] Getting claims for access token for client: angular
2018-11-28 20:24:50.173 +03:00 [DBG] Getting claims for access token for subject: de3c09b7-f5b5-4fec-861a-401d4d6cc638
2018-11-28 20:24:50.175 +03:00 [DBG] Getting claims for identity token for subject: de3c09b7-f5b5-4fec-861a-401d4d6cc638 and client: angular
2018-11-28 20:24:50.177 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "Endpoint": "Authorize",
  "SubjectId": "de3c09b7-f5b5-4fec-861a-401d4d6cc638",
  "Scopes": "openid profile email role api1",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****2sYQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****s8vw"
    }
  ],
  "ActivityId": "0HLILAOT3V5BC:0000000F",
  "TimeStamp": "2018-11-28T17:24:50Z",
  "ProcessId": 8289,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-11-28 20:24:50.177 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "de3c09b7-f5b5-4fec-861a-401d4d6cc638",
  "ClientId": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "State": "8eHgKRSZW2yXPVrUGmSRdgs0PBHEycU53x9BOmOD",
  "Scope": "openid profile email role api1"
}
2018-11-28 20:24:50.672 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:24:50.672 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:24:50.672 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:24:50.673 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:24:50.673 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:24:50.673 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:24:50.673 +03:00 [DBG] Start discovery request
2018-11-28 20:24:50.725 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:24:50.726 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:24:50.726 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:24:50.726 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:24:50.726 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:24:50.726 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:24:50.726 +03:00 [DBG] Start key discovery request
2018-11-28 20:25:13.325 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:25:13.326 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:25:13.326 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-11-28 20:25:13.327 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-11-28 20:25:13.327 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-11-28 20:25:13.331 +03:00 [DBG] Processing signout request for de3c09b7-f5b5-4fec-861a-401d4d6cc638
2018-11-28 20:25:13.337 +03:00 [DBG] Start end session request validation
2018-11-28 20:25:13.344 +03:00 [DBG] Start identity token validation
2018-11-28 20:25:13.359 +03:00 [DBG] Client found: angular / angular
2018-11-28 20:25:13.382 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-11-28 20:25:13.385 +03:00 [DBG] Token validation success
{
  "ClientId": "angular",
  "ClientName": "angular",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1543425890,
    "exp": 1543426190,
    "iss": "http://localhost:5000",
    "aud": "angular",
    "nonce": "8eHgKRSZW2yXPVrUGmSRdgs0PBHEycU53x9BOmOD",
    "iat": 1543425890,
    "at_hash": "Bp4FiqJOAp_Esz_0esZP4w",
    "sid": "413fb2dc5e8cc2fa50a8e049390130aa",
    "sub": "de3c09b7-f5b5-4fec-861a-401d4d6cc638",
    "auth_time": 1543425853,
    "idp": "local",
    "preferred_username": "ss@ss.com",
    "name": "ss@ss.com",
    "email": "test@test.com",
    "email_verified": false,
    "amr": "pwd"
  }
}
2018-11-28 20:25:13.391 +03:00 [INF] End session request validation success
{
  "ClientId": "angular",
  "ClientName": "angular",
  "SubjectId": "de3c09b7-f5b5-4fec-861a-401d4d6cc638",
  "PostLogOutUri": "http://10.1.1.230:4200",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6ImU5ZWE4ZDQxYTNmNDEzNzM2MjY5YWZhZTkzMGY0NWYzIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1NDM0MjU4OTAsImV4cCI6MTU0MzQyNjE5MCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiYW5ndWxhciIsIm5vbmNlIjoiOGVIZ0tSU1pXMnlYUFZyVUdtU1JkZ3MwUEJIRXljVTUzeDlCT21PRCIsImlhdCI6MTU0MzQyNTg5MCwiYXRfaGFzaCI6IkJwNEZpcUpPQXBfRXN6XzBlc1pQNHciLCJzaWQiOiI0MTNmYjJkYzVlOGNjMmZhNTBhOGUwNDkzOTAxMzBhYSIsInN1YiI6ImRlM2MwOWI3LWY1YjUtNGZlYy04NjFhLTQwMWQ0ZDZjYzYzOCIsImF1dGhfdGltZSI6MTU0MzQyNTg1MywiaWRwIjoibG9jYWwiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJzc0Bzcy5jb20iLCJuYW1lIjoic3NAc3MuY29tIiwiZW1haWwiOiJ0ZXN0QHRlc3QuY29tIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJhbXIiOlsicHdkIl19.HcJekIjhb753_8Iljb3IPpeLcOKZxmvDJPmaddRGRqmDDhsxFN4bP2LUMTMm3hFdI4ryEZAVvcc2qZUi8v-4NB8eVkmhxZAmO1OLQrS64CT1tlBGyhZH-MxizIX4fni41UCLezMdmBKGriVwHklYvBGIbRD11ve7q3EcUX4AUS4oDPzBPWEPVmJYKAa1KekkRthKBZ1gy_fVoSf6_GcOswE8U2YeFehqIZQxDJq1BM_nvZfugz2PIixUranGgtX7emVUT3Q_rbf6IimOsiN5n1y54o3PVw6h-bOy6Ry4JICmNkeg0B4m-MC8mP_grDKmVSjUtAZkmOCSXtUa8k2sYQ",
    "post_logout_redirect_uri": "http://10.1.1.230:4200"
  }
}
2018-11-28 20:25:13.391 +03:00 [DBG] Success validating end session request from angular
2018-11-28 20:25:13.413 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:25:13.413 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:25:13.421 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-11-28 20:25:13.421 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-11-28 20:25:13.421 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-11-28 20:25:13.421 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "de3c09b7-f5b5-4fec-861a-401d4d6cc638",
  "DisplayName": "ss@ss.com",
  "ActivityId": "0HLILAOT3V5BC:00000011",
  "TimeStamp": "2018-11-28T17:25:13Z",
  "ProcessId": 8289,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-11-28 20:25:13.557 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-11-28 20:25:13.560 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-11-28 20:25:13.560 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-11-28 20:25:13.564 +03:00 [DBG] Processing signout callback request
2018-11-28 20:25:13.573 +03:00 [DBG] Client front-channel logout URLs: http://10.1.1.230:4200?sid=413fb2dc5e8cc2fa50a8e049390130aa&iss=http%3A%2F%2Flocalhost%3A5000
2018-11-28 20:25:13.574 +03:00 [DBG] No client back-channel logout URLs
2018-11-28 20:25:13.574 +03:00 [INF] Successful signout callback.
2018-11-28 20:25:13.574 +03:00 [DBG] Client front-channel iframe urls: ["http://10.1.1.230:4200?sid=413fb2dc5e8cc2fa50a8e049390130aa&iss=http%3A%2F%2Flocalhost%3A5000"]
2018-11-28 20:25:13.574 +03:00 [DBG] No client back-channel iframe urls
2018-11-28 20:25:14.139 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:25:14.139 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:25:14.139 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:25:14.139 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:25:14.139 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:25:14.139 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:25:14.140 +03:00 [DBG] Start discovery request
2018-11-28 20:25:14.209 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:25:14.210 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:25:14.210 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:25:14.210 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:25:14.210 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:25:14.210 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:25:14.210 +03:00 [DBG] Start key discovery request
2018-11-28 20:25:22.471 +03:00 [ERR] An unhandled exception has occurred while executing the request
System.ArgumentNullException: Value cannot be null.
Parameter name: stringToEscape
   at System.Uri.EscapeDataString(String stringToEscape)
   at Microsoft.AspNetCore.Http.Internal.ResponseCookies.Append(String key, String value)
   at IdentityServer4.Quickstart.UI.AccountController.Login(LoginInputModel model, String button) in /home/demmy/Documents/SSO_PASSWORDLESS/Quickstart/Account/AccountController.cs:line 127
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-11-28 20:25:38.551 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:25:38.551 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:25:38.551 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:25:38.551 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:25:38.552 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:25:38.552 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:25:38.552 +03:00 [DBG] Start discovery request
2018-11-28 20:25:38.629 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:25:38.629 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:25:38.629 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:25:38.629 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:25:38.629 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:25:38.629 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:25:38.630 +03:00 [DBG] Start key discovery request
2018-11-28 20:25:40.439 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 20:25:40.440 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 20:25:40.440 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 20:25:40.440 +03:00 [DBG] Start authorize request
2018-11-28 20:25:40.440 +03:00 [DBG] No user present in authorize request
2018-11-28 20:25:40.440 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:25:40.441 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:25:40.441 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "ata3T3rFtg3iqzHfM9mN91CI88QS5jDVejdBGrZY",
  "Nonce": "ata3T3rFtg3iqzHfM9mN91CI88QS5jDVejdBGrZY",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "ata3T3rFtg3iqzHfM9mN91CI88QS5jDVejdBGrZY",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "ata3T3rFtg3iqzHfM9mN91CI88QS5jDVejdBGrZY"
  }
}
2018-11-28 20:25:40.441 +03:00 [INF] Showing login: User is not authenticated
2018-11-28 20:25:40.458 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:25:40.458 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:25:56.412 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "ss@ss.com",
  "SubjectId": "de3c09b7-f5b5-4fec-861a-401d4d6cc638",
  "DisplayName": "ss@ss.com",
  "Endpoint": "UI",
  "ActivityId": "0HLILAOT3V5BC:00000019",
  "TimeStamp": "2018-11-28T17:25:56Z",
  "ProcessId": 8289,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-11-28 20:25:56.412 +03:00 [DBG] Augmenting SignInContext
2018-11-28 20:25:56.412 +03:00 [DBG] Adding idp claim with value: local
2018-11-28 20:25:56.412 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-28 20:25:56.412 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 20:25:56.428 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:25:56.428 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:25:56.428 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-11-28 20:25:56.428 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-11-28 20:25:56.428 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-11-28 20:25:56.428 +03:00 [DBG] Start authorize callback request
2018-11-28 20:25:56.428 +03:00 [DBG] User in authorize request: de3c09b7-f5b5-4fec-861a-401d4d6cc638
2018-11-28 20:25:56.428 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:25:56.429 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:25:56.429 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "de3c09b7-f5b5-4fec-861a-401d4d6cc638",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "ata3T3rFtg3iqzHfM9mN91CI88QS5jDVejdBGrZY",
  "Nonce": "ata3T3rFtg3iqzHfM9mN91CI88QS5jDVejdBGrZY",
  "SessionId": "9149338a03cb60cc173f83ee4c4ddfe4",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "ata3T3rFtg3iqzHfM9mN91CI88QS5jDVejdBGrZY",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "ata3T3rFtg3iqzHfM9mN91CI88QS5jDVejdBGrZY"
  }
}
2018-11-28 20:25:56.432 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-11-28 20:25:56.432 +03:00 [DBG] Creating Implicit Flow response.
2018-11-28 20:25:56.432 +03:00 [DBG] Getting claims for access token for client: angular
2018-11-28 20:25:56.432 +03:00 [DBG] Getting claims for access token for subject: de3c09b7-f5b5-4fec-861a-401d4d6cc638
2018-11-28 20:25:56.434 +03:00 [DBG] Getting claims for identity token for subject: de3c09b7-f5b5-4fec-861a-401d4d6cc638 and client: angular
2018-11-28 20:25:56.436 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "Endpoint": "Authorize",
  "SubjectId": "de3c09b7-f5b5-4fec-861a-401d4d6cc638",
  "Scopes": "openid profile email role api1",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****gXjg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****qtVQ"
    }
  ],
  "ActivityId": "0HLILAOT3V5BC:0000001A",
  "TimeStamp": "2018-11-28T17:25:56Z",
  "ProcessId": 8289,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-11-28 20:25:56.436 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "de3c09b7-f5b5-4fec-861a-401d4d6cc638",
  "ClientId": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "State": "ata3T3rFtg3iqzHfM9mN91CI88QS5jDVejdBGrZY",
  "Scope": "openid profile email role api1"
}
2018-11-28 20:25:56.436 +03:00 [DBG] Augmenting SignInContext
2018-11-28 20:25:56.436 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 20:25:56.881 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:25:56.882 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:25:56.882 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:25:56.882 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:25:56.882 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:25:56.882 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:25:56.882 +03:00 [DBG] Start discovery request
2018-11-28 20:25:56.934 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:25:56.934 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:25:56.934 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:25:56.934 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:25:56.934 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:25:56.934 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:25:56.934 +03:00 [DBG] Start key discovery request
2018-11-28 20:27:25.553 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:27:25.553 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:27:25.553 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:27:25.553 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:27:25.553 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:27:25.553 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:27:25.553 +03:00 [DBG] Start discovery request
2018-11-28 20:27:25.561 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:27:25.561 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:27:25.561 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:27:25.561 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:27:25.561 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:27:25.561 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:27:25.561 +03:00 [DBG] Start discovery request
2018-11-28 20:27:25.672 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:27:25.672 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:27:25.672 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:27:25.673 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:27:25.673 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:27:25.673 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:27:25.673 +03:00 [DBG] Start key discovery request
2018-11-28 20:27:25.681 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:27:25.681 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:27:25.681 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:27:25.681 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:27:25.682 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:27:25.682 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:27:25.682 +03:00 [DBG] Start key discovery request
2018-11-28 20:27:29.230 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:27:29.230 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:27:29.230 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 20:27:29.230 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 20:27:29.230 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 20:27:29.230 +03:00 [DBG] Start authorize request
2018-11-28 20:27:29.230 +03:00 [DBG] User in authorize request: de3c09b7-f5b5-4fec-861a-401d4d6cc638
2018-11-28 20:27:29.230 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:27:29.230 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:27:29.230 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "de3c09b7-f5b5-4fec-861a-401d4d6cc638",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "4lVnW5pL0KKBRVrR5xXVqWetE3u4KNK0EmdVNPX4",
  "Nonce": "4lVnW5pL0KKBRVrR5xXVqWetE3u4KNK0EmdVNPX4",
  "SessionId": "9149338a03cb60cc173f83ee4c4ddfe4",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "4lVnW5pL0KKBRVrR5xXVqWetE3u4KNK0EmdVNPX4",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "4lVnW5pL0KKBRVrR5xXVqWetE3u4KNK0EmdVNPX4"
  }
}
2018-11-28 20:27:29.234 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-11-28 20:27:29.235 +03:00 [DBG] Creating Implicit Flow response.
2018-11-28 20:27:29.235 +03:00 [DBG] Getting claims for access token for client: angular
2018-11-28 20:27:29.235 +03:00 [DBG] Getting claims for access token for subject: de3c09b7-f5b5-4fec-861a-401d4d6cc638
2018-11-28 20:27:29.237 +03:00 [DBG] Getting claims for identity token for subject: de3c09b7-f5b5-4fec-861a-401d4d6cc638 and client: angular
2018-11-28 20:27:29.239 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "Endpoint": "Authorize",
  "SubjectId": "de3c09b7-f5b5-4fec-861a-401d4d6cc638",
  "Scopes": "openid profile email role api1",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****lFbw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****YUcA"
    }
  ],
  "ActivityId": "0HLILAOT3V5BC:0000001B",
  "TimeStamp": "2018-11-28T17:27:29Z",
  "ProcessId": 8289,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-11-28 20:27:29.243 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "de3c09b7-f5b5-4fec-861a-401d4d6cc638",
  "ClientId": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "State": "4lVnW5pL0KKBRVrR5xXVqWetE3u4KNK0EmdVNPX4",
  "Scope": "openid profile email role api1"
}
2018-11-28 20:27:29.792 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:27:29.792 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:27:29.792 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:27:29.792 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:27:29.792 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:27:29.792 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:27:29.793 +03:00 [DBG] Start discovery request
2018-11-28 20:27:29.801 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:27:29.801 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:27:29.801 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:27:29.801 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:27:29.801 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:27:29.801 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:27:29.801 +03:00 [DBG] Start discovery request
2018-11-28 20:27:29.867 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:27:29.868 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:27:29.868 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:27:29.868 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:27:29.868 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:27:29.868 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:27:29.868 +03:00 [DBG] Start key discovery request
2018-11-28 20:27:29.868 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:27:29.868 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:27:29.869 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:27:29.869 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:27:29.869 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:27:29.869 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:27:29.869 +03:00 [DBG] Start key discovery request
2018-11-28 20:27:34.119 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:27:34.119 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:27:34.119 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-11-28 20:27:34.119 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-11-28 20:27:34.119 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-11-28 20:27:34.119 +03:00 [DBG] Processing signout request for de3c09b7-f5b5-4fec-861a-401d4d6cc638
2018-11-28 20:27:34.119 +03:00 [DBG] Start end session request validation
2018-11-28 20:27:34.119 +03:00 [DBG] Start identity token validation
2018-11-28 20:27:34.119 +03:00 [DBG] Client found: angular / angular
2018-11-28 20:27:34.120 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-11-28 20:27:34.121 +03:00 [DBG] Token validation success
{
  "ClientId": "angular",
  "ClientName": "angular",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1543426049,
    "exp": 1543426349,
    "iss": "http://localhost:5000",
    "aud": "angular",
    "nonce": "4lVnW5pL0KKBRVrR5xXVqWetE3u4KNK0EmdVNPX4",
    "iat": 1543426049,
    "at_hash": "67cKNilsFxeOl_NN5t3j7g",
    "sid": "9149338a03cb60cc173f83ee4c4ddfe4",
    "sub": "de3c09b7-f5b5-4fec-861a-401d4d6cc638",
    "auth_time": 1543425956,
    "idp": "local",
    "preferred_username": "ss@ss.com",
    "name": "ss@ss.com",
    "email": "test@test.com",
    "email_verified": false,
    "amr": "pwd"
  }
}
2018-11-28 20:27:34.121 +03:00 [INF] End session request validation success
{
  "ClientId": "angular",
  "ClientName": "angular",
  "SubjectId": "de3c09b7-f5b5-4fec-861a-401d4d6cc638",
  "PostLogOutUri": "http://10.1.1.230:4200",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6ImU5ZWE4ZDQxYTNmNDEzNzM2MjY5YWZhZTkzMGY0NWYzIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1NDM0MjYwNDksImV4cCI6MTU0MzQyNjM0OSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiYW5ndWxhciIsIm5vbmNlIjoiNGxWblc1cEwwS0tCUlZyUjV4WFZxV2V0RTN1NEtOSzBFbWRWTlBYNCIsImlhdCI6MTU0MzQyNjA0OSwiYXRfaGFzaCI6IjY3Y0tOaWxzRnhlT2xfTk41dDNqN2ciLCJzaWQiOiI5MTQ5MzM4YTAzY2I2MGNjMTczZjgzZWU0YzRkZGZlNCIsInN1YiI6ImRlM2MwOWI3LWY1YjUtNGZlYy04NjFhLTQwMWQ0ZDZjYzYzOCIsImF1dGhfdGltZSI6MTU0MzQyNTk1NiwiaWRwIjoibG9jYWwiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJzc0Bzcy5jb20iLCJuYW1lIjoic3NAc3MuY29tIiwiZW1haWwiOiJ0ZXN0QHRlc3QuY29tIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJhbXIiOlsicHdkIl19.IWs2CjCh6dYS8W29ZqwGJDIsym4DyLgc4KrYmk7J9y1QH7VCT1RnGO7d2IlddY0n7UJPr51PJkBW2lxlApF0ovaxoaB-tycMfaRQb8TqOqRYUTlSmGFsgdv1I_DG-UFgMJDJZwC7RQPbYRX2zkWW_Zho41YWXE37Keh38XBvKkftjkyjQlvGBolufqS8El1cXclmpjxBIwWsDaCCVmywR30vLrg0LeXnQlUSxSCRtOu_Bp7dizuo2YYRDbpEfj53iPoDzxWzWrtGGB8Uja465b_bU1RcV4IzoxFyXqOxC-V8wml8pBQe44S_L1_iAQpqPPh0EBWndj2_yalTTmlFbw",
    "post_logout_redirect_uri": "http://10.1.1.230:4200"
  }
}
2018-11-28 20:27:34.121 +03:00 [DBG] Success validating end session request from angular
2018-11-28 20:27:34.137 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:27:34.137 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:27:34.138 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-11-28 20:27:34.138 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-11-28 20:27:34.138 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-11-28 20:27:34.138 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "de3c09b7-f5b5-4fec-861a-401d4d6cc638",
  "DisplayName": "ss@ss.com",
  "ActivityId": "0HLILAOT3V5BC:0000001D",
  "TimeStamp": "2018-11-28T17:27:34Z",
  "ProcessId": 8289,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-11-28 20:27:34.283 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-11-28 20:27:34.283 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-11-28 20:27:34.284 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-11-28 20:27:34.284 +03:00 [DBG] Processing signout callback request
2018-11-28 20:27:34.284 +03:00 [DBG] Client front-channel logout URLs: http://10.1.1.230:4200?sid=9149338a03cb60cc173f83ee4c4ddfe4&iss=http%3A%2F%2Flocalhost%3A5000
2018-11-28 20:27:34.284 +03:00 [DBG] No client back-channel logout URLs
2018-11-28 20:27:34.284 +03:00 [INF] Successful signout callback.
2018-11-28 20:27:34.284 +03:00 [DBG] Client front-channel iframe urls: ["http://10.1.1.230:4200?sid=9149338a03cb60cc173f83ee4c4ddfe4&iss=http%3A%2F%2Flocalhost%3A5000"]
2018-11-28 20:27:34.284 +03:00 [DBG] No client back-channel iframe urls
2018-11-28 20:27:34.859 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:27:34.860 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:27:34.860 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:27:34.860 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:27:34.860 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:27:34.860 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:27:34.860 +03:00 [DBG] Start discovery request
2018-11-28 20:27:34.864 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:27:34.865 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:27:34.865 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:27:34.865 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:27:34.865 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:27:34.865 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:27:34.865 +03:00 [DBG] Start discovery request
2018-11-28 20:27:34.949 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:27:34.949 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:27:34.949 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:27:34.949 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:27:34.949 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:27:34.949 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:27:34.949 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:27:34.949 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:27:34.949 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:27:34.949 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:27:34.949 +03:00 [DBG] Start key discovery request
2018-11-28 20:27:34.949 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:27:34.949 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:27:34.949 +03:00 [DBG] Start key discovery request
2018-11-28 20:27:36.845 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:27:36.846 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:27:36.846 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:27:36.846 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:27:36.846 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:27:36.846 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:27:36.846 +03:00 [DBG] Start discovery request
2018-11-28 20:27:36.861 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:27:36.861 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:27:36.861 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:27:36.861 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:27:36.861 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:27:36.861 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:27:36.861 +03:00 [DBG] Start discovery request
2018-11-28 20:27:36.898 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:27:36.898 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:27:36.898 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:27:36.898 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:27:36.898 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:27:36.898 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:27:36.899 +03:00 [DBG] Start key discovery request
2018-11-28 20:27:36.944 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:27:36.944 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:27:36.944 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:27:36.944 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:27:36.945 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:27:36.945 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:27:36.945 +03:00 [DBG] Start key discovery request
2018-11-28 20:27:38.419 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 20:27:38.420 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 20:27:38.420 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 20:27:38.420 +03:00 [DBG] Start authorize request
2018-11-28 20:27:38.420 +03:00 [DBG] No user present in authorize request
2018-11-28 20:27:38.420 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:27:38.420 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:27:38.420 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "5ZR9DgqM7aeBSnX2cT2CBSVu1X44iD1ifTMiwRV0",
  "Nonce": "5ZR9DgqM7aeBSnX2cT2CBSVu1X44iD1ifTMiwRV0",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "5ZR9DgqM7aeBSnX2cT2CBSVu1X44iD1ifTMiwRV0",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "5ZR9DgqM7aeBSnX2cT2CBSVu1X44iD1ifTMiwRV0"
  }
}
2018-11-28 20:27:38.420 +03:00 [INF] Showing login: User is not authenticated
2018-11-28 20:27:38.432 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:27:38.432 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:27:52.484 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "ss@ss.com",
  "SubjectId": "de3c09b7-f5b5-4fec-861a-401d4d6cc638",
  "DisplayName": "ss@ss.com",
  "Endpoint": "UI",
  "ActivityId": "0HLILAOT3V5BC:00000023",
  "TimeStamp": "2018-11-28T17:27:52Z",
  "ProcessId": 8289,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-11-28 20:27:52.484 +03:00 [DBG] Augmenting SignInContext
2018-11-28 20:27:52.484 +03:00 [DBG] Adding idp claim with value: local
2018-11-28 20:27:52.484 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-28 20:27:52.484 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 20:27:52.500 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:27:52.500 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:27:52.500 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-11-28 20:27:52.500 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-11-28 20:27:52.500 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-11-28 20:27:52.500 +03:00 [DBG] Start authorize callback request
2018-11-28 20:27:52.500 +03:00 [DBG] User in authorize request: de3c09b7-f5b5-4fec-861a-401d4d6cc638
2018-11-28 20:27:52.500 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:27:52.501 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:27:52.501 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "de3c09b7-f5b5-4fec-861a-401d4d6cc638",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "5ZR9DgqM7aeBSnX2cT2CBSVu1X44iD1ifTMiwRV0",
  "Nonce": "5ZR9DgqM7aeBSnX2cT2CBSVu1X44iD1ifTMiwRV0",
  "SessionId": "7187a372271d2f6d1c2c90049ca3fa17",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "5ZR9DgqM7aeBSnX2cT2CBSVu1X44iD1ifTMiwRV0",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "5ZR9DgqM7aeBSnX2cT2CBSVu1X44iD1ifTMiwRV0"
  }
}
2018-11-28 20:27:52.505 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-11-28 20:27:52.505 +03:00 [DBG] Creating Implicit Flow response.
2018-11-28 20:27:52.505 +03:00 [DBG] Getting claims for access token for client: angular
2018-11-28 20:27:52.505 +03:00 [DBG] Getting claims for access token for subject: de3c09b7-f5b5-4fec-861a-401d4d6cc638
2018-11-28 20:27:52.507 +03:00 [DBG] Getting claims for identity token for subject: de3c09b7-f5b5-4fec-861a-401d4d6cc638 and client: angular
2018-11-28 20:27:52.509 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "Endpoint": "Authorize",
  "SubjectId": "de3c09b7-f5b5-4fec-861a-401d4d6cc638",
  "Scopes": "openid profile email role api1",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****CI7Q"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****-wjw"
    }
  ],
  "ActivityId": "0HLILAOT3V5BC:00000024",
  "TimeStamp": "2018-11-28T17:27:52Z",
  "ProcessId": 8289,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-11-28 20:27:52.511 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "de3c09b7-f5b5-4fec-861a-401d4d6cc638",
  "ClientId": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "State": "5ZR9DgqM7aeBSnX2cT2CBSVu1X44iD1ifTMiwRV0",
  "Scope": "openid profile email role api1"
}
2018-11-28 20:27:52.511 +03:00 [DBG] Augmenting SignInContext
2018-11-28 20:27:52.511 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 20:27:52.979 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:27:52.979 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:27:52.979 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:27:52.979 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:27:52.979 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:27:52.979 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:27:52.980 +03:00 [DBG] Start discovery request
2018-11-28 20:27:52.980 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:27:52.980 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:27:52.980 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:27:52.980 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:27:52.980 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:27:52.980 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:27:52.980 +03:00 [DBG] Start discovery request
2018-11-28 20:27:53.031 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:27:53.031 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:27:53.031 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:27:53.031 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:27:53.032 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:27:53.032 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:27:53.032 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:27:53.032 +03:00 [DBG] Start key discovery request
2018-11-28 20:27:53.032 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:27:53.032 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:27:53.032 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:27:53.032 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:27:53.033 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:27:53.033 +03:00 [DBG] Start key discovery request
2018-11-28 20:28:03.109 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:28:03.110 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:28:03.110 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 20:28:03.110 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 20:28:03.110 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 20:28:03.110 +03:00 [DBG] Start authorize request
2018-11-28 20:28:03.110 +03:00 [DBG] User in authorize request: de3c09b7-f5b5-4fec-861a-401d4d6cc638
2018-11-28 20:28:03.110 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:28:03.112 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:28:03.112 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "de3c09b7-f5b5-4fec-861a-401d4d6cc638",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "FIEwXE0n37wWcrsOo5nvfxkUNzi96pMNzQVUgVB7",
  "Nonce": "FIEwXE0n37wWcrsOo5nvfxkUNzi96pMNzQVUgVB7",
  "SessionId": "7187a372271d2f6d1c2c90049ca3fa17",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "FIEwXE0n37wWcrsOo5nvfxkUNzi96pMNzQVUgVB7",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "FIEwXE0n37wWcrsOo5nvfxkUNzi96pMNzQVUgVB7"
  }
}
2018-11-28 20:28:03.117 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-11-28 20:28:03.117 +03:00 [DBG] Creating Implicit Flow response.
2018-11-28 20:28:03.117 +03:00 [DBG] Getting claims for access token for client: angular
2018-11-28 20:28:03.117 +03:00 [DBG] Getting claims for access token for subject: de3c09b7-f5b5-4fec-861a-401d4d6cc638
2018-11-28 20:28:03.119 +03:00 [DBG] Getting claims for identity token for subject: de3c09b7-f5b5-4fec-861a-401d4d6cc638 and client: angular
2018-11-28 20:28:03.120 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "Endpoint": "Authorize",
  "SubjectId": "de3c09b7-f5b5-4fec-861a-401d4d6cc638",
  "Scopes": "openid profile email role api1",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****4fMg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****3JLQ"
    }
  ],
  "ActivityId": "0HLILAOT3V5BC:00000025",
  "TimeStamp": "2018-11-28T17:28:03Z",
  "ProcessId": 8289,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-11-28 20:28:03.121 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "de3c09b7-f5b5-4fec-861a-401d4d6cc638",
  "ClientId": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "State": "FIEwXE0n37wWcrsOo5nvfxkUNzi96pMNzQVUgVB7",
  "Scope": "openid profile email role api1"
}
2018-11-28 20:28:03.636 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:28:03.636 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:28:03.636 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:28:03.637 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:28:03.637 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:28:03.637 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:28:03.637 +03:00 [DBG] Start discovery request
2018-11-28 20:28:03.645 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:28:03.646 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:28:03.646 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:28:03.646 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:28:03.646 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:28:03.646 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:28:03.646 +03:00 [DBG] Start discovery request
2018-11-28 20:28:03.701 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:28:03.701 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:28:03.701 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:28:03.701 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:28:03.701 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:28:03.702 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:28:03.702 +03:00 [DBG] Start key discovery request
2018-11-28 20:28:03.702 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:28:03.702 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:28:03.702 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:28:03.702 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:28:03.702 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:28:03.702 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:28:03.703 +03:00 [DBG] Start key discovery request
2018-11-28 20:28:39.885 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:28:39.885 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:28:39.885 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-11-28 20:28:39.885 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-11-28 20:28:39.885 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-11-28 20:28:39.885 +03:00 [DBG] Processing signout request for de3c09b7-f5b5-4fec-861a-401d4d6cc638
2018-11-28 20:28:39.885 +03:00 [DBG] Start end session request validation
2018-11-28 20:28:39.885 +03:00 [DBG] Start identity token validation
2018-11-28 20:28:39.885 +03:00 [DBG] Client found: angular / angular
2018-11-28 20:28:39.887 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-11-28 20:28:39.887 +03:00 [DBG] Token validation success
{
  "ClientId": "angular",
  "ClientName": "angular",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1543426083,
    "exp": 1543426383,
    "iss": "http://localhost:5000",
    "aud": "angular",
    "nonce": "FIEwXE0n37wWcrsOo5nvfxkUNzi96pMNzQVUgVB7",
    "iat": 1543426083,
    "at_hash": "K1bYB_-ShYVXHtiJBnzh8w",
    "sid": "7187a372271d2f6d1c2c90049ca3fa17",
    "sub": "de3c09b7-f5b5-4fec-861a-401d4d6cc638",
    "auth_time": 1543426072,
    "idp": "local",
    "preferred_username": "ss@ss.com",
    "name": "ss@ss.com",
    "email": "test@test.com",
    "email_verified": false,
    "amr": "pwd"
  }
}
2018-11-28 20:28:39.887 +03:00 [INF] End session request validation success
{
  "ClientId": "angular",
  "ClientName": "angular",
  "SubjectId": "de3c09b7-f5b5-4fec-861a-401d4d6cc638",
  "PostLogOutUri": "http://10.1.1.230:4200",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6ImU5ZWE4ZDQxYTNmNDEzNzM2MjY5YWZhZTkzMGY0NWYzIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1NDM0MjYwODMsImV4cCI6MTU0MzQyNjM4MywiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiYW5ndWxhciIsIm5vbmNlIjoiRklFd1hFMG4zN3dXY3JzT281bnZmeGtVTnppOTZwTU56UVZVZ1ZCNyIsImlhdCI6MTU0MzQyNjA4MywiYXRfaGFzaCI6IksxYllCXy1TaFlWWEh0aUpCbnpoOHciLCJzaWQiOiI3MTg3YTM3MjI3MWQyZjZkMWMyYzkwMDQ5Y2EzZmExNyIsInN1YiI6ImRlM2MwOWI3LWY1YjUtNGZlYy04NjFhLTQwMWQ0ZDZjYzYzOCIsImF1dGhfdGltZSI6MTU0MzQyNjA3MiwiaWRwIjoibG9jYWwiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJzc0Bzcy5jb20iLCJuYW1lIjoic3NAc3MuY29tIiwiZW1haWwiOiJ0ZXN0QHRlc3QuY29tIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJhbXIiOlsicHdkIl19.LxIC6KnQNJbQEvSCij41kbavwfu8D1-DUA4oqW-VDzeR1_HscKwRICm_3ztcIluV027jOi7yJstyYBvbxRLDWL8Pr_Tr-mHhaWK2DAnPNyMfsc5GW3z8I_Vl54U2hLk9hQwMA2iVHwWXNFFBcG8DpLJ8tE3JXomzBxzz1-dx8NuxcEuSJEBKrRkRMug9GrF-It4GbILqux5RqpyNk-NuF6zeNK1IJULbOFWVDbGPA_DYlwbklmRhVTw2GOr7TQ7H2VY2alUQghCfaOs06MvwOhyG-RMBhATf44oySvrGPXYM7Extz43S4tt6DEOlZFN_gWDdn-ZOEpITYRsMcx4fMg",
    "post_logout_redirect_uri": "http://10.1.1.230:4200"
  }
}
2018-11-28 20:28:39.887 +03:00 [DBG] Success validating end session request from angular
2018-11-28 20:28:39.912 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:28:39.912 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:28:39.913 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-11-28 20:28:39.913 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-11-28 20:28:39.913 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-11-28 20:28:39.913 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "de3c09b7-f5b5-4fec-861a-401d4d6cc638",
  "DisplayName": "ss@ss.com",
  "ActivityId": "0HLILAOT3V5BC:00000027",
  "TimeStamp": "2018-11-28T17:28:39Z",
  "ProcessId": 8289,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-11-28 20:28:40.051 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-11-28 20:28:40.051 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-11-28 20:28:40.052 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-11-28 20:28:40.052 +03:00 [DBG] Processing signout callback request
2018-11-28 20:28:40.052 +03:00 [DBG] Client front-channel logout URLs: http://10.1.1.230:4200?sid=7187a372271d2f6d1c2c90049ca3fa17&iss=http%3A%2F%2Flocalhost%3A5000
2018-11-28 20:28:40.052 +03:00 [DBG] No client back-channel logout URLs
2018-11-28 20:28:40.052 +03:00 [INF] Successful signout callback.
2018-11-28 20:28:40.052 +03:00 [DBG] Client front-channel iframe urls: ["http://10.1.1.230:4200?sid=7187a372271d2f6d1c2c90049ca3fa17&iss=http%3A%2F%2Flocalhost%3A5000"]
2018-11-28 20:28:40.052 +03:00 [DBG] No client back-channel iframe urls
2018-11-28 20:28:40.583 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:28:40.583 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:28:40.583 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:28:40.583 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:28:40.583 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:28:40.583 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:28:40.583 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:28:40.583 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:28:40.583 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:28:40.583 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:28:40.583 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:28:40.583 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:28:40.583 +03:00 [DBG] Start discovery request
2018-11-28 20:28:40.583 +03:00 [DBG] Start discovery request
2018-11-28 20:28:40.603 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:28:40.603 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:28:40.603 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:28:40.603 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:28:40.603 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:28:40.603 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:28:40.604 +03:00 [DBG] Start key discovery request
2018-11-28 20:28:40.610 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:28:40.610 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:28:40.610 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:28:40.611 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:28:40.611 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:28:40.611 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:28:40.611 +03:00 [DBG] Start key discovery request
2018-11-28 20:28:42.247 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:28:42.247 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:28:42.247 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:28:42.247 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:28:42.247 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:28:42.248 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:28:42.248 +03:00 [DBG] Start discovery request
2018-11-28 20:28:42.257 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:28:42.257 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:28:42.257 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:28:42.257 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:28:42.258 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:28:42.258 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:28:42.258 +03:00 [DBG] Start discovery request
2018-11-28 20:28:42.301 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:28:42.301 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:28:42.301 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:28:42.301 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:28:42.301 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:28:42.301 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:28:42.301 +03:00 [DBG] Start key discovery request
2018-11-28 20:28:42.302 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:28:42.302 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:28:42.302 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:28:42.302 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:28:42.302 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:28:42.302 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:28:42.302 +03:00 [DBG] Start key discovery request
2018-11-28 20:28:46.912 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 20:28:46.912 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 20:28:46.912 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 20:28:46.912 +03:00 [DBG] Start authorize request
2018-11-28 20:28:46.913 +03:00 [DBG] No user present in authorize request
2018-11-28 20:28:46.913 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:28:46.913 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:28:46.913 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "UzVuXYW4W2JobqIk4ij0oUsMpZOLkBPeU3Mm92Kk",
  "Nonce": "UzVuXYW4W2JobqIk4ij0oUsMpZOLkBPeU3Mm92Kk",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "UzVuXYW4W2JobqIk4ij0oUsMpZOLkBPeU3Mm92Kk",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "UzVuXYW4W2JobqIk4ij0oUsMpZOLkBPeU3Mm92Kk"
  }
}
2018-11-28 20:28:46.913 +03:00 [INF] Showing login: User is not authenticated
2018-11-28 20:28:46.926 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:28:46.926 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:29:05.882 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "ss@ss.com",
  "SubjectId": "de3c09b7-f5b5-4fec-861a-401d4d6cc638",
  "DisplayName": "ss@ss.com",
  "Endpoint": "UI",
  "ActivityId": "0HLILAOT3V5BC:0000002D",
  "TimeStamp": "2018-11-28T17:29:05Z",
  "ProcessId": 8289,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-11-28 20:29:05.883 +03:00 [DBG] Augmenting SignInContext
2018-11-28 20:29:05.883 +03:00 [DBG] Adding idp claim with value: local
2018-11-28 20:29:05.883 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-28 20:29:05.883 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 20:29:05.912 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:29:05.912 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:29:05.912 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-11-28 20:29:05.912 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-11-28 20:29:05.912 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-11-28 20:29:05.912 +03:00 [DBG] Start authorize callback request
2018-11-28 20:29:05.912 +03:00 [DBG] User in authorize request: de3c09b7-f5b5-4fec-861a-401d4d6cc638
2018-11-28 20:29:05.912 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:29:05.913 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:29:05.913 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "de3c09b7-f5b5-4fec-861a-401d4d6cc638",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "UzVuXYW4W2JobqIk4ij0oUsMpZOLkBPeU3Mm92Kk",
  "Nonce": "UzVuXYW4W2JobqIk4ij0oUsMpZOLkBPeU3Mm92Kk",
  "SessionId": "16460614e4d1161c4f36664f538c84f2",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "UzVuXYW4W2JobqIk4ij0oUsMpZOLkBPeU3Mm92Kk",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "UzVuXYW4W2JobqIk4ij0oUsMpZOLkBPeU3Mm92Kk"
  }
}
2018-11-28 20:29:05.916 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-11-28 20:29:05.917 +03:00 [DBG] Creating Implicit Flow response.
2018-11-28 20:29:05.917 +03:00 [DBG] Getting claims for access token for client: angular
2018-11-28 20:29:05.917 +03:00 [DBG] Getting claims for access token for subject: de3c09b7-f5b5-4fec-861a-401d4d6cc638
2018-11-28 20:29:05.918 +03:00 [DBG] Getting claims for identity token for subject: de3c09b7-f5b5-4fec-861a-401d4d6cc638 and client: angular
2018-11-28 20:29:05.920 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "Endpoint": "Authorize",
  "SubjectId": "de3c09b7-f5b5-4fec-861a-401d4d6cc638",
  "Scopes": "openid profile email role api1",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****XMGA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****rQsQ"
    }
  ],
  "ActivityId": "0HLILAOT3V5BC:0000002E",
  "TimeStamp": "2018-11-28T17:29:05Z",
  "ProcessId": 8289,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-11-28 20:29:05.920 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "de3c09b7-f5b5-4fec-861a-401d4d6cc638",
  "ClientId": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "State": "UzVuXYW4W2JobqIk4ij0oUsMpZOLkBPeU3Mm92Kk",
  "Scope": "openid profile email role api1"
}
2018-11-28 20:29:05.920 +03:00 [DBG] Augmenting SignInContext
2018-11-28 20:29:05.920 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 20:29:06.477 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:29:06.477 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:29:06.477 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:29:06.478 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:29:06.478 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:29:06.478 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:29:06.478 +03:00 [DBG] Start discovery request
2018-11-28 20:29:06.483 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:29:06.483 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:29:06.483 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:29:06.483 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:29:06.483 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:29:06.484 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:29:06.484 +03:00 [DBG] Start discovery request
2018-11-28 20:29:06.535 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:29:06.535 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:29:06.535 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:29:06.535 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:29:06.535 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:29:06.535 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:29:06.535 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:29:06.535 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:29:06.536 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:29:06.536 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:29:06.536 +03:00 [DBG] Start key discovery request
2018-11-28 20:29:06.536 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:29:06.536 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:29:06.536 +03:00 [DBG] Start key discovery request
2018-11-28 20:32:19.071 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:32:19.071 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:32:19.071 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 20:32:19.071 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 20:32:19.071 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 20:32:19.071 +03:00 [DBG] Start authorize request
2018-11-28 20:32:19.071 +03:00 [DBG] User in authorize request: de3c09b7-f5b5-4fec-861a-401d4d6cc638
2018-11-28 20:32:19.071 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:32:19.072 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:32:19.072 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "de3c09b7-f5b5-4fec-861a-401d4d6cc638",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "fXqNu94jk2qEZZkZn9BMXbpPpCMb0vgBIFiqxEEn",
  "Nonce": "fXqNu94jk2qEZZkZn9BMXbpPpCMb0vgBIFiqxEEn",
  "SessionId": "16460614e4d1161c4f36664f538c84f2",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "fXqNu94jk2qEZZkZn9BMXbpPpCMb0vgBIFiqxEEn",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "fXqNu94jk2qEZZkZn9BMXbpPpCMb0vgBIFiqxEEn"
  }
}
2018-11-28 20:32:19.076 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-11-28 20:32:19.076 +03:00 [DBG] Creating Implicit Flow response.
2018-11-28 20:32:19.076 +03:00 [DBG] Getting claims for access token for client: angular
2018-11-28 20:32:19.076 +03:00 [DBG] Getting claims for access token for subject: de3c09b7-f5b5-4fec-861a-401d4d6cc638
2018-11-28 20:32:19.083 +03:00 [DBG] Getting claims for identity token for subject: de3c09b7-f5b5-4fec-861a-401d4d6cc638 and client: angular
2018-11-28 20:32:19.086 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "Endpoint": "Authorize",
  "SubjectId": "de3c09b7-f5b5-4fec-861a-401d4d6cc638",
  "Scopes": "openid profile email role api1",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****GL-w"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****H6Xw"
    }
  ],
  "ActivityId": "0HLILAOT3V5BF:00000001",
  "TimeStamp": "2018-11-28T17:32:19Z",
  "ProcessId": 8289,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-11-28 20:32:19.086 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "de3c09b7-f5b5-4fec-861a-401d4d6cc638",
  "ClientId": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "State": "fXqNu94jk2qEZZkZn9BMXbpPpCMb0vgBIFiqxEEn",
  "Scope": "openid profile email role api1"
}
2018-11-28 20:32:19.683 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:32:19.683 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:32:19.683 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:32:19.683 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:32:19.683 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:32:19.683 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:32:19.683 +03:00 [DBG] Start discovery request
2018-11-28 20:32:19.696 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:32:19.697 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:32:19.697 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:32:19.697 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:32:19.697 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:32:19.697 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:32:19.697 +03:00 [DBG] Start discovery request
2018-11-28 20:32:19.734 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:32:19.734 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:32:19.734 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:32:19.734 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:32:19.734 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:32:19.734 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:32:19.735 +03:00 [DBG] Start key discovery request
2018-11-28 20:32:19.735 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:32:19.735 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:32:19.735 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:32:19.735 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:32:19.735 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:32:19.735 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:32:19.735 +03:00 [DBG] Start key discovery request
2018-11-28 20:41:32.488 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-28 20:41:32.532 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-28 20:41:32.535 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-28 20:41:32.535 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-28 20:41:32.535 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-28 20:41:32.536 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-28 20:41:34.350 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:41:34.371 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:41:48.946 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:41:48.946 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:41:51.011 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:41:51.011 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:41:51.167 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-11-28 20:41:51.170 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-11-28 20:41:51.171 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-11-28 20:41:51.198 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "de3c09b7-f5b5-4fec-861a-401d4d6cc638",
  "DisplayName": "ss@ss.com",
  "ActivityId": "0HLILB2U8GOL0:00000003",
  "TimeStamp": "2018-11-28T17:41:51Z",
  "ProcessId": 18531,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-11-28 20:41:51.404 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-11-28 20:41:51.409 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-11-28 20:41:51.409 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-11-28 20:41:51.413 +03:00 [DBG] Processing signout callback request
2018-11-28 20:41:51.455 +03:00 [DBG] Client front-channel logout URLs: http://10.1.1.230:4200?sid=16460614e4d1161c4f36664f538c84f2&iss=http%3A%2F%2Flocalhost%3A5000
2018-11-28 20:41:51.455 +03:00 [DBG] No client back-channel logout URLs
2018-11-28 20:41:51.455 +03:00 [INF] Successful signout callback.
2018-11-28 20:41:51.457 +03:00 [DBG] Client front-channel iframe urls: ["http://10.1.1.230:4200?sid=16460614e4d1161c4f36664f538c84f2&iss=http%3A%2F%2Flocalhost%3A5000"]
2018-11-28 20:41:51.468 +03:00 [DBG] No client back-channel iframe urls
2018-11-28 20:41:52.052 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:41:52.052 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:41:52.059 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:41:52.060 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:41:52.062 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:41:52.062 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:41:52.062 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:41:52.064 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:41:52.062 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:41:52.064 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:41:52.076 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:41:52.079 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:41:52.081 +03:00 [DBG] Start discovery request
2018-11-28 20:41:52.081 +03:00 [DBG] Start discovery request
2018-11-28 20:41:52.169 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:41:52.169 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:41:52.169 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:41:52.169 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:41:52.170 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:41:52.170 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:41:52.173 +03:00 [DBG] Start key discovery request
2018-11-28 20:41:52.179 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:41:52.180 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:41:52.181 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:41:52.181 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:41:52.184 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:41:52.184 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:41:52.191 +03:00 [DBG] Start key discovery request
2018-11-28 20:41:58.325 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:41:58.325 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:41:58.325 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:41:58.325 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:41:58.325 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:41:58.325 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:41:58.325 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:41:58.325 +03:00 [DBG] Start discovery request
2018-11-28 20:41:58.325 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:41:58.326 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:41:58.326 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:41:58.326 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:41:58.326 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:41:58.326 +03:00 [DBG] Start discovery request
2018-11-28 20:41:58.388 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:41:58.388 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:41:58.388 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:41:58.388 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:41:58.388 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:41:58.388 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:41:58.388 +03:00 [DBG] Start key discovery request
2018-11-28 20:41:58.389 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:41:58.389 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:41:58.389 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:41:58.389 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:41:58.389 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:41:58.389 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:41:58.389 +03:00 [DBG] Start key discovery request
2018-11-28 20:42:07.698 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:42:07.699 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:42:07.699 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:42:07.699 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:42:07.699 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:42:07.699 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:42:07.699 +03:00 [DBG] Start discovery request
2018-11-28 20:42:07.711 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:42:07.711 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:42:07.711 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:42:07.711 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:42:07.711 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:42:07.711 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:42:07.711 +03:00 [DBG] Start discovery request
2018-11-28 20:42:07.755 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:42:07.755 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:42:07.755 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:42:07.755 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:42:07.755 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:42:07.755 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:42:07.755 +03:00 [DBG] Start key discovery request
2018-11-28 20:42:07.756 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:42:07.756 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:42:07.756 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:42:07.757 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:42:07.757 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:42:07.757 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:42:07.757 +03:00 [DBG] Start key discovery request
2018-11-28 20:42:09.278 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 20:42:09.281 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 20:42:09.282 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 20:42:09.285 +03:00 [DBG] Start authorize request
2018-11-28 20:42:09.290 +03:00 [DBG] No user present in authorize request
2018-11-28 20:42:09.296 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:42:09.337 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:42:09.348 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "N46ZYsAFL0iDDzayAPVaJvqIkDwbT6sW4AVv5skc",
  "Nonce": "N46ZYsAFL0iDDzayAPVaJvqIkDwbT6sW4AVv5skc",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "N46ZYsAFL0iDDzayAPVaJvqIkDwbT6sW4AVv5skc",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "N46ZYsAFL0iDDzayAPVaJvqIkDwbT6sW4AVv5skc"
  }
}
2018-11-28 20:42:09.354 +03:00 [INF] Showing login: User is not authenticated
2018-11-28 20:42:09.400 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:42:09.400 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:43:07.467 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "ss@ss.com",
  "SubjectId": "5b3200e6-6116-4e83-871b-93f4897eace1",
  "DisplayName": "ss@ss.com",
  "Endpoint": "UI",
  "ActivityId": "0HLILB2U8GOL0:00000009",
  "TimeStamp": "2018-11-28T17:43:07Z",
  "ProcessId": 18531,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-11-28 20:43:07.481 +03:00 [DBG] Augmenting SignInContext
2018-11-28 20:43:07.483 +03:00 [DBG] Adding idp claim with value: local
2018-11-28 20:43:07.483 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-28 20:43:07.503 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 20:43:07.519 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:43:07.519 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:43:07.519 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-11-28 20:43:07.519 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-11-28 20:43:07.520 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-11-28 20:43:07.525 +03:00 [DBG] Start authorize callback request
2018-11-28 20:43:07.529 +03:00 [DBG] User in authorize request: 5b3200e6-6116-4e83-871b-93f4897eace1
2018-11-28 20:43:07.529 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:43:07.530 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:43:07.530 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "5b3200e6-6116-4e83-871b-93f4897eace1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "N46ZYsAFL0iDDzayAPVaJvqIkDwbT6sW4AVv5skc",
  "Nonce": "N46ZYsAFL0iDDzayAPVaJvqIkDwbT6sW4AVv5skc",
  "SessionId": "7d416a7e98ea0341d594514b1d9a0ab0",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "N46ZYsAFL0iDDzayAPVaJvqIkDwbT6sW4AVv5skc",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "N46ZYsAFL0iDDzayAPVaJvqIkDwbT6sW4AVv5skc"
  }
}
2018-11-28 20:43:07.575 +03:00 [DBG] user_consent grant with value: angular|5b3200e6-6116-4e83-871b-93f4897eace1 not found in store.
2018-11-28 20:43:07.575 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-11-28 20:43:07.576 +03:00 [INF] Showing consent: User has not yet consented
2018-11-28 20:43:07.586 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:43:07.586 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:43:07.623 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:43:07.623 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:43:20.002 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:43:20.002 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:43:20.027 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:43:20.027 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:43:20.052 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:43:20.052 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:43:20.052 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-11-28 20:43:20.053 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-11-28 20:43:20.053 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-11-28 20:43:20.053 +03:00 [DBG] Start authorize callback request
2018-11-28 20:43:20.057 +03:00 [DBG] User in authorize request: 5b3200e6-6116-4e83-871b-93f4897eace1
2018-11-28 20:43:20.057 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:43:20.058 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:43:20.058 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "5b3200e6-6116-4e83-871b-93f4897eace1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "N46ZYsAFL0iDDzayAPVaJvqIkDwbT6sW4AVv5skc",
  "Nonce": "N46ZYsAFL0iDDzayAPVaJvqIkDwbT6sW4AVv5skc",
  "SessionId": "7d416a7e98ea0341d594514b1d9a0ab0",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "N46ZYsAFL0iDDzayAPVaJvqIkDwbT6sW4AVv5skc",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "N46ZYsAFL0iDDzayAPVaJvqIkDwbT6sW4AVv5skc"
  }
}
2018-11-28 20:43:20.059 +03:00 [DBG] user_consent grant with value: angular|5b3200e6-6116-4e83-871b-93f4897eace1 not found in store.
2018-11-28 20:43:20.059 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-11-28 20:43:20.065 +03:00 [INF] User consented to scopes: ["openid","profile","email","role","api1"]
2018-11-28 20:43:20.066 +03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email","role","api1"]
2018-11-28 20:43:20.069 +03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 5b3200e6-6116-4e83-871b-93f4897eace1
2018-11-28 20:43:20.085 +03:00 [DBG] Creating Implicit Flow response.
2018-11-28 20:43:20.097 +03:00 [DBG] Getting claims for access token for client: angular
2018-11-28 20:43:20.097 +03:00 [DBG] Getting claims for access token for subject: 5b3200e6-6116-4e83-871b-93f4897eace1
2018-11-28 20:43:20.263 +03:00 [DBG] Getting claims for identity token for subject: 5b3200e6-6116-4e83-871b-93f4897eace1 and client: angular
2018-11-28 20:43:20.277 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "Endpoint": "Authorize",
  "SubjectId": "5b3200e6-6116-4e83-871b-93f4897eace1",
  "Scopes": "openid profile email role api1",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****ZUag"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****Wy4w"
    }
  ],
  "ActivityId": "0HLILB2U8GOL0:0000000D",
  "TimeStamp": "2018-11-28T17:43:20Z",
  "ProcessId": 18531,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-11-28 20:43:20.280 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "5b3200e6-6116-4e83-871b-93f4897eace1",
  "ClientId": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "State": "N46ZYsAFL0iDDzayAPVaJvqIkDwbT6sW4AVv5skc",
  "Scope": "openid profile email role api1"
}
2018-11-28 20:43:20.293 +03:00 [DBG] Augmenting SignInContext
2018-11-28 20:43:20.294 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-28 20:43:20.980 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:43:20.981 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:43:20.981 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:43:20.981 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:43:20.981 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:43:20.981 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:43:20.981 +03:00 [DBG] Start discovery request
2018-11-28 20:43:21.000 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:43:21.000 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:43:21.000 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:43:21.000 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:43:21.000 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:43:21.000 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:43:21.000 +03:00 [DBG] Start discovery request
2018-11-28 20:43:21.083 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:43:21.083 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:43:21.083 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:43:21.083 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:43:21.083 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:43:21.083 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:43:21.083 +03:00 [DBG] Start key discovery request
2018-11-28 20:43:21.084 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:43:21.084 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:43:21.084 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:43:21.085 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:43:21.085 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:43:21.085 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:43:21.085 +03:00 [DBG] Start key discovery request
2018-11-28 20:43:23.744 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:43:23.745 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:43:23.745 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-28 20:43:23.745 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-28 20:43:23.745 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-28 20:43:23.745 +03:00 [DBG] Start authorize request
2018-11-28 20:43:23.745 +03:00 [DBG] User in authorize request: 5b3200e6-6116-4e83-871b-93f4897eace1
2018-11-28 20:43:23.745 +03:00 [DBG] Start authorize request protocol validation
2018-11-28 20:43:23.745 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-28 20:43:23.745 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "5b3200e6-6116-4e83-871b-93f4897eace1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "R9DnS6wY5TuxUvCAaYdEPRZl3I9yi81ScBLlWaip",
  "Nonce": "R9DnS6wY5TuxUvCAaYdEPRZl3I9yi81ScBLlWaip",
  "SessionId": "7d416a7e98ea0341d594514b1d9a0ab0",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "R9DnS6wY5TuxUvCAaYdEPRZl3I9yi81ScBLlWaip",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "R9DnS6wY5TuxUvCAaYdEPRZl3I9yi81ScBLlWaip"
  }
}
2018-11-28 20:43:23.762 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-11-28 20:43:23.762 +03:00 [DBG] Creating Implicit Flow response.
2018-11-28 20:43:23.763 +03:00 [DBG] Getting claims for access token for client: angular
2018-11-28 20:43:23.763 +03:00 [DBG] Getting claims for access token for subject: 5b3200e6-6116-4e83-871b-93f4897eace1
2018-11-28 20:43:23.765 +03:00 [DBG] Getting claims for identity token for subject: 5b3200e6-6116-4e83-871b-93f4897eace1 and client: angular
2018-11-28 20:43:23.767 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "Endpoint": "Authorize",
  "SubjectId": "5b3200e6-6116-4e83-871b-93f4897eace1",
  "Scopes": "openid profile email role api1",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****89fA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****hx9g"
    }
  ],
  "ActivityId": "0HLILB2U8GOL0:0000000E",
  "TimeStamp": "2018-11-28T17:43:23Z",
  "ProcessId": 18531,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-11-28 20:43:23.767 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "5b3200e6-6116-4e83-871b-93f4897eace1",
  "ClientId": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "State": "R9DnS6wY5TuxUvCAaYdEPRZl3I9yi81ScBLlWaip",
  "Scope": "openid profile email role api1"
}
2018-11-28 20:43:24.335 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:43:24.335 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:43:24.335 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:43:24.335 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:43:24.335 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:43:24.335 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:43:24.335 +03:00 [DBG] Start discovery request
2018-11-28 20:43:24.350 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-28 20:43:24.350 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:43:24.350 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:43:24.350 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-28 20:43:24.350 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-28 20:43:24.350 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-28 20:43:24.350 +03:00 [DBG] Start discovery request
2018-11-28 20:43:24.407 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:43:24.407 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:43:24.407 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:43:24.407 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:43:24.407 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:43:24.407 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:43:24.408 +03:00 [DBG] Start key discovery request
2018-11-28 20:43:24.408 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-28 20:43:24.408 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:43:24.408 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:43:24.409 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-28 20:43:24.409 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-28 20:43:24.409 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-28 20:43:24.409 +03:00 [DBG] Start key discovery request
2018-11-28 20:43:35.421 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://10.1.1.230:4200
2018-11-28 20:43:35.421 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-28 20:43:35.422 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-28 20:43:35.422 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-11-28 20:43:35.423 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-11-28 20:43:35.423 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-11-28 20:43:35.434 +03:00 [DBG] Start userinfo request
2018-11-28 20:43:35.436 +03:00 [DBG] Bearer token found in header
2018-11-28 20:43:35.484 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-11-28 20:43:35.487 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1543427003,
    "exp": 1543430603,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "api1"
    ],
    "client_id": "angular",
    "sub": "5b3200e6-6116-4e83-871b-93f4897eace1",
    "auth_time": 1543426987,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "email",
      "role",
      "api1"
    ],
    "amr": "pwd"
  }
}
2018-11-28 20:43:35.493 +03:00 [DBG] Creating userinfo response
2018-11-28 20:43:35.499 +03:00 [DBG] Scopes in access token: openid profile email role api1
2018-11-28 20:43:35.501 +03:00 [DBG] Scopes in access token: openid profile email role api1
2018-11-28 20:43:35.504 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at email email_verified role admin user
2018-11-28 20:43:35.504 +03:00 [DBG] Scopes in access token: openid profile email role api1
2018-11-28 20:43:35.505 +03:00 [INF] Profile service returned to the following claim types: sub preferred_username name email email_verified
2018-11-28 20:43:35.505 +03:00 [DBG] End userinfo request
2018-11-28 20:43:38.838 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:43:38.838 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:43:43.399 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:43:43.399 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:43:43.402 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:43:53.082 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:43:53.083 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:43:53.083 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:43:53.955 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:43:53.955 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:43:55.671 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-28 20:43:55.671 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-29 15:26:35.986 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-29 15:26:36.032 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-29 15:26:36.035 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-29 15:26:36.035 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-29 15:26:36.035 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-29 15:26:36.035 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-29 15:26:38.782 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-11-29 15:26:38.788 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-11-29 15:26:38.789 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-11-29 15:26:38.791 +03:00 [INF] Identity.Application was not authenticated. Failure message: No principal.
2018-11-29 15:26:38.804 +03:00 [INF] Identity.Application was not authenticated. Failure message: No principal.
2018-11-29 15:26:44.268 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-29 15:26:44.273 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-29 15:26:44.283 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-29 15:26:44.283 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-29 15:26:44.283 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-29 15:26:44.283 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-29 15:26:44.284 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-29 15:26:44.284 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-29 15:26:44.290 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-29 15:26:44.290 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-29 15:26:44.290 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-29 15:26:44.290 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-29 15:26:44.294 +03:00 [DBG] Start discovery request
2018-11-29 15:26:44.294 +03:00 [DBG] Start discovery request
2018-11-29 15:26:44.504 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-29 15:26:44.504 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-29 15:26:44.504 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-29 15:26:44.504 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-29 15:26:44.505 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-29 15:26:44.505 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-29 15:26:44.511 +03:00 [DBG] Start key discovery request
2018-11-29 15:26:44.511 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-29 15:26:44.511 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-29 15:26:44.511 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-29 15:26:44.511 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-29 15:26:44.511 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-29 15:26:44.512 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-29 15:26:44.512 +03:00 [DBG] Start key discovery request
2018-11-29 15:26:45.559 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-29 15:26:45.561 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-29 15:26:45.561 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-29 15:26:45.564 +03:00 [DBG] Start authorize request
2018-11-29 15:26:45.580 +03:00 [DBG] No user present in authorize request
2018-11-29 15:26:45.584 +03:00 [DBG] Start authorize request protocol validation
2018-11-29 15:26:45.629 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-29 15:26:45.640 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://10.1.1.230:4200",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "XTYOKV3HEQ85qe3NAahZedgIt9rkDhyWKllkmEw9",
  "Nonce": "XTYOKV3HEQ85qe3NAahZedgIt9rkDhyWKllkmEw9",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "XTYOKV3HEQ85qe3NAahZedgIt9rkDhyWKllkmEw9",
    "redirect_uri": "http://10.1.1.230:4200",
    "scope": "openid profile email role api1",
    "nonce": "XTYOKV3HEQ85qe3NAahZedgIt9rkDhyWKllkmEw9"
  }
}
2018-11-29 15:26:45.646 +03:00 [INF] Showing login: User is not authenticated
2018-11-29 15:26:45.780 +03:00 [DBG] Start authorize request protocol validation
2018-11-29 15:26:45.781 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-29 17:47:30.020 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-29 17:47:30.021 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-29 17:47:30.021 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-29 17:47:30.021 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-29 17:47:30.021 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-29 17:47:30.021 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-29 17:47:30.021 +03:00 [DBG] Start discovery request
2018-11-29 17:47:30.028 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://10.1.1.230:4200
2018-11-29 17:47:30.028 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-29 17:47:30.028 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-29 17:47:30.028 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-29 17:47:30.028 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-29 17:47:30.028 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-29 17:47:30.028 +03:00 [DBG] Start discovery request
2018-11-29 17:47:30.094 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-29 17:47:30.094 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-29 17:47:30.094 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-29 17:47:30.094 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-29 17:47:30.094 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-29 17:47:30.094 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-29 17:47:30.094 +03:00 [DBG] Start key discovery request
2018-11-29 17:47:30.095 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://10.1.1.230:4200
2018-11-29 17:47:30.095 +03:00 [DBG] Client list checked and origin: http://10.1.1.230:4200 is allowed
2018-11-29 17:47:30.095 +03:00 [DBG] CorsPolicyService allowed origin: http://10.1.1.230:4200
2018-11-29 17:47:30.095 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-29 17:47:30.096 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-29 17:47:30.096 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-29 17:47:30.096 +03:00 [DBG] Start key discovery request
2018-11-29 18:00:49.006 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-29 18:00:49.101 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-29 18:00:49.104 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-29 18:00:49.104 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-29 18:00:49.104 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-29 18:00:49.105 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-29 18:03:45.002 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-11-29 18:03:45.007 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-11-29 18:03:45.010 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-11-29 18:03:45.010 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-11-29 18:03:45.010 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-11-29 18:03:45.010 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-11-29 18:03:45.012 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-29 18:03:45.012 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-29 18:03:45.154 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-29 18:03:45.154 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-29 18:03:45.154 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-29 18:03:45.154 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-29 18:03:45.157 +03:00 [DBG] Start discovery request
2018-11-29 18:03:45.157 +03:00 [DBG] Start discovery request
2018-11-29 18:03:45.251 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-11-29 18:03:45.252 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-11-29 18:03:45.252 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-11-29 18:03:45.252 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-29 18:03:45.252 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-29 18:03:45.253 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-29 18:03:45.255 +03:00 [DBG] Start key discovery request
2018-11-29 18:03:45.265 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-11-29 18:03:45.265 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-11-29 18:03:45.265 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-11-29 18:03:45.265 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-29 18:03:45.266 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-29 18:03:45.266 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-29 18:03:45.266 +03:00 [DBG] Start key discovery request
2018-11-29 18:03:46.875 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-29 18:03:46.878 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-29 18:03:46.878 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-29 18:03:46.881 +03:00 [DBG] Start authorize request
2018-11-29 18:03:46.902 +03:00 [DBG] No user present in authorize request
2018-11-29 18:03:46.906 +03:00 [DBG] Start authorize request protocol validation
2018-11-29 18:03:46.926 +03:00 [ERR] Invalid redirect_uri: http://localhost:4200
{
  "ClientId": "angular",
  "ClientName": "angular",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "pmN1IRiFpITm4xbNZV70AH4dCShwGpVeuN4sMAGd",
    "redirect_uri": "http://localhost:4200",
    "scope": "openid profile email role api1",
    "nonce": "pmN1IRiFpITm4xbNZV70AH4dCShwGpVeuN4sMAGd"
  }
}
2018-11-29 18:03:46.928 +03:00 [ERR] Request validation failed
2018-11-29 18:03:46.928 +03:00 [INF] {
  "ClientId": "angular",
  "ClientName": "angular",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "pmN1IRiFpITm4xbNZV70AH4dCShwGpVeuN4sMAGd",
    "redirect_uri": "http://localhost:4200",
    "scope": "openid profile email role api1",
    "nonce": "pmN1IRiFpITm4xbNZV70AH4dCShwGpVeuN4sMAGd"
  }
}
2018-11-29 18:03:46.983 +03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "angular",
  "ClientName": "angular",
  "Endpoint": "Authorize",
  "Scopes": "",
  "Error": "unauthorized_client",
  "ErrorDescription": "Invalid redirect_uri",
  "ActivityId": "0HLIM1DPHRHKO:00000001",
  "TimeStamp": "2018-11-29T15:03:46Z",
  "ProcessId": 26073,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-11-29 18:04:01.353 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-29 18:04:01.353 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-29 18:04:01.354 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-29 18:04:01.354 +03:00 [DBG] Start authorize request
2018-11-29 18:04:01.354 +03:00 [DBG] No user present in authorize request
2018-11-29 18:04:01.354 +03:00 [DBG] Start authorize request protocol validation
2018-11-29 18:04:01.354 +03:00 [ERR] Invalid redirect_uri: http://localhost:4200
{
  "ClientId": "angular",
  "ClientName": "angular",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "LuVFQWeUM7CFNLZZ54x0WYH9c3UQpEjDSpTSoJb4",
    "redirect_uri": "http://localhost:4200",
    "scope": "openid profile email role api1",
    "nonce": "LuVFQWeUM7CFNLZZ54x0WYH9c3UQpEjDSpTSoJb4"
  }
}
2018-11-29 18:04:01.354 +03:00 [ERR] Request validation failed
2018-11-29 18:04:01.354 +03:00 [INF] {
  "ClientId": "angular",
  "ClientName": "angular",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "LuVFQWeUM7CFNLZZ54x0WYH9c3UQpEjDSpTSoJb4",
    "redirect_uri": "http://localhost:4200",
    "scope": "openid profile email role api1",
    "nonce": "LuVFQWeUM7CFNLZZ54x0WYH9c3UQpEjDSpTSoJb4"
  }
}
2018-11-29 18:04:01.354 +03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "angular",
  "ClientName": "angular",
  "Endpoint": "Authorize",
  "Scopes": "",
  "Error": "unauthorized_client",
  "ErrorDescription": "Invalid redirect_uri",
  "ActivityId": "0HLIM1DPHRHKO:00000003",
  "TimeStamp": "2018-11-29T15:04:01Z",
  "ProcessId": 26073,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-11-29 18:05:57.694 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-29 18:05:57.694 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-29 18:05:57.694 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-29 18:05:57.694 +03:00 [DBG] Start authorize request
2018-11-29 18:05:57.695 +03:00 [DBG] No user present in authorize request
2018-11-29 18:05:57.695 +03:00 [DBG] Start authorize request protocol validation
2018-11-29 18:05:57.695 +03:00 [ERR] Invalid redirect_uri: http://localhost:4200
{
  "ClientId": "angular",
  "ClientName": "angular",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "Ot2HXSvMZIRjRVVOiEWWOX796haC6HQRAGRhgl0s",
    "redirect_uri": "http://localhost:4200",
    "scope": "openid profile email role api1",
    "nonce": "Ot2HXSvMZIRjRVVOiEWWOX796haC6HQRAGRhgl0s"
  }
}
2018-11-29 18:05:57.695 +03:00 [ERR] Request validation failed
2018-11-29 18:05:57.695 +03:00 [INF] {
  "ClientId": "angular",
  "ClientName": "angular",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "Ot2HXSvMZIRjRVVOiEWWOX796haC6HQRAGRhgl0s",
    "redirect_uri": "http://localhost:4200",
    "scope": "openid profile email role api1",
    "nonce": "Ot2HXSvMZIRjRVVOiEWWOX796haC6HQRAGRhgl0s"
  }
}
2018-11-29 18:05:57.695 +03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "angular",
  "ClientName": "angular",
  "Endpoint": "Authorize",
  "Scopes": "",
  "Error": "unauthorized_client",
  "ErrorDescription": "Invalid redirect_uri",
  "ActivityId": "0HLIM1DPHRHKP:00000001",
  "TimeStamp": "2018-11-29T15:05:57Z",
  "ProcessId": 26073,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-11-29 18:06:12.735 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-11-29 18:06:17.141 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-11-29 18:06:17.141 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-11-29 18:06:17.141 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-11-29 18:06:17.141 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-29 18:06:17.141 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-29 18:06:17.141 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-29 18:06:17.141 +03:00 [DBG] Start discovery request
2018-11-29 18:06:17.152 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-11-29 18:06:17.152 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-11-29 18:06:17.152 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-11-29 18:06:17.152 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-29 18:06:17.153 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-29 18:06:17.153 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-29 18:06:17.153 +03:00 [DBG] Start discovery request
2018-11-29 18:06:17.195 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-11-29 18:06:17.195 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-11-29 18:06:17.195 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-11-29 18:06:17.195 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-29 18:06:17.195 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-29 18:06:17.195 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-29 18:06:17.195 +03:00 [DBG] Start key discovery request
2018-11-29 18:06:17.243 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-11-29 18:06:17.243 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-11-29 18:06:17.243 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-11-29 18:06:17.244 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-29 18:06:17.244 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-29 18:06:17.244 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-29 18:06:17.244 +03:00 [DBG] Start key discovery request
2018-11-29 18:06:26.858 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-29 18:06:26.859 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-29 18:06:26.859 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-29 18:06:26.859 +03:00 [DBG] Start authorize request
2018-11-29 18:06:26.859 +03:00 [DBG] No user present in authorize request
2018-11-29 18:06:26.859 +03:00 [DBG] Start authorize request protocol validation
2018-11-29 18:06:26.859 +03:00 [ERR] Invalid redirect_uri: http://localhost:4200
{
  "ClientId": "angular",
  "ClientName": "angular",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "PP5lbGBcvnuStP9rEoqLIV1rPNILldYzoWDR2nRH",
    "redirect_uri": "http://localhost:4200",
    "scope": "openid profile email role api1",
    "nonce": "PP5lbGBcvnuStP9rEoqLIV1rPNILldYzoWDR2nRH"
  }
}
2018-11-29 18:06:26.859 +03:00 [ERR] Request validation failed
2018-11-29 18:06:26.859 +03:00 [INF] {
  "ClientId": "angular",
  "ClientName": "angular",
  "AllowedRedirectUris": [
    "http://10.1.1.230:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "PP5lbGBcvnuStP9rEoqLIV1rPNILldYzoWDR2nRH",
    "redirect_uri": "http://localhost:4200",
    "scope": "openid profile email role api1",
    "nonce": "PP5lbGBcvnuStP9rEoqLIV1rPNILldYzoWDR2nRH"
  }
}
2018-11-29 18:06:26.859 +03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "angular",
  "ClientName": "angular",
  "Endpoint": "Authorize",
  "Scopes": "",
  "Error": "unauthorized_client",
  "ErrorDescription": "Invalid redirect_uri",
  "ActivityId": "0HLIM1DPHRHKP:00000007",
  "TimeStamp": "2018-11-29T15:06:26Z",
  "ProcessId": 26073,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-11-29 18:07:33.349 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-29 18:07:33.385 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-29 18:07:33.387 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-29 18:07:33.388 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-29 18:07:33.388 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-29 18:07:33.388 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-29 18:07:43.705 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-29 18:07:43.825 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-29 18:07:43.826 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-29 18:07:43.829 +03:00 [DBG] Start authorize request
2018-11-29 18:07:43.846 +03:00 [DBG] No user present in authorize request
2018-11-29 18:07:43.851 +03:00 [DBG] Start authorize request protocol validation
2018-11-29 18:07:43.895 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-29 18:07:43.959 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "lAHpA8uTE76nSrMY8Kq4dK5OXVv3nrXZFqatONun",
  "Nonce": "lAHpA8uTE76nSrMY8Kq4dK5OXVv3nrXZFqatONun",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "lAHpA8uTE76nSrMY8Kq4dK5OXVv3nrXZFqatONun",
    "redirect_uri": "http://localhost:4200",
    "scope": "openid profile email role api1",
    "nonce": "lAHpA8uTE76nSrMY8Kq4dK5OXVv3nrXZFqatONun"
  }
}
2018-11-29 18:07:43.968 +03:00 [INF] Showing login: User is not authenticated
2018-11-29 18:07:44.103 +03:00 [DBG] Start authorize request protocol validation
2018-11-29 18:07:44.104 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-29 18:08:19.718 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "ss@ss.com",
  "SubjectId": "55f05e6e-9cdb-4df8-8b0a-f5ea34a9c29c",
  "DisplayName": "ss@ss.com",
  "Endpoint": "UI",
  "ActivityId": "0HLIM1HHVHRLK:00000006",
  "TimeStamp": "2018-11-29T15:08:19Z",
  "ProcessId": 30335,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-11-29 18:08:19.732 +03:00 [DBG] Augmenting SignInContext
2018-11-29 18:08:19.734 +03:00 [DBG] Adding idp claim with value: local
2018-11-29 18:08:19.734 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-29 18:08:19.763 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-29 18:08:19.799 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-29 18:08:19.800 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-29 18:08:19.800 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-11-29 18:08:19.801 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-11-29 18:08:19.801 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-11-29 18:08:19.805 +03:00 [DBG] Start authorize callback request
2018-11-29 18:08:19.809 +03:00 [DBG] User in authorize request: 55f05e6e-9cdb-4df8-8b0a-f5ea34a9c29c
2018-11-29 18:08:19.809 +03:00 [DBG] Start authorize request protocol validation
2018-11-29 18:08:19.809 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-29 18:08:19.809 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "55f05e6e-9cdb-4df8-8b0a-f5ea34a9c29c",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "lAHpA8uTE76nSrMY8Kq4dK5OXVv3nrXZFqatONun",
  "Nonce": "lAHpA8uTE76nSrMY8Kq4dK5OXVv3nrXZFqatONun",
  "SessionId": "dbbe4c81bbd0285e13910b4a5503c31b",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "lAHpA8uTE76nSrMY8Kq4dK5OXVv3nrXZFqatONun",
    "redirect_uri": "http://localhost:4200",
    "scope": "openid profile email role api1",
    "nonce": "lAHpA8uTE76nSrMY8Kq4dK5OXVv3nrXZFqatONun"
  }
}
2018-11-29 18:08:19.857 +03:00 [DBG] user_consent grant with value: angular|55f05e6e-9cdb-4df8-8b0a-f5ea34a9c29c not found in store.
2018-11-29 18:08:19.857 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-11-29 18:08:19.857 +03:00 [INF] Showing consent: User has not yet consented
2018-11-29 18:08:19.870 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-29 18:08:19.870 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-29 18:08:19.907 +03:00 [DBG] Start authorize request protocol validation
2018-11-29 18:08:19.907 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-29 18:08:25.701 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-29 18:08:25.701 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-29 18:08:25.732 +03:00 [DBG] Start authorize request protocol validation
2018-11-29 18:08:25.732 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-29 18:08:25.768 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-29 18:08:25.768 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-29 18:08:25.768 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-11-29 18:08:25.768 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-11-29 18:08:25.768 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-11-29 18:08:25.769 +03:00 [DBG] Start authorize callback request
2018-11-29 18:08:25.809 +03:00 [DBG] User in authorize request: 55f05e6e-9cdb-4df8-8b0a-f5ea34a9c29c
2018-11-29 18:08:25.810 +03:00 [DBG] Start authorize request protocol validation
2018-11-29 18:08:25.812 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-29 18:08:25.812 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "55f05e6e-9cdb-4df8-8b0a-f5ea34a9c29c",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "lAHpA8uTE76nSrMY8Kq4dK5OXVv3nrXZFqatONun",
  "Nonce": "lAHpA8uTE76nSrMY8Kq4dK5OXVv3nrXZFqatONun",
  "SessionId": "dbbe4c81bbd0285e13910b4a5503c31b",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "lAHpA8uTE76nSrMY8Kq4dK5OXVv3nrXZFqatONun",
    "redirect_uri": "http://localhost:4200",
    "scope": "openid profile email role api1",
    "nonce": "lAHpA8uTE76nSrMY8Kq4dK5OXVv3nrXZFqatONun"
  }
}
2018-11-29 18:08:25.817 +03:00 [DBG] user_consent grant with value: angular|55f05e6e-9cdb-4df8-8b0a-f5ea34a9c29c not found in store.
2018-11-29 18:08:25.818 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-11-29 18:08:25.827 +03:00 [INF] User consented to scopes: ["openid","profile","email","role","api1"]
2018-11-29 18:08:25.838 +03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email","role","api1"]
2018-11-29 18:08:25.841 +03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 55f05e6e-9cdb-4df8-8b0a-f5ea34a9c29c
2018-11-29 18:08:25.857 +03:00 [DBG] Creating Implicit Flow response.
2018-11-29 18:08:25.868 +03:00 [DBG] Getting claims for access token for client: angular
2018-11-29 18:08:25.869 +03:00 [DBG] Getting claims for access token for subject: 55f05e6e-9cdb-4df8-8b0a-f5ea34a9c29c
2018-11-29 18:08:26.044 +03:00 [DBG] Getting claims for identity token for subject: 55f05e6e-9cdb-4df8-8b0a-f5ea34a9c29c and client: angular
2018-11-29 18:08:26.057 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "55f05e6e-9cdb-4df8-8b0a-f5ea34a9c29c",
  "Scopes": "openid profile email role api1",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****bBOQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****uXyQ"
    }
  ],
  "ActivityId": "0HLIM1HHVHRLN:00000002",
  "TimeStamp": "2018-11-29T15:08:26Z",
  "ProcessId": 30335,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-11-29 18:08:26.060 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "55f05e6e-9cdb-4df8-8b0a-f5ea34a9c29c",
  "ClientId": "angular",
  "RedirectUri": "http://localhost:4200",
  "State": "lAHpA8uTE76nSrMY8Kq4dK5OXVv3nrXZFqatONun",
  "Scope": "openid profile email role api1"
}
2018-11-29 18:08:26.074 +03:00 [DBG] Augmenting SignInContext
2018-11-29 18:08:26.075 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-29 18:08:26.551 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-11-29 18:08:26.551 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-11-29 18:08:26.554 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-11-29 18:08:26.554 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-11-29 18:08:26.555 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-29 18:08:26.557 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-29 18:08:26.557 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-29 18:08:26.562 +03:00 [DBG] Start discovery request
2018-11-29 18:08:26.567 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-11-29 18:08:26.567 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-11-29 18:08:26.567 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-29 18:08:26.567 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-29 18:08:26.567 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-29 18:08:26.568 +03:00 [DBG] Start discovery request
2018-11-29 18:08:26.637 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-11-29 18:08:26.637 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-11-29 18:08:26.637 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-11-29 18:08:26.637 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-11-29 18:08:26.637 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-11-29 18:08:26.637 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-29 18:08:26.637 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-11-29 18:08:26.638 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-29 18:08:26.638 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-29 18:08:26.638 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-29 18:08:26.638 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-29 18:08:26.649 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-29 18:08:26.652 +03:00 [DBG] Start key discovery request
2018-11-29 18:08:26.653 +03:00 [DBG] Start key discovery request
2018-11-29 18:08:28.239 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-29 18:08:28.239 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-29 18:08:28.239 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-29 18:08:28.239 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-29 18:08:28.239 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-29 18:08:28.239 +03:00 [DBG] Start authorize request
2018-11-29 18:08:28.239 +03:00 [DBG] User in authorize request: 55f05e6e-9cdb-4df8-8b0a-f5ea34a9c29c
2018-11-29 18:08:28.239 +03:00 [DBG] Start authorize request protocol validation
2018-11-29 18:08:28.239 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-29 18:08:28.240 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "55f05e6e-9cdb-4df8-8b0a-f5ea34a9c29c",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "T9ZYWaocAl3VACrdGtvaI2w22JkrrlNBKx0LcbRA",
  "Nonce": "T9ZYWaocAl3VACrdGtvaI2w22JkrrlNBKx0LcbRA",
  "SessionId": "dbbe4c81bbd0285e13910b4a5503c31b",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "T9ZYWaocAl3VACrdGtvaI2w22JkrrlNBKx0LcbRA",
    "redirect_uri": "http://localhost:4200",
    "scope": "openid profile email role api1",
    "nonce": "T9ZYWaocAl3VACrdGtvaI2w22JkrrlNBKx0LcbRA"
  }
}
2018-11-29 18:08:28.252 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-11-29 18:08:28.252 +03:00 [DBG] Creating Implicit Flow response.
2018-11-29 18:08:28.252 +03:00 [DBG] Getting claims for access token for client: angular
2018-11-29 18:08:28.252 +03:00 [DBG] Getting claims for access token for subject: 55f05e6e-9cdb-4df8-8b0a-f5ea34a9c29c
2018-11-29 18:08:28.255 +03:00 [DBG] Getting claims for identity token for subject: 55f05e6e-9cdb-4df8-8b0a-f5ea34a9c29c and client: angular
2018-11-29 18:08:28.257 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "55f05e6e-9cdb-4df8-8b0a-f5ea34a9c29c",
  "Scopes": "openid profile email role api1",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****o3nQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****G2bQ"
    }
  ],
  "ActivityId": "0HLIM1HHVHRLN:00000003",
  "TimeStamp": "2018-11-29T15:08:28Z",
  "ProcessId": 30335,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-11-29 18:08:28.257 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "55f05e6e-9cdb-4df8-8b0a-f5ea34a9c29c",
  "ClientId": "angular",
  "RedirectUri": "http://localhost:4200",
  "State": "T9ZYWaocAl3VACrdGtvaI2w22JkrrlNBKx0LcbRA",
  "Scope": "openid profile email role api1"
}
2018-11-29 18:08:29.239 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-11-29 18:08:29.240 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-11-29 18:08:29.240 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-11-29 18:08:29.240 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-29 18:08:29.240 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-29 18:08:29.240 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-29 18:08:29.240 +03:00 [DBG] Start discovery request
2018-11-29 18:08:29.255 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-11-29 18:08:29.255 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-11-29 18:08:29.255 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-11-29 18:08:29.255 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-29 18:08:29.256 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-29 18:08:29.256 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-29 18:08:29.256 +03:00 [DBG] Start discovery request
2018-11-29 18:08:29.309 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-11-29 18:08:29.309 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-11-29 18:08:29.309 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-11-29 18:08:29.310 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-29 18:08:29.310 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-29 18:08:29.310 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-29 18:08:29.310 +03:00 [DBG] Start key discovery request
2018-11-29 18:08:29.310 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-11-29 18:08:29.310 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-11-29 18:08:29.311 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-11-29 18:08:29.311 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-29 18:08:29.311 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-29 18:08:29.311 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-29 18:08:29.311 +03:00 [DBG] Start key discovery request
2018-11-29 18:08:46.039 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-29 18:08:46.039 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-29 18:08:46.039 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-29 18:08:46.039 +03:00 [DBG] Start discovery request
2018-11-29 18:08:46.209 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-29 18:08:46.210 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-29 18:08:46.210 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-29 18:08:46.210 +03:00 [DBG] Start key discovery request
2018-11-29 18:08:53.584 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-29 18:08:53.584 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-29 18:08:53.584 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-29 18:08:53.584 +03:00 [DBG] Start discovery request
2018-11-29 18:08:53.740 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-29 18:08:53.740 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-29 18:08:53.741 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-29 18:08:53.741 +03:00 [DBG] Start key discovery request
2018-11-29 18:10:43.754 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-29 18:10:43.792 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-29 18:10:43.795 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-29 18:10:43.795 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-29 18:10:43.796 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-29 18:10:43.796 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-11-29 18:10:45.500 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-29 18:10:45.518 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-29 18:10:47.856 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-29 18:10:47.856 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-29 18:10:47.872 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-11-29 18:10:47.875 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-11-29 18:10:47.876 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-11-29 18:10:47.920 +03:00 [DBG] Processing signout request for 55f05e6e-9cdb-4df8-8b0a-f5ea34a9c29c
2018-11-29 18:10:47.926 +03:00 [DBG] Start end session request validation
2018-11-29 18:10:47.936 +03:00 [DBG] Start identity token validation
2018-11-29 18:10:48.002 +03:00 [DBG] Client found: angular / angular
2018-11-29 18:10:49.494 +03:00 [ERR] User marked as not active: 55f05e6e-9cdb-4df8-8b0a-f5ea34a9c29c
2018-11-29 18:10:49.523 +03:00 [INF] End session request validation failure: Error validating id token hint
{
  "SubjectId": "unknown",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6ImU5ZWE4ZDQxYTNmNDEzNzM2MjY5YWZhZTkzMGY0NWYzIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1NDM1MDQxMDgsImV4cCI6MTU0MzUwNDQwOCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiYW5ndWxhciIsIm5vbmNlIjoiVDlaWVdhb2NBbDNWQUNyZEd0dmFJMncyMkprcnJsTkJLeDBMY2JSQSIsImlhdCI6MTU0MzUwNDEwOCwiYXRfaGFzaCI6IkRaUTRRTnlabm01QlFWZWFLR2hpZHciLCJzaWQiOiJkYmJlNGM4MWJiZDAyODVlMTM5MTBiNGE1NTAzYzMxYiIsInN1YiI6IjU1ZjA1ZTZlLTljZGItNGRmOC04YjBhLWY1ZWEzNGE5YzI5YyIsImF1dGhfdGltZSI6MTU0MzUwNDA5OSwiaWRwIjoibG9jYWwiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJzc0Bzcy5jb20iLCJuYW1lIjoic3NAc3MuY29tIiwiZW1haWwiOiJ0ZXN0QHRlc3QuY29tIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJhbXIiOlsicHdkIl19.U9RyB9TOai3LMaADCS99i0pJozPNokA3mBEBGmTX7M9FT6Yb44IC2WqKwc4M7XFUCMYuy-p_yR6iDrrA_sgYFBDFAcrJFTLlruPVhTR1qdyuWDFTMKx43poIdqJE-OUS2G-gmGq4GpRl7Q1yBQQTrPvJ43yrNvNvI5KI9hSQqgDaWnkwdPBrLnewLixCqJs2xIjH_lmX4GFIqZSHNBYSLF3AW3TiBLZEVV4UCCwX_mvHuifQsK7PTIXFsrbPZB3ZJ-OzWXWHuJOfg90zCF-k7f4lrPFH7vzsAxu0TGN670liX3sBt-7RKeyKMDHiLOcgxsqf8JgreNtYUYHxgpo3nQ",
    "post_logout_redirect_uri": "http://localhost:4200"
  }
}
2018-11-29 18:10:49.523 +03:00 [ERR] Error processing end session request Invalid request
2018-11-29 18:10:49.612 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-29 18:10:49.614 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-29 18:10:53.068 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-29 18:10:53.068 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-29 18:10:53.259 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-11-29 18:10:53.262 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-11-29 18:10:53.263 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-11-29 18:10:53.290 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "55f05e6e-9cdb-4df8-8b0a-f5ea34a9c29c",
  "DisplayName": "ss@ss.com",
  "ActivityId": "0HLIM1JANDSH4:00000003",
  "TimeStamp": "2018-11-29T15:10:53Z",
  "ProcessId": 32454,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-11-29 18:10:53.598 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-11-29 18:10:53.600 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-11-29 18:10:53.601 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-11-29 18:10:53.605 +03:00 [DBG] Processing signout callback request
2018-11-29 18:10:53.635 +03:00 [DBG] Client front-channel logout URLs: http://localhost:4200?sid=dbbe4c81bbd0285e13910b4a5503c31b&iss=http%3A%2F%2Flocalhost%3A5000
2018-11-29 18:10:53.635 +03:00 [DBG] No client back-channel logout URLs
2018-11-29 18:10:53.635 +03:00 [INF] Successful signout callback.
2018-11-29 18:10:53.637 +03:00 [DBG] Client front-channel iframe urls: ["http://localhost:4200?sid=dbbe4c81bbd0285e13910b4a5503c31b&iss=http%3A%2F%2Flocalhost%3A5000"]
2018-11-29 18:10:53.647 +03:00 [DBG] No client back-channel iframe urls
2018-11-29 18:10:54.583 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-11-29 18:10:54.584 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-11-29 18:10:54.586 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-11-29 18:10:54.586 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-11-29 18:10:54.588 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-29 18:10:54.589 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-29 18:10:54.590 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-29 18:10:54.593 +03:00 [DBG] Start discovery request
2018-11-29 18:10:54.594 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-11-29 18:10:54.594 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-11-29 18:10:54.595 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-29 18:10:54.595 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-29 18:10:54.595 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-29 18:10:54.595 +03:00 [DBG] Start discovery request
2018-11-29 18:10:54.817 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-11-29 18:10:54.817 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-11-29 18:10:54.818 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-11-29 18:10:54.818 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-11-29 18:10:54.818 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-11-29 18:10:54.818 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-11-29 18:10:54.818 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-29 18:10:54.818 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-29 18:10:54.819 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-29 18:10:54.819 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-29 18:10:54.821 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-29 18:10:54.821 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-29 18:10:54.827 +03:00 [DBG] Start key discovery request
2018-11-29 18:10:54.830 +03:00 [DBG] Start key discovery request
2018-11-29 18:11:00.012 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-11-29 18:11:00.012 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-11-29 18:11:00.012 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-11-29 18:11:00.012 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-29 18:11:00.013 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-29 18:11:00.013 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-11-29 18:11:00.013 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-29 18:11:00.013 +03:00 [DBG] Start discovery request
2018-11-29 18:11:00.013 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-11-29 18:11:00.013 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-11-29 18:11:00.013 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-29 18:11:00.013 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-29 18:11:00.013 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-29 18:11:00.013 +03:00 [DBG] Start discovery request
2018-11-29 18:11:00.228 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-11-29 18:11:00.229 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-11-29 18:11:00.229 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-11-29 18:11:00.229 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-29 18:11:00.230 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-29 18:11:00.230 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-29 18:11:00.230 +03:00 [DBG] Start key discovery request
2018-11-29 18:11:00.230 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-11-29 18:11:00.230 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-11-29 18:11:00.230 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-11-29 18:11:00.230 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-29 18:11:00.231 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-29 18:11:00.231 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-29 18:11:00.231 +03:00 [DBG] Start key discovery request
2018-11-29 18:11:01.977 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-29 18:11:01.979 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-29 18:11:01.979 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-29 18:11:01.982 +03:00 [DBG] Start authorize request
2018-11-29 18:11:01.991 +03:00 [DBG] No user present in authorize request
2018-11-29 18:11:01.996 +03:00 [DBG] Start authorize request protocol validation
2018-11-29 18:11:02.046 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-29 18:11:02.055 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "Ag6PzlaC3320IyKbVs9K5WzP1br2iPT9hSjnJPNf",
  "Nonce": "Ag6PzlaC3320IyKbVs9K5WzP1br2iPT9hSjnJPNf",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "Ag6PzlaC3320IyKbVs9K5WzP1br2iPT9hSjnJPNf",
    "redirect_uri": "http://localhost:4200",
    "scope": "openid profile email role api1",
    "nonce": "Ag6PzlaC3320IyKbVs9K5WzP1br2iPT9hSjnJPNf"
  }
}
2018-11-29 18:11:02.067 +03:00 [INF] Showing login: User is not authenticated
2018-11-29 18:11:02.133 +03:00 [DBG] Start authorize request protocol validation
2018-11-29 18:11:02.134 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-29 18:11:32.607 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "admin@admin.com",
  "SubjectId": "d5efccdc-fd27-43b7-b4ed-cd9614bb84d6",
  "DisplayName": "admin@admin.com",
  "Endpoint": "UI",
  "ActivityId": "0HLIM1JANDSH4:00000009",
  "TimeStamp": "2018-11-29T15:11:32Z",
  "ProcessId": 32454,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-11-29 18:11:32.621 +03:00 [DBG] Augmenting SignInContext
2018-11-29 18:11:32.623 +03:00 [DBG] Adding idp claim with value: local
2018-11-29 18:11:32.623 +03:00 [DBG] Adding amr claim with value: pwd
2018-11-29 18:11:32.642 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-29 18:11:32.662 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-29 18:11:32.662 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-29 18:11:32.662 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-11-29 18:11:32.662 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-11-29 18:11:32.662 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-11-29 18:11:32.672 +03:00 [DBG] Start authorize callback request
2018-11-29 18:11:32.676 +03:00 [DBG] User in authorize request: d5efccdc-fd27-43b7-b4ed-cd9614bb84d6
2018-11-29 18:11:32.676 +03:00 [DBG] Start authorize request protocol validation
2018-11-29 18:11:32.676 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-29 18:11:32.676 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "d5efccdc-fd27-43b7-b4ed-cd9614bb84d6",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "Ag6PzlaC3320IyKbVs9K5WzP1br2iPT9hSjnJPNf",
  "Nonce": "Ag6PzlaC3320IyKbVs9K5WzP1br2iPT9hSjnJPNf",
  "SessionId": "7d1dbdfc0e527789ae591a44864272ea",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "Ag6PzlaC3320IyKbVs9K5WzP1br2iPT9hSjnJPNf",
    "redirect_uri": "http://localhost:4200",
    "scope": "openid profile email role api1",
    "nonce": "Ag6PzlaC3320IyKbVs9K5WzP1br2iPT9hSjnJPNf"
  }
}
2018-11-29 18:11:32.691 +03:00 [DBG] user_consent grant with value: angular|d5efccdc-fd27-43b7-b4ed-cd9614bb84d6 not found in store.
2018-11-29 18:11:32.692 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-11-29 18:11:32.692 +03:00 [INF] Showing consent: User has not yet consented
2018-11-29 18:11:32.700 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-29 18:11:32.700 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-29 18:11:32.736 +03:00 [DBG] Start authorize request protocol validation
2018-11-29 18:11:32.737 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-29 18:11:36.891 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-29 18:11:36.891 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-29 18:11:36.912 +03:00 [DBG] Start authorize request protocol validation
2018-11-29 18:11:36.912 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-29 18:11:36.934 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-29 18:11:36.934 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-29 18:11:36.935 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-11-29 18:11:36.935 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-11-29 18:11:36.935 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-11-29 18:11:36.935 +03:00 [DBG] Start authorize callback request
2018-11-29 18:11:36.938 +03:00 [DBG] User in authorize request: d5efccdc-fd27-43b7-b4ed-cd9614bb84d6
2018-11-29 18:11:36.938 +03:00 [DBG] Start authorize request protocol validation
2018-11-29 18:11:36.938 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-29 18:11:36.939 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "d5efccdc-fd27-43b7-b4ed-cd9614bb84d6",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "Ag6PzlaC3320IyKbVs9K5WzP1br2iPT9hSjnJPNf",
  "Nonce": "Ag6PzlaC3320IyKbVs9K5WzP1br2iPT9hSjnJPNf",
  "SessionId": "7d1dbdfc0e527789ae591a44864272ea",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "Ag6PzlaC3320IyKbVs9K5WzP1br2iPT9hSjnJPNf",
    "redirect_uri": "http://localhost:4200",
    "scope": "openid profile email role api1",
    "nonce": "Ag6PzlaC3320IyKbVs9K5WzP1br2iPT9hSjnJPNf"
  }
}
2018-11-29 18:11:36.939 +03:00 [DBG] user_consent grant with value: angular|d5efccdc-fd27-43b7-b4ed-cd9614bb84d6 not found in store.
2018-11-29 18:11:36.939 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-11-29 18:11:36.945 +03:00 [INF] User consented to scopes: ["openid","profile","email","role","api1"]
2018-11-29 18:11:36.947 +03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email","role","api1"]
2018-11-29 18:11:36.951 +03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: d5efccdc-fd27-43b7-b4ed-cd9614bb84d6
2018-11-29 18:11:36.968 +03:00 [DBG] Creating Implicit Flow response.
2018-11-29 18:11:36.983 +03:00 [DBG] Getting claims for access token for client: angular
2018-11-29 18:11:36.983 +03:00 [DBG] Getting claims for access token for subject: d5efccdc-fd27-43b7-b4ed-cd9614bb84d6
2018-11-29 18:11:37.143 +03:00 [DBG] Getting claims for identity token for subject: d5efccdc-fd27-43b7-b4ed-cd9614bb84d6 and client: angular
2018-11-29 18:11:37.158 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "d5efccdc-fd27-43b7-b4ed-cd9614bb84d6",
  "Scopes": "openid profile email role api1",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****1MiQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****sx_w"
    }
  ],
  "ActivityId": "0HLIM1JANDSH4:0000000D",
  "TimeStamp": "2018-11-29T15:11:37Z",
  "ProcessId": 32454,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-11-29 18:11:37.161 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "d5efccdc-fd27-43b7-b4ed-cd9614bb84d6",
  "ClientId": "angular",
  "RedirectUri": "http://localhost:4200",
  "State": "Ag6PzlaC3320IyKbVs9K5WzP1br2iPT9hSjnJPNf",
  "Scope": "openid profile email role api1"
}
2018-11-29 18:11:37.173 +03:00 [DBG] Augmenting SignInContext
2018-11-29 18:11:37.173 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-11-29 18:11:37.673 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-11-29 18:11:37.673 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-11-29 18:11:37.673 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-11-29 18:11:37.673 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-29 18:11:37.674 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-29 18:11:37.674 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-29 18:11:37.674 +03:00 [DBG] Start discovery request
2018-11-29 18:11:37.689 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-11-29 18:11:37.690 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-11-29 18:11:37.690 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-11-29 18:11:37.690 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-29 18:11:37.690 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-29 18:11:37.690 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-29 18:11:37.690 +03:00 [DBG] Start discovery request
2018-11-29 18:11:37.728 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-11-29 18:11:37.728 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-11-29 18:11:37.728 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-11-29 18:11:37.728 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-29 18:11:37.728 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-29 18:11:37.728 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-29 18:11:37.728 +03:00 [DBG] Start key discovery request
2018-11-29 18:11:37.728 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-11-29 18:11:37.729 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-11-29 18:11:37.729 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-11-29 18:11:37.729 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-29 18:11:37.729 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-29 18:11:37.729 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-29 18:11:37.729 +03:00 [DBG] Start key discovery request
2018-11-29 18:11:39.860 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-29 18:11:39.860 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-29 18:11:39.860 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-29 18:11:39.860 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-29 18:11:39.860 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-29 18:11:39.860 +03:00 [DBG] Start authorize request
2018-11-29 18:11:39.860 +03:00 [DBG] User in authorize request: d5efccdc-fd27-43b7-b4ed-cd9614bb84d6
2018-11-29 18:11:39.860 +03:00 [DBG] Start authorize request protocol validation
2018-11-29 18:11:39.860 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-29 18:11:39.860 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "d5efccdc-fd27-43b7-b4ed-cd9614bb84d6",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "WRGZjp0BZPHe1UQRuIRpQxO0eNRUM7gxzITfislt",
  "Nonce": "WRGZjp0BZPHe1UQRuIRpQxO0eNRUM7gxzITfislt",
  "SessionId": "7d1dbdfc0e527789ae591a44864272ea",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "WRGZjp0BZPHe1UQRuIRpQxO0eNRUM7gxzITfislt",
    "redirect_uri": "http://localhost:4200",
    "scope": "openid profile email role api1",
    "nonce": "WRGZjp0BZPHe1UQRuIRpQxO0eNRUM7gxzITfislt"
  }
}
2018-11-29 18:11:39.881 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-11-29 18:11:39.881 +03:00 [DBG] Creating Implicit Flow response.
2018-11-29 18:11:39.881 +03:00 [DBG] Getting claims for access token for client: angular
2018-11-29 18:11:39.881 +03:00 [DBG] Getting claims for access token for subject: d5efccdc-fd27-43b7-b4ed-cd9614bb84d6
2018-11-29 18:11:39.883 +03:00 [DBG] Getting claims for identity token for subject: d5efccdc-fd27-43b7-b4ed-cd9614bb84d6 and client: angular
2018-11-29 18:11:39.886 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "d5efccdc-fd27-43b7-b4ed-cd9614bb84d6",
  "Scopes": "openid profile email role api1",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****dZsA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****S9IQ"
    }
  ],
  "ActivityId": "0HLIM1JANDSH4:0000000E",
  "TimeStamp": "2018-11-29T15:11:39Z",
  "ProcessId": 32454,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-11-29 18:11:39.886 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "d5efccdc-fd27-43b7-b4ed-cd9614bb84d6",
  "ClientId": "angular",
  "RedirectUri": "http://localhost:4200",
  "State": "WRGZjp0BZPHe1UQRuIRpQxO0eNRUM7gxzITfislt",
  "Scope": "openid profile email role api1"
}
2018-11-29 18:11:40.359 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-11-29 18:11:40.359 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-11-29 18:11:40.359 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-11-29 18:11:40.359 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-29 18:11:40.359 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-29 18:11:40.359 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-29 18:11:40.359 +03:00 [DBG] Start discovery request
2018-11-29 18:11:40.369 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-11-29 18:11:40.369 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-11-29 18:11:40.369 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-11-29 18:11:40.369 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-29 18:11:40.369 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-29 18:11:40.369 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-29 18:11:40.369 +03:00 [DBG] Start discovery request
2018-11-29 18:11:40.413 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-11-29 18:11:40.413 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-11-29 18:11:40.413 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-11-29 18:11:40.414 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-29 18:11:40.414 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-29 18:11:40.414 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-11-29 18:11:40.414 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-29 18:11:40.414 +03:00 [DBG] Start key discovery request
2018-11-29 18:11:40.414 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-11-29 18:11:40.414 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-11-29 18:11:40.414 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-29 18:11:40.414 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-29 18:11:40.414 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-29 18:11:40.414 +03:00 [DBG] Start key discovery request
2018-11-29 18:11:50.818 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4201
2018-11-29 18:11:50.819 +03:00 [DBG] Client list checked and origin: http://localhost:4201 is allowed
2018-11-29 18:11:50.819 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4201
2018-11-29 18:11:50.819 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-29 18:11:50.819 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-29 18:11:50.819 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-29 18:11:50.819 +03:00 [DBG] Start discovery request
2018-11-29 18:11:50.827 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4201
2018-11-29 18:11:50.827 +03:00 [DBG] Client list checked and origin: http://localhost:4201 is allowed
2018-11-29 18:11:50.827 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4201
2018-11-29 18:11:50.827 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-29 18:11:50.827 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-29 18:11:50.827 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-29 18:11:50.827 +03:00 [DBG] Start discovery request
2018-11-29 18:11:50.894 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4201
2018-11-29 18:11:50.895 +03:00 [DBG] Client list checked and origin: http://localhost:4201 is allowed
2018-11-29 18:11:50.895 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4201
2018-11-29 18:11:50.895 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-29 18:11:50.895 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-29 18:11:50.895 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-29 18:11:50.895 +03:00 [DBG] Start key discovery request
2018-11-29 18:11:50.896 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4201
2018-11-29 18:11:50.896 +03:00 [DBG] Client list checked and origin: http://localhost:4201 is allowed
2018-11-29 18:11:50.896 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4201
2018-11-29 18:11:50.896 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-29 18:11:50.896 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-29 18:11:50.896 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-29 18:11:50.896 +03:00 [DBG] Start key discovery request
2018-11-29 18:11:52.922 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-29 18:11:52.923 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-29 18:11:52.923 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-11-29 18:11:52.923 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-11-29 18:11:52.923 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-11-29 18:11:52.923 +03:00 [DBG] Start authorize request
2018-11-29 18:11:52.923 +03:00 [DBG] User in authorize request: d5efccdc-fd27-43b7-b4ed-cd9614bb84d6
2018-11-29 18:11:52.923 +03:00 [DBG] Start authorize request protocol validation
2018-11-29 18:11:52.923 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-11-29 18:11:52.923 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://localhost:4201",
  "AllowedRedirectUris": [
    "http://localhost:4200",
    "http://localhost:4201"
  ],
  "SubjectId": "d5efccdc-fd27-43b7-b4ed-cd9614bb84d6",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email role api1",
  "State": "sV5evzBb47UF3mxj4pbF6UaBefQU4lJqLTXKJd7b",
  "Nonce": "sV5evzBb47UF3mxj4pbF6UaBefQU4lJqLTXKJd7b",
  "SessionId": "7d1dbdfc0e527789ae591a44864272ea",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "angular",
    "state": "sV5evzBb47UF3mxj4pbF6UaBefQU4lJqLTXKJd7b",
    "redirect_uri": "http://localhost:4201",
    "scope": "openid profile email role api1",
    "nonce": "sV5evzBb47UF3mxj4pbF6UaBefQU4lJqLTXKJd7b"
  }
}
2018-11-29 18:11:52.929 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-11-29 18:11:52.930 +03:00 [DBG] Creating Implicit Flow response.
2018-11-29 18:11:52.930 +03:00 [DBG] Getting claims for access token for client: angular
2018-11-29 18:11:52.930 +03:00 [DBG] Getting claims for access token for subject: d5efccdc-fd27-43b7-b4ed-cd9614bb84d6
2018-11-29 18:11:52.933 +03:00 [DBG] Getting claims for identity token for subject: d5efccdc-fd27-43b7-b4ed-cd9614bb84d6 and client: angular
2018-11-29 18:11:52.935 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "angular",
  "ClientName": "angular",
  "RedirectUri": "http://localhost:4201",
  "Endpoint": "Authorize",
  "SubjectId": "d5efccdc-fd27-43b7-b4ed-cd9614bb84d6",
  "Scopes": "openid profile email role api1",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****UIHA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****A9kQ"
    }
  ],
  "ActivityId": "0HLIM1JANDSH4:0000000F",
  "TimeStamp": "2018-11-29T15:11:52Z",
  "ProcessId": 32454,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-11-29 18:11:52.935 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "d5efccdc-fd27-43b7-b4ed-cd9614bb84d6",
  "ClientId": "angular",
  "RedirectUri": "http://localhost:4201",
  "State": "sV5evzBb47UF3mxj4pbF6UaBefQU4lJqLTXKJd7b",
  "Scope": "openid profile email role api1"
}
2018-11-29 18:11:53.501 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4201
2018-11-29 18:11:53.501 +03:00 [DBG] Client list checked and origin: http://localhost:4201 is allowed
2018-11-29 18:11:53.502 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4201
2018-11-29 18:11:53.502 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-29 18:11:53.502 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-29 18:11:53.502 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-29 18:11:53.502 +03:00 [DBG] Start discovery request
2018-11-29 18:11:53.521 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4201
2018-11-29 18:11:53.521 +03:00 [DBG] Client list checked and origin: http://localhost:4201 is allowed
2018-11-29 18:11:53.521 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4201
2018-11-29 18:11:53.521 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-29 18:11:53.522 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-29 18:11:53.522 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-29 18:11:53.522 +03:00 [DBG] Start discovery request
2018-11-29 18:11:53.557 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4201
2018-11-29 18:11:53.557 +03:00 [DBG] Client list checked and origin: http://localhost:4201 is allowed
2018-11-29 18:11:53.557 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4201
2018-11-29 18:11:53.557 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-29 18:11:53.557 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-29 18:11:53.557 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-29 18:11:53.557 +03:00 [DBG] Start key discovery request
2018-11-29 18:11:53.558 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4201
2018-11-29 18:11:53.558 +03:00 [DBG] Client list checked and origin: http://localhost:4201 is allowed
2018-11-29 18:11:53.558 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4201
2018-11-29 18:11:53.558 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-29 18:11:53.558 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-29 18:11:53.558 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-29 18:11:53.558 +03:00 [DBG] Start key discovery request
2018-11-29 18:12:00.446 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-29 18:12:00.447 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-29 18:12:00.447 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-11-29 18:12:00.447 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-11-29 18:12:00.447 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-11-29 18:12:00.447 +03:00 [DBG] Processing signout request for d5efccdc-fd27-43b7-b4ed-cd9614bb84d6
2018-11-29 18:12:00.447 +03:00 [DBG] Start end session request validation
2018-11-29 18:12:00.447 +03:00 [DBG] Start identity token validation
2018-11-29 18:12:00.447 +03:00 [DBG] Client found: angular / angular
2018-11-29 18:12:00.455 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-11-29 18:12:00.458 +03:00 [DBG] Token validation success
{
  "ClientId": "angular",
  "ClientName": "angular",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1543504312,
    "exp": 1543504612,
    "iss": "http://localhost:5000",
    "aud": "angular",
    "nonce": "sV5evzBb47UF3mxj4pbF6UaBefQU4lJqLTXKJd7b",
    "iat": 1543504312,
    "at_hash": "VCtpZ4Wu0Ezqah89V4l9VA",
    "sid": "7d1dbdfc0e527789ae591a44864272ea",
    "sub": "d5efccdc-fd27-43b7-b4ed-cd9614bb84d6",
    "auth_time": 1543504292,
    "idp": "local",
    "preferred_username": "admin@admin.com",
    "name": "admin@admin.com",
    "email": "admin@admin.com",
    "email_verified": false,
    "amr": "pwd"
  }
}
2018-11-29 18:12:00.464 +03:00 [INF] End session request validation success
{
  "ClientId": "angular",
  "ClientName": "angular",
  "SubjectId": "d5efccdc-fd27-43b7-b4ed-cd9614bb84d6",
  "PostLogOutUri": "http://localhost:4201",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6ImU5ZWE4ZDQxYTNmNDEzNzM2MjY5YWZhZTkzMGY0NWYzIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1NDM1MDQzMTIsImV4cCI6MTU0MzUwNDYxMiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiYW5ndWxhciIsIm5vbmNlIjoic1Y1ZXZ6QmI0N1VGM214ajRwYkY2VWFCZWZRVTRsSnFMVFhLSmQ3YiIsImlhdCI6MTU0MzUwNDMxMiwiYXRfaGFzaCI6IlZDdHBaNFd1MEV6cWFoODlWNGw5VkEiLCJzaWQiOiI3ZDFkYmRmYzBlNTI3Nzg5YWU1OTFhNDQ4NjQyNzJlYSIsInN1YiI6ImQ1ZWZjY2RjLWZkMjctNDNiNy1iNGVkLWNkOTYxNGJiODRkNiIsImF1dGhfdGltZSI6MTU0MzUwNDI5MiwiaWRwIjoibG9jYWwiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbkBhZG1pbi5jb20iLCJuYW1lIjoiYWRtaW5AYWRtaW4uY29tIiwiZW1haWwiOiJhZG1pbkBhZG1pbi5jb20iLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsImFtciI6WyJwd2QiXX0.f5hcejVIRt0DiK_SpigXWq803KTqXZdqIZGUCdDkRpqhbmbIaLmMRFgJu5zkjj-s2BhWXMZG1J7t0zZoSWi5CzyE-LP8hlGCiC6mCoS0H3Dr66rGeKvt1dKZzLPPsUUL_kXRhfV5j3K0-EATzR1LQnML5PXSV_KiaJ1eMRVdZLIDOtaOSYuyZdhoduSwaUzGvHxLjCCFjaHSbOF-dZrM5BTgxeYwXq9sF4txZ5DecWdZe-G1Jgxa9zm0QQtRbcxXOBvg6NFUwpKPMP1PjiIeytFiMCmgeNK1F2bI4jer01Lsxdwwl5yWlPTq0uJpSQFy-3lV76_t8Cf1JasfArUIHA",
    "post_logout_redirect_uri": "http://localhost:4201"
  }
}
2018-11-29 18:12:00.464 +03:00 [DBG] Success validating end session request from angular
2018-11-29 18:12:00.488 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-29 18:12:00.488 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-11-29 18:12:00.495 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-11-29 18:12:00.495 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-11-29 18:12:00.495 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-11-29 18:12:00.495 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "d5efccdc-fd27-43b7-b4ed-cd9614bb84d6",
  "DisplayName": "admin@admin.com",
  "ActivityId": "0HLIM1JANDSH4:00000011",
  "TimeStamp": "2018-11-29T15:12:00Z",
  "ProcessId": 32454,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-11-29 18:12:00.613 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-11-29 18:12:00.613 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-11-29 18:12:00.613 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-11-29 18:12:00.613 +03:00 [DBG] Processing signout callback request
2018-11-29 18:12:00.614 +03:00 [DBG] Client front-channel logout URLs: http://localhost:4200?sid=7d1dbdfc0e527789ae591a44864272ea&iss=http%3A%2F%2Flocalhost%3A5000
2018-11-29 18:12:00.614 +03:00 [DBG] No client back-channel logout URLs
2018-11-29 18:12:00.614 +03:00 [INF] Successful signout callback.
2018-11-29 18:12:00.614 +03:00 [DBG] Client front-channel iframe urls: ["http://localhost:4200?sid=7d1dbdfc0e527789ae591a44864272ea&iss=http%3A%2F%2Flocalhost%3A5000"]
2018-11-29 18:12:00.614 +03:00 [DBG] No client back-channel iframe urls
2018-11-29 18:12:01.156 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-11-29 18:12:01.156 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-11-29 18:12:01.156 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-11-29 18:12:01.156 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-29 18:12:01.156 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-29 18:12:01.156 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-29 18:12:01.157 +03:00 [DBG] Start discovery request
2018-11-29 18:12:01.191 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-11-29 18:12:01.191 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-11-29 18:12:01.191 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-11-29 18:12:01.191 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-29 18:12:01.191 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-29 18:12:01.191 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-29 18:12:01.192 +03:00 [DBG] Start discovery request
2018-11-29 18:12:01.193 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-11-29 18:12:01.193 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-11-29 18:12:01.193 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-11-29 18:12:01.193 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-29 18:12:01.193 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-29 18:12:01.194 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-29 18:12:01.194 +03:00 [DBG] Start key discovery request
2018-11-29 18:12:01.201 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-11-29 18:12:01.202 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-11-29 18:12:01.202 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-11-29 18:12:01.202 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-29 18:12:01.202 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-29 18:12:01.202 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-29 18:12:01.202 +03:00 [DBG] Start key discovery request
2018-11-29 18:12:04.136 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4201
2018-11-29 18:12:04.136 +03:00 [DBG] Client list checked and origin: http://localhost:4201 is allowed
2018-11-29 18:12:04.136 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4201
2018-11-29 18:12:04.136 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-29 18:12:04.136 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-29 18:12:04.136 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-29 18:12:04.136 +03:00 [DBG] Start discovery request
2018-11-29 18:12:04.142 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4201
2018-11-29 18:12:04.142 +03:00 [DBG] Client list checked and origin: http://localhost:4201 is allowed
2018-11-29 18:12:04.142 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4201
2018-11-29 18:12:04.142 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-29 18:12:04.142 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-29 18:12:04.142 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-29 18:12:04.142 +03:00 [DBG] Start discovery request
2018-11-29 18:12:04.178 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4201
2018-11-29 18:12:04.178 +03:00 [DBG] Client list checked and origin: http://localhost:4201 is allowed
2018-11-29 18:12:04.178 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4201
2018-11-29 18:12:04.178 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-29 18:12:04.178 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-29 18:12:04.178 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-29 18:12:04.178 +03:00 [DBG] Start key discovery request
2018-11-29 18:12:04.223 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4201
2018-11-29 18:12:04.223 +03:00 [DBG] Client list checked and origin: http://localhost:4201 is allowed
2018-11-29 18:12:04.223 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4201
2018-11-29 18:12:04.223 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-29 18:12:04.224 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-29 18:12:04.224 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-29 18:12:04.224 +03:00 [DBG] Start key discovery request
2018-11-29 18:12:06.752 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-11-29 18:12:06.753 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-11-29 18:12:06.753 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-11-29 18:12:06.753 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-29 18:12:06.753 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-29 18:12:06.753 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-29 18:12:06.753 +03:00 [DBG] Start discovery request
2018-11-29 18:12:06.756 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-11-29 18:12:06.756 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-11-29 18:12:06.756 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-11-29 18:12:06.756 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-29 18:12:06.757 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-29 18:12:06.757 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-29 18:12:06.757 +03:00 [DBG] Start discovery request
2018-11-29 18:12:06.793 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-11-29 18:12:06.793 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-11-29 18:12:06.793 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-11-29 18:12:06.794 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-29 18:12:06.794 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-29 18:12:06.794 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-29 18:12:06.794 +03:00 [DBG] Start key discovery request
2018-11-29 18:12:06.827 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-11-29 18:12:06.827 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-11-29 18:12:06.827 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-11-29 18:12:06.827 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-29 18:12:06.827 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-29 18:12:06.827 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-29 18:12:06.827 +03:00 [DBG] Start key discovery request
2018-11-29 18:12:08.601 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-11-29 18:12:08.601 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-11-29 18:12:08.601 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-11-29 18:12:08.601 +03:00 [DBG] Processing signout request for anonymous
2018-11-29 18:12:08.601 +03:00 [DBG] Start end session request validation
2018-11-29 18:12:08.601 +03:00 [DBG] Start identity token validation
2018-11-29 18:12:08.602 +03:00 [DBG] Client found: angular / angular
2018-11-29 18:12:08.603 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-11-29 18:12:08.603 +03:00 [DBG] Token validation success
{
  "ClientId": "angular",
  "ClientName": "angular",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1543504299,
    "exp": 1543504599,
    "iss": "http://localhost:5000",
    "aud": "angular",
    "nonce": "WRGZjp0BZPHe1UQRuIRpQxO0eNRUM7gxzITfislt",
    "iat": 1543504299,
    "at_hash": "UhDPZg_VaJHVQCG6LUVSng",
    "sid": "7d1dbdfc0e527789ae591a44864272ea",
    "sub": "d5efccdc-fd27-43b7-b4ed-cd9614bb84d6",
    "auth_time": 1543504292,
    "idp": "local",
    "preferred_username": "admin@admin.com",
    "name": "admin@admin.com",
    "email": "admin@admin.com",
    "email_verified": false,
    "amr": "pwd"
  }
}
2018-11-29 18:12:08.603 +03:00 [INF] End session request validation success
{
  "ClientId": "angular",
  "ClientName": "angular",
  "SubjectId": "unknown",
  "PostLogOutUri": "http://localhost:4200",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6ImU5ZWE4ZDQxYTNmNDEzNzM2MjY5YWZhZTkzMGY0NWYzIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1NDM1MDQyOTksImV4cCI6MTU0MzUwNDU5OSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiYW5ndWxhciIsIm5vbmNlIjoiV1JHWmpwMEJaUEhlMVVRUnVJUnBReE8wZU5SVU03Z3h6SVRmaXNsdCIsImlhdCI6MTU0MzUwNDI5OSwiYXRfaGFzaCI6IlVoRFBaZ19WYUpIVlFDRzZMVVZTbmciLCJzaWQiOiI3ZDFkYmRmYzBlNTI3Nzg5YWU1OTFhNDQ4NjQyNzJlYSIsInN1YiI6ImQ1ZWZjY2RjLWZkMjctNDNiNy1iNGVkLWNkOTYxNGJiODRkNiIsImF1dGhfdGltZSI6MTU0MzUwNDI5MiwiaWRwIjoibG9jYWwiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbkBhZG1pbi5jb20iLCJuYW1lIjoiYWRtaW5AYWRtaW4uY29tIiwiZW1haWwiOiJhZG1pbkBhZG1pbi5jb20iLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsImFtciI6WyJwd2QiXX0.dCsmPSgvxtqRiKSJFQw-Hd4FFNYq098qLmJ96nvF4YFcqLsSaZ65KB_C_ry2m9BZLXWOldrR2y8gdu2k_JX0b3k-X2uS36zx-Z5f5Zkf2Kxn8ryXeaKYBrArC3sGJYEljBCqWga82zEwO5lzrGcQ1u_2hzt6mSFX2fJ3GTlGr9KPsBsZi6-KQQfZgKpMA8F6D6MEWctOU_UDoijAU2XYEirV_p-aAi2gkpUWcBHlSyKDO_iNmdVrgdJayAxDcszYAhTydBkTrgQ6wnr1Ve3MT4LnpE4ngb4oedFbYUB9t7J5W-DqiGKTAgc1Pi5IukaC19-J5B4YDUpGcdmgdSdZsA",
    "post_logout_redirect_uri": "http://localhost:4200"
  }
}
2018-11-29 18:12:08.603 +03:00 [DBG] Success validating end session request from angular
2018-11-29 18:12:10.634 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-11-29 18:12:10.634 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-11-29 18:12:10.634 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-11-29 18:12:10.634 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-29 18:12:10.634 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-29 18:12:10.634 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-29 18:12:10.634 +03:00 [DBG] Start discovery request
2018-11-29 18:12:10.640 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-11-29 18:12:10.640 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-11-29 18:12:10.640 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-11-29 18:12:10.640 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-11-29 18:12:10.640 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-11-29 18:12:10.640 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-11-29 18:12:10.640 +03:00 [DBG] Start discovery request
2018-11-29 18:12:10.675 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-11-29 18:12:10.675 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-11-29 18:12:10.675 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-11-29 18:12:10.675 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-11-29 18:12:10.675 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-29 18:12:10.675 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-11-29 18:12:10.675 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-11-29 18:12:10.675 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-11-29 18:12:10.675 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-29 18:12:10.675 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-29 18:12:10.675 +03:00 [DBG] Start key discovery request
2018-11-29 18:12:10.676 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-11-29 18:12:10.676 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-11-29 18:12:10.676 +03:00 [DBG] Start key discovery request
2018-11-29 20:24:47.870 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-29 20:24:47.905 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-11-29 20:24:47.907 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-11-29 20:24:47.907 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-11-29 20:24:47.908 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-11-29 20:24:47.908 +03:00 [DBG] Using Identity.Application as default scheme for forbid
